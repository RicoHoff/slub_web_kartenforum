(function(){var g,aa=aa||{},k=this;function l(a){return void 0!==a}function ba(){}
function ca(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function da(a){return null!=a}function ea(a){return"array"==ca(a)}function fa(a){var b=ca(a);return"array"==b||"object"==b&&"number"==typeof a.length}function n(a){return"string"==typeof a}function ga(a){return"number"==typeof a}function ha(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var ia="closure_uid_"+(1E9*Math.random()>>>0),ja=0;function ka(a,b,c){return a.call.apply(a.bind,arguments)}
function la(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function p(a,b,c){p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ka:la;return p.apply(null,arguments)}
function na(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var oa=Date.now||function(){return+new Date};function q(a,b){var c=a.split("."),d=k;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&l(b)?d[e]=b:d[e]?d=d[e]:d=d[e]={}}
function t(a,b){function c(){}c.prototype=b.prototype;a.ma=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Ub=function(a,c,f){for(var h=Array(arguments.length-2),m=2;m<arguments.length;m++)h[m-2]=arguments[m];return b.prototype[c].apply(a,h)}};var pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,w,Ca,Da,Ea,Fa,Ga,x,Ha;
q("vk2.settings.updateSettings",function(){pa=vk2x.settings.ELASTICSEARCH_NODE;qa=vk2x.settings.ELASTICSEARCH_SRS;ra=vk2x.settings.EVALUATION_GETPROCESS;sa=vk2x.settings.EVALUATION_SETISINVALIDE;ta=vk2x.settings.EVALUATION_SETISVALIDE;ua=vk2x.settings.GEOREFERENCE_CONFIRM;va=vk2x.settings.GEOREFERENCE_EXTENT_SRS;wa=vk2x.settings.GEOREFERENCE_GETPROCESS;xa=vk2x.settings.GEOREFERENCE_HISTORY;ya=vk2x.settings.GEOREFERENCE_PAGE;za=vk2x.settings.GEOREFERENCE_VALIDATION;Aa=vk2x.settings.MAIN_PAGE;Ba=vk2x.settings.MAPPROFILE_PAGE;
w=vk2x.settings.MAPVIEW_PARAMS;Ia=vk2x.settings.MODE_3D;Ca=0<vk2x.settings.OSM_URLS.length&&""!==vk2x.settings.OSM_URLS[0]?vk2x.settings.OSM_URLS:["//a.tile.openstreetmap.org/{z}/{x}/{y}.png","//b.tile.openstreetmap.org/{z}/{x}/{y}.png","//c.tile.openstreetmap.org/{z}/{x}/{y}.png"];Da=vk2x.settings.TERRAIN_TILES_URL;Ea=vk2x.settings.THUMB_PATH;Fa=vk2x.settings.TMS_URL_SUBDOMAINS;Ga=vk2x.settings.NOMINATIM_URL;x=vk2x.settings.WITH_SPEAKING_URLS;Ha=vk2x.settings.WMS_DYNAMIC_TEMPLATE});var Ia=!1;function Ja(a,b){function c(a,c){if("polygon"===c.toLowerCase()){for(var b=[],d=0,e=a.length;d<e;d++){var v=ol.proj.transform(a[d],"EPSG:4326","EPSG:900913");Ia&&v.push(1E4);b.push(v)}return new ol.geom.Polygon([b])}}var d="clippolygon"in b?c(b.clippolygon,"polygon"):void 0,d=void 0===d&&"geometry"in b?c(b.geometry.coordinates[0],b.geometry.type):d;delete b.geometry;var d=new ol.Feature({geometry:d}),e;for(e in b)b.hasOwnProperty(e)&&("time"===e?d.set(e,b[e].split("-")[0]):d.set(e,b[e]));d.setId(a);
return d}function Ka(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(Ja(a[c]._id,a[c]._source));return b};var y={j:{}};y.j.Sb=new ol.style.Style({stroke:new ol.style.Stroke({color:"rgba(0, 0, 255, 1.0)",width:2})});y.j.rb=new ol.style.Style({stroke:new ol.style.Stroke({color:"#f00",width:1}),fill:new ol.style.Fill({color:"rgba(255,0,0,0.2)"})});y.j.sb=new ol.style.Style({stroke:new ol.style.Stroke({color:"#000000",width:2})});y.j.Ka=new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.2)"}),stroke:new ol.style.Stroke({color:"#ffcc33",width:2}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#ffcc33"})})});
y.j.Ca=function(a){var b=16*Math.PI/6,b=[0,b,b,b,b,b,b];a=l(a)?a:void 0;return new ol.style.Style({image:new ol.style.Circle({radius:8,fill:new ol.style.Fill({color:"rgba(255,255,255,0.6)"}),stroke:new ol.style.Stroke({color:"rgba(49,159,211,0.5)",width:15,lineDash:b})}),text:new ol.style.Text({textAlign:"start",textBaseline:"bottom",font:"12px Calibri,sans-serif",text:a,fill:new ol.style.Fill({color:"#aa3300"}),stroke:new ol.style.Stroke({color:"#ffffff",width:3}),offsetX:10,offsetY:-5})})};
y.j.La=new ol.style.Style({image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.6)"}),stroke:new ol.style.Stroke({color:"#29A329",width:1.5})})});y.j.pa=new ol.style.Style({image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"rgba(255,0,0,0.1)"}),stroke:new ol.style.Stroke({color:"#f00",width:1})}),zIndex:1E5});
y.j.ka=function(a){var b=22*Math.PI/6;a=l(a)?a:void 0;b=[0,b,b,b,b,b,b];return new ol.style.Style({image:new ol.style.Circle({radius:11,fill:new ol.style.Fill({color:"rgba(255,128,0,0.6)"}),stroke:new ol.style.Stroke({color:"rgba(240,0,0,0.5)",width:15,lineDash:b})}),text:new ol.style.Text({textAlign:"start",textBaseline:"bottom",font:"12px Calibri,sans-serif",text:a,fill:new ol.style.Fill({color:"#aa3300"}),stroke:new ol.style.Stroke({color:"#ffffff",width:3}),offsetX:10,offsetY:-5})})};function La(){this.b=this.a=!1;this.i=0}function Ma(a){a.a||a.b||(a.i+=1);return""+a.i};function Na(a){this.wa=a};function Oa(){0!=Pa&&(Qa[this[ia]||(this[ia]=++ja)]=this);this.i=this.i;this.M=this.M}var Pa=0,Qa={};Oa.prototype.i=!1;function z(a){a.i||(a.i=!0,a.W(),0!=Pa&&(a=a[ia]||(a[ia]=++ja),delete Qa[a]))}Oa.prototype.W=function(){if(this.M)for(;this.M.length;)this.M.shift()()};function A(a,b){this.type=a;this.currentTarget=this.target=b;this.b=!1;this.ib=!0}A.prototype.stopPropagation=function(){this.b=!0};A.prototype.preventDefault=function(){this.ib=!1};var Ra="closure_listenable_"+(1E6*Math.random()|0),Sa=0;function Ta(a,b,c,d,e){this.listener=a;this.a=null;this.src=b;this.type=c;this.ga=!!d;this.Z=e;++Sa;this.ca=this.qa=!1}function Va(a){a.ca=!0;a.listener=null;a.a=null;a.src=null;a.Z=null};function Wa(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/(?:"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)[\s\u2028\u2029]*(?=:|,|]|}|$)/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);};function Xa(a,b){this.width=a;this.height=b}g=Xa.prototype;g.clone=function(){return new Xa(this.width,this.height)};g.ub=function(){return this.width*this.height};g.isEmpty=function(){return!this.ub()};g.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};g.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};g.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function Ya(a){this.a=a}var Za=/\s*;\s*/;g=Ya.prototype;g.set=function(a,b,c,d,e,f){if(/[;=\s]/.test(a))throw Error('Invalid cookie name "'+a+'"');if(/[;\r\n]/.test(b))throw Error('Invalid cookie value "'+b+'"');l(c)||(c=-1);e=e?";domain="+e:"";d=d?";path="+d:"";f=f?";secure":"";c=0>c?"":0==c?";expires="+(new Date(1970,1,1)).toUTCString():";expires="+(new Date(oa()+1E3*c)).toUTCString();this.a.cookie=a+"="+b+e+d+c+f};
g.get=function(a,b){for(var c=a+"=",d=(this.a.cookie||"").split(Za),e=0,f;f=d[e];e++){if(0==f.lastIndexOf(c,0))return f.substr(c.length);if(f==a)return""}return b};g.remove=function(a,b,c){var d=l(this.get(a));this.set(a,"",0,b,c);return d};g.getKeys=function(){return $a(this).keys};g.H=function(){return $a(this).values};g.isEmpty=function(){return!this.a.cookie};g.Aa=function(){return this.a.cookie?(this.a.cookie||"").split(Za).length:0};
g.clear=function(){for(var a=$a(this).keys,b=a.length-1;0<=b;b--)this.remove(a[b])};function $a(a){a=(a.a.cookie||"").split(Za);for(var b=[],c=[],d,e,f=0;e=a[f];f++)d=e.indexOf("="),-1==d?(b.push(""),c.push(e)):(b.push(e.substring(0,d)),c.push(e.substring(d+1)));return{keys:b,values:c}}var ab=new Ya(document);ab.b=3950;function bb(){}bb.prototype.a=null;function cb(a){var b;(b=a.a)||(b={},db(a)&&(b[0]=!0,b[1]=!0),b=a.a=b);return b};function eb(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function fb(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return!0;return!1}function gb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function hb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function ib(a){return null!==a&&"withCredentials"in a}function jb(a){var b={},c;for(c in a)b[c]=a[c];return b}var kb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function lb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<kb.length;f++)c=kb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function mb(a){mb[" "](a);return a}mb[" "]=ba;var ob=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function pb(a){if(!qb.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(rb,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(sb,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(tb,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(ub,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(vb,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(wb,"&#0;"));return a}var rb=/&/g,sb=/</g,tb=/>/g,ub=/"/g,vb=/'/g,wb=/\x00/g,qb=/[\x00&<>"']/;
function xb(a,b){return a<b?-1:a>b?1:0}function yb(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})}function zb(a){var b=n(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};var Ab=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(n(a))return n(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Bb=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=n(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Cb=Array.prototype.filter?function(a,b,c){return Array.prototype.filter.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,h=n(a)?a.split(""):a,m=0;m<d;m++)if(m in h){var r=h[m];b.call(c,r,m,a)&&(e[f++]=r)}return e};function Db(a){var b;a:{b=Eb;for(var c=a.length,d=n(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:n(a)?a.charAt(b):a[b]}function Fb(a,b){return 0<=Ab(a,b)}function Gb(a,b){var c=Ab(a,b),d;(d=0<=c)&&Array.prototype.splice.call(a,c,1);return d}
function Hb(a){return Array.prototype.concat.apply(Array.prototype,arguments)}function Ib(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Jb(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)};function Kb(a){a=a.className;return n(a)&&a.match(/\S+/g)||[]}function C(a,b){var c=Kb(a);Lb(c,Jb(arguments,1));a.className=c.join(" ")}function D(a,b){var c=Kb(a),c=Mb(c,Jb(arguments,1));a.className=c.join(" ")}function Lb(a,b){for(var c=0;c<b.length;c++)Fb(a,b[c])||a.push(b[c])}function Mb(a,b){return Cb(a,function(a){return!Fb(b,a)})}function Nb(a,b,c){var d=Kb(a);n(b)?Gb(d,b):ea(b)&&(d=Mb(d,b));n(c)&&!Fb(d,c)?d.push(c):ea(c)&&Lb(d,c);a.className=d.join(" ")}
function E(a,b){return Fb(Kb(a),b)};function Ob(a){if(a.classList)return a.classList;a=a.className;return n(a)&&a.match(/\S+/g)||[]}function Pb(a,b){return a.classList?a.classList.contains(b):Fb(Ob(a),b)}function Qb(a,b){a.classList?a.classList.add(b):Pb(a,b)||(a.className+=0<a.className.length?" "+b:b)}function Rb(a,b){a.classList?a.classList.remove(b):Pb(a,b)&&(a.className=Cb(Ob(a),function(a){return a!=b}).join(" "))}function Sb(a){Pb(a,"active")?Rb(a,"active"):Qb(a,"active")};function Tb(a){this.src=a;this.a={};this.b=0}Tb.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.a[f];a||(a=this.a[f]=[],this.b++);var h=Ub(a,b,d,e);-1<h?(b=a[h],c||(b.qa=!1)):(b=new Ta(b,this.src,f,!!d,e),b.qa=c,a.push(b));return b};Tb.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.a))return!1;var e=this.a[a];b=Ub(e,b,c,d);return-1<b?(Va(e[b]),Array.prototype.splice.call(e,b,1),0==e.length&&(delete this.a[a],this.b--),!0):!1};
function Vb(a,b){var c=b.type;c in a.a&&Gb(a.a[c],b)&&(Va(b),0==a.a[c].length&&(delete a.a[c],a.b--))}Tb.prototype.Da=function(a,b,c,d){a=this.a[a.toString()];var e=-1;a&&(e=Ub(a,b,c,d));return-1<e?a[e]:null};Tb.prototype.hasListener=function(a,b){var c=l(a),d=c?a.toString():"",e=l(b);return fb(this.a,function(a){for(var h=0;h<a.length;++h)if(!(c&&a[h].type!=d||e&&a[h].ga!=b))return!0;return!1})};
function Ub(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.ca&&f.listener==b&&f.ga==!!c&&f.Z==d)return e}return-1};var Wb;function Xb(){}t(Xb,bb);function Yb(a){return(a=db(a))?new ActiveXObject(a):new XMLHttpRequest}function db(a){if(!a.b&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.b=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.b}Wb=new Xb;function Zb(a,b){this.f={};this.a=[];this.b=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof Zb?(c=a.getKeys(),d=a.H()):(c=hb(a),d=gb(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}g=Zb.prototype;g.Aa=function(){return this.b};g.H=function(){$b(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.f[this.a[b]]);return a};g.getKeys=function(){$b(this);return this.a.concat()};
g.equals=function(a,b){if(this===a)return!0;if(this.b!=a.Aa())return!1;var c=b||ac;$b(this);for(var d,e=0;d=this.a[e];e++)if(!c(this.get(d),a.get(d)))return!1;return!0};function ac(a,b){return a===b}g.isEmpty=function(){return 0==this.b};g.clear=function(){this.f={};this.b=this.a.length=0};g.remove=function(a){return bc(this.f,a)?(delete this.f[a],this.b--,this.a.length>2*this.b&&$b(this),!0):!1};
function $b(a){if(a.b!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];bc(a.f,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.b!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],bc(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}g.get=function(a,b){return bc(this.f,a)?this.f[a]:b};g.set=function(a,b){bc(this.f,a)||(this.b++,this.a.push(a));this.f[a]=b};g.forEach=function(a,b){for(var c=this.getKeys(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};g.clone=function(){return new Zb(this)};
function bc(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function cc(a){if(a.H&&"function"==typeof a.H)return a.H();if(n(a))return a.split("");if(fa(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return gb(a)}
function dc(a,b,c){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,c);else if(fa(a)||n(a))Bb(a,b,c);else{var d;if(a.getKeys&&"function"==typeof a.getKeys)d=a.getKeys();else if(a.H&&"function"==typeof a.H)d=void 0;else if(fa(a)||n(a)){d=[];for(var e=a.length,f=0;f<e;f++)d.push(f)}else d=hb(a);for(var e=cc(a),f=e.length,h=0;h<f;h++)b.call(c,e[h],d&&d[h],a)}};var ec=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function fc(a,b){if(a)for(var c=a.split("&"),d=0;d<c.length;d++){var e=c[d].indexOf("="),f=null,h=null;0<=e?(f=c[d].substring(0,e),h=c[d].substring(e+1)):f=c[d];b(f,h?decodeURIComponent(h.replace(/\+/g," ")):"")}};function F(a,b){this.h=this.u=this.i="";this.o=null;this.M=this.l="";this.b=!1;var c;a instanceof F?(this.b=l(b)?b:a.b,gc(this,a.i),this.u=a.u,this.h=a.h,hc(this,a.o),this.l=a.l,ic(this,a.a.clone()),this.M=a.M):a&&(c=String(a).match(ec))?(this.b=!!b,gc(this,c[1]||"",!0),this.u=jc(c[2]||""),this.h=jc(c[3]||"",!0),hc(this,c[4]),this.l=jc(c[5]||"",!0),ic(this,c[6]||"",!0),this.M=jc(c[7]||"")):(this.b=!!b,this.a=new kc(null,0,this.b))}
F.prototype.toString=function(){var a=[],b=this.i;b&&a.push(lc(b,mc,!0),":");var c=this.h;if(c||"file"==b)a.push("//"),(b=this.u)&&a.push(lc(b,mc,!0),"@"),a.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c=this.o,null!=c&&a.push(":",String(c));if(c=this.l)this.h&&"/"!=c.charAt(0)&&a.push("/"),a.push(lc(c,"/"==c.charAt(0)?nc:oc,!0));(c=this.a.toString())&&a.push("?",c);(c=this.M)&&a.push("#",lc(c,pc));return a.join("")};F.prototype.clone=function(){return new F(this)};
function gc(a,b,c){a.i=c?jc(b,!0):b;a.i&&(a.i=a.i.replace(/:$/,""))}function hc(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.o=b}else a.o=null}function ic(a,b,c){b instanceof kc?(a.a=b,qc(a.a,a.b)):(c||(b=lc(b,rc)),a.a=new kc(b,0,a.b))}function sc(a){return a.a}function jc(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function lc(a,b,c){return n(a)?(a=encodeURI(a).replace(b,tc),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}
function tc(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var mc=/[#\/\?@]/g,oc=/[\#\?:]/g,nc=/[\#\?]/g,rc=/[\#\?@]/g,pc=/#/g;function kc(a,b,c){this.b=this.a=null;this.i=a||null;this.h=!!c}function uc(a){a.a||(a.a=new Zb,a.b=0,a.i&&fc(a.i,function(b,c){a.add(decodeURIComponent(b.replace(/\+/g," ")),c)}))}g=kc.prototype;g.Aa=function(){uc(this);return this.b};
g.add=function(a,b){uc(this);this.i=null;a=vc(this,a);var c=this.a.get(a);c||this.a.set(a,c=[]);c.push(b);this.b=this.b+1;return this};g.remove=function(a){uc(this);a=vc(this,a);return bc(this.a.f,a)?(this.i=null,this.b=this.b-this.a.get(a).length,this.a.remove(a)):!1};g.clear=function(){this.a=this.i=null;this.b=0};g.isEmpty=function(){uc(this);return 0==this.b};function G(a,b){uc(a);b=vc(a,b);return bc(a.a.f,b)}
g.getKeys=function(){uc(this);for(var a=this.a.H(),b=this.a.getKeys(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};g.H=function(a){uc(this);var b=[];if(n(a))G(this,a)&&(b=Hb(b,this.a.get(vc(this,a))));else{a=this.a.H();for(var c=0;c<a.length;c++)b=Hb(b,a[c])}return b};g.set=function(a,b){uc(this);this.i=null;a=vc(this,a);G(this,a)&&(this.b=this.b-this.a.get(a).length);this.a.set(a,[b]);this.b=this.b+1;return this};
g.get=function(a,b){var c=a?this.H(a):[];return 0<c.length?String(c[0]):b};g.toString=function(){if(this.i)return this.i;if(!this.a)return"";for(var a=[],b=this.a.getKeys(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.H(d),f=0;f<d.length;f++){var h=e;""!==d[f]&&(h+="="+encodeURIComponent(String(d[f])));a.push(h)}return this.i=a.join("&")};g.clone=function(){var a=new kc;a.i=this.i;this.a&&(a.a=this.a.clone(),a.b=this.b);return a};
function vc(a,b){var c=String(b);a.h&&(c=c.toLowerCase());return c}function qc(a,b){b&&!a.h&&(uc(a),a.i=null,a.a.forEach(function(a,b){var e=b.toLowerCase();b!=e&&(this.remove(b),this.remove(e),0<a.length&&(this.i=null,this.a.set(vc(this,e),Ib(a)),this.b=this.b+a.length))},a));a.h=b}g.extend=function(a){for(var b=0;b<arguments.length;b++)dc(arguments[b],function(a,b){this.add(b,a)},this)};y.g={};y.g.Vb=function(a){a=a.split("/");for(var b="/",c=0;c<a.length;c++)""!==a[c]&&(b+=a[c]+"/");return b};y.g.B=function(){var a=new F(window.location.href),b=y.getQueryParam("L"),b=void 0!==b&&""!==b?b:0,a=a.l;return x?-1===a.indexOf(Aa)?(-1!==a.indexOf("/de")||-1!==a.indexOf("/en")?a.substring(0,3):"")+Aa+"?":a.substring(0,a.indexOf(Aa)+Aa.length)+"?":a+"?"+Aa+"&L="+b};y.g.L=function(){var a=y.g.B(),b=a.indexOf("?");return a.substring(0,b)};
y.g.Ba=function(a){new F(window.location.href);return x?y.g.L()+ra+"&"+a:y.g.B()+"&"+ra+"&"+a};y.g.Bb=function(a){new F(window.location.href);return x?y.g.L()+ta+"&"+a:y.g.B()+"&"+ta+"&"+a};y.g.Ab=function(a){new F(window.location.href);return x?y.g.L()+sa+"&"+a:y.g.B()+"&"+sa+"&"+a};y.g.Cb=function(){new F(window.location.href);return x?y.g.L()+xa:y.g.B()+"&"+xa};y.g.yb=function(a){new F(window.location.href);return x?y.g.L()+wa+"&"+a:y.g.B()+"&"+wa+"&"+a};
y.g.zb=function(){new F(window.location.href);return x?y.g.L()+za+"&undefined":y.g.B()+"&"+za+"&undefined"};y.g.xb=function(){new F(window.location.href);return x?y.g.L()+ua+"&undefined":y.g.B()+"&"+ua+"&undefined"};y.g.ta=function(a,b){var c=void 0!==a?"&objectid="+a:void 0!==b?"&"+b:"";new F(window.location.href);return x?y.g.L()+ya+"&"+c:y.g.B()+"&"+ya+c};y.g.Db=function(a){new F(window.location.href);return x?y.g.L()+Ba+"&objectid="+a:y.g.B()+"&"+Ba+"&objectid="+a};y.g.Sa=function(){return y.g.B()};var wc;a:{var xc=k.navigator;if(xc){var yc=xc.userAgent;if(yc){wc=yc;break a}}wc=""}function H(a){return-1!=wc.indexOf(a)};var zc=H("Opera")||H("OPR"),I=H("Trident")||H("MSIE"),Ac=H("Edge"),Bc=H("Gecko")&&!(-1!=wc.toLowerCase().indexOf("webkit")&&!H("Edge"))&&!(H("Trident")||H("MSIE"))&&!H("Edge"),J=-1!=wc.toLowerCase().indexOf("webkit")&&!H("Edge");J&&H("Mobile");var Cc=H("Macintosh");H("Windows");H("Linux")||H("CrOS");var Dc=k.navigator||null;Dc&&(Dc.appVersion||"").indexOf("X11");H("Android");!H("iPhone")||H("iPod")||H("iPad");H("iPad");
function Ec(){var a=wc;if(Bc)return/rv\:([^\);]+)(\)|;)/.exec(a);if(Ac)return/Edge\/([\d\.]+)/.exec(a);if(I)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(J)return/WebKit\/(\S+)/.exec(a)}function Fc(){var a=k.document;return a?a.documentMode:void 0}var Gc=function(){if(zc&&k.opera){var a;var b=k.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Ec())&&(a=b?b[1]:"");return I&&(b=Fc(),null!=b&&b>parseFloat(a))?String(b):a}(),Hc={};
function K(a){var b;if(!(b=Hc[a])){b=0;for(var c=ob(String(Gc)).split("."),d=ob(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||"",m=d[f]||"",r=RegExp("(\\d*)(\\D*)","g"),u=RegExp("(\\d*)(\\D*)","g");do{var v=r.exec(h)||["","",""],B=u.exec(m)||["","",""];if(0==v[0].length&&0==B[0].length)break;b=xb(0==v[1].length?0:parseInt(v[1],10),0==B[1].length?0:parseInt(B[1],10))||xb(0==v[2].length,0==B[2].length)||xb(v[2],B[2])}while(0==b)}b=Hc[a]=0<=b}return b}
var Ic=k.document,Jc=Ic&&I?Fc()||("CSS1Compat"==Ic.compatMode?parseInt(Gc,10):5):void 0;var Kc=!I||9<=Number(Jc);!Bc&&!I||I&&9<=Number(Jc)||Bc&&K("1.9.1");I&&K("9");var Lc=I||zc||J;function L(a){var b=document;return n(a)?b.getElementById(a):a}function N(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):Mc("*",a,b)}function O(a,b){var c=b||document,d=null;c.getElementsByClassName?d=c.getElementsByClassName(a)[0]:c.querySelectorAll&&c.querySelector?d=c.querySelector("."+a):d=Mc("*",a,b)[0];return d||null}
function Mc(a,b,c){var d=document;c=c||d;a=a&&"*"!=a?a.toUpperCase():"";if(c.querySelectorAll&&c.querySelector&&(a||b))return c.querySelectorAll(a+(b?"."+b:""));if(b&&c.getElementsByClassName){c=c.getElementsByClassName(b);if(a){for(var d={},e=0,f=0,h;h=c[f];f++)a==h.nodeName&&(d[e++]=h);d.length=e;return d}return c}c=c.getElementsByTagName(a||"*");if(b){d={};for(f=e=0;h=c[f];f++)a=h.className,"function"==typeof a.split&&Fb(a.split(/\s+/),b)&&(d[e++]=h);d.length=e;return d}return c}
function Nc(a,b){eb(b,function(c,b){"style"==b?a.style.cssText=c:"class"==b?a.className=c:"for"==b?a.htmlFor=c:Oc.hasOwnProperty(b)?a.setAttribute(Oc[b],c):0==b.lastIndexOf("aria-",0)||0==b.lastIndexOf("data-",0)?a.setAttribute(b,c):a[b]=c})}var Oc={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function P(a,b,c){var d=arguments,e=document,f=d[0],h=d[1];if(!Kc&&h&&(h.name||h.type)){f=["<",f];h.name&&f.push(' name="',pb(h.name),'"');if(h.type){f.push(' type="',pb(h.type),'"');var m={};lb(m,h);delete m.type;h=m}f.push(">");f=f.join("")}f=e.createElement(f);h&&(n(h)?f.className=h:ea(h)?f.className=h.join(" "):Nc(f,h));2<d.length&&Pc(e,f,d);return f}
function Pc(a,b,c){function d(c){c&&b.appendChild(n(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];!fa(f)||ha(f)&&0<f.nodeType?d(f):Bb(Qc(f)?Ib(f):f,d)}}function Q(a,b){a.appendChild(b)}function Rc(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function Sc(a){var b;if(Lc&&!(I&&K("9")&&!K("10")&&k.SVGElement&&a instanceof k.SVGElement)&&(b=a.parentElement))return b;b=a.parentNode;return ha(b)&&1==b.nodeType?b:null}function Tc(a,b){var c=[];return Uc(a,b,c,!0)?c[0]:void 0}
function Vc(a,b){var c=[];Uc(a,b,c,!1);return c}function Uc(a,b,c,d){if(null!=a)for(a=a.firstChild;a;){if(b(a)&&(c.push(a),d)||Uc(a,b,c,d))return!0;a=a.nextSibling}return!1}function Qc(a){if(a&&"number"==typeof a.length){if(ha(a))return"function"==typeof a.item||"string"==typeof a.item;if("function"==ca(a))return"function"==typeof a.item}return!1};function Wc(){proj4.defs("EPSG:3043","+proj=utm +zone=31 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs");proj4.defs("EPSG:4314","+proj=longlat +ellps=bessel +datum=potsdam +no_defs");proj4.defs("EPSG:4326","+proj=longlat +datum=WGS84 +no_defs");proj4.defs("EPSG:900913","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext +over no_defs");proj4.defs("EPSG:3857","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs")}
function Xc(a){var b=a.hasOwnProperty("polygon")&&0<a.polygon.length?new ol.geom.Polygon([a.polygon]):void 0;void 0!==b&&b.transform(a.source,w.projection);return new ol.Feature({geometry:b})}function Yc(){var a=L("transformation-chooser");return"tps"===a.value.toLowerCase()?"tps":"polynom"===a.value.toLowerCase()?"polynom":"affine"}function Zc(){var a=L("projection-chooser");return null!==a&&void 0!==a?a.value:"EPSG:4314"};var $c=!I||9<=Number(Jc),ad=I&&!K("9");!J||K("528");Bc&&K("1.9b")||I&&K("8")||zc&&K("9.5")||J&&K("528");Bc&&!K("8")||I&&K("9");function bd(a,b){A.call(this,a?a.type:"");this.currentTarget=this.target=null;this.keyCode=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.h=this.l=this.a=this.i=!1;this.P=this.state=null;if(a){this.type=a.type;var c=a.changedTouches?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d&&Bc)try{mb(d.nodeName)}catch(e){}null===c?(this.offsetX=J||void 0!==a.offsetX?a.offsetX:a.layerX,this.offsetY=J||void 0!==a.offsetY?a.offsetY:a.layerY,
this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY):(this.clientX=void 0!==c.clientX?c.clientX:c.pageX,this.clientY=void 0!==c.clientY?c.clientY:c.pageY);this.keyCode=a.keyCode||0;this.i=a.ctrlKey;this.a=a.altKey;this.l=a.shiftKey;this.h=a.metaKey;this.state=a.state;this.P=a;a.defaultPrevented&&this.preventDefault()}}t(bd,A);
bd.prototype.stopPropagation=function(){bd.ma.stopPropagation.call(this);this.P.stopPropagation?this.P.stopPropagation():this.P.cancelBubble=!0};bd.prototype.preventDefault=function(){bd.ma.preventDefault.call(this);var a=this.P;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,ad)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var cd="closure_lm_"+(1E6*Math.random()|0),dd={},ed=0;function R(a,b,c,d,e){if(ea(b)){for(var f=0;f<b.length;f++)R(a,b[f],c,d,e);return null}c=fd(c);return a&&a[Ra]?a.G.add(String(b),c,!1,d,e):gd(a,b,c,!1,d,e)}
function gd(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var h=!!e,m=hd(a);m||(a[cd]=m=new Tb(a));c=m.add(b,c,d,e,f);if(c.a)return c;d=id();c.a=d;d.src=a;d.listener=c;if(a.addEventListener)a.addEventListener(b.toString(),d,h);else if(a.attachEvent)a.attachEvent(jd(b.toString()),d);else throw Error("addEventListener and attachEvent are unavailable.");ed++;return c}
function id(){var a=kd,b=$c?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function S(a,b,c,d,e){if(ea(b))for(var f=0;f<b.length;f++)S(a,b[f],c,d,e);else c=fd(c),a&&a[Ra]?a.G.add(String(b),c,!0,d,e):gd(a,b,c,!0,d,e)}function ld(a,b,c,d,e){if(ea(b))for(var f=0;f<b.length;f++)ld(a,b[f],c,d,e);else c=fd(c),a&&a[Ra]?a.G.remove(String(b),c,d,e):a&&(a=hd(a))&&(b=a.Da(b,c,!!d,e))&&md(b)}
function md(a){if(!ga(a)&&a&&!a.ca){var b=a.src;if(b&&b[Ra])Vb(b.G,a);else{var c=a.type,d=a.a;b.removeEventListener?b.removeEventListener(c,d,a.ga):b.detachEvent&&b.detachEvent(jd(c),d);ed--;(c=hd(b))?(Vb(c,a),0==c.b&&(c.src=null,b[cd]=null)):Va(a)}}}function jd(a){return a in dd?dd[a]:dd[a]="on"+a}function nd(a,b,c,d){var e=!0;if(a=hd(a))if(b=a.a[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.ga==c&&!f.ca&&(f=od(f,d),e=e&&!1!==f)}return e}
function od(a,b){var c=a.listener,d=a.Z||a.src;a.qa&&md(a);return c.call(d,b)}
function kd(a,b){if(a.ca)return!0;if(!$c){var c;if(!(c=b))a:{c=["window","event"];for(var d=k,e;e=c.shift();)if(null!=d[e])d=d[e];else{c=null;break a}c=d}e=c;c=new bd(e,this);d=!0;if(!(0>e.keyCode||void 0!=e.returnValue)){a:{var f=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(h){f=!0}if(f||void 0==e.returnValue)e.returnValue=!0}e=[];for(f=c.currentTarget;f;f=f.parentNode)e.push(f);for(var f=a.type,m=e.length-1;!c.b&&0<=m;m--){c.currentTarget=e[m];var r=nd(e[m],f,!0,c),d=d&&r}for(m=0;!c.b&&m<e.length;m++)c.currentTarget=
e[m],r=nd(e[m],f,!1,c),d=d&&r}return d}return od(a,new bd(b,this))}function hd(a){a=a[cd];return a instanceof Tb?a:null}var pd="__closure_events_fn_"+(1E9*Math.random()>>>0);function fd(a){if("function"==ca(a))return a;a[pd]||(a[pd]=function(b){return a.handleEvent(b)});return a[pd]};function qd(a){function b(){if(y.A()){var a=y.S(),c=a.getCesiumScene(),b=c.camera,d=olcs.core.pickBottomPoint(c),e=Cesium.Matrix4.fromTranslation(d),c=olcs.core.computeAngleToZenith(c,d);a.getEnabled()&&olcs.core.rotateAroundAxis(b,-c,b.right,e,{callback:function(){a.setEnabled(!1);var c=a.getOlMap().getView(),b=c.getResolution(),d=c.getRotation();c.setResolution(c.constrainResolution(b));c.setRotation(c.constrainRotation(d))}})}}function c(){if(y.A()){var a=y.S(),c=a.getCesiumScene(),b=c.camera,
d=olcs.core.pickBottomPoint(c),c=Cesium.Math.toRadians(50),d=Cesium.Matrix4.fromTranslation(d);a.setEnabled(!0);olcs.core.rotateAroundAxis(b,-c,b.right,d,{duration:500})}}a=a||{};this.a=document.createElement("a");this.a.href="#flip-view-mode";this.a.className=y.A()&&y.S().getEnabled()?"ol-has-tooltip three-d":"ol-has-tooltip two-d";rd(this,y.A()&&y.S().getEnabled()?"2D":"3D");var d=P("div",{"class":"info-message",innerHTML:y.c("flipviewmode-zoomin")}),e=document.createElement("div");e.className=
"flip-view-mode ol-unselectable";e.appendChild(this.a);e.appendChild(d);var f=p(function(a){a.preventDefault();Pb(this.a,"flip-mode-3d")?(sd(this,"2d"),b()):3>this.getMap().getView().getZoom()?(Qb(d,"open"),setTimeout(function(){Rb(d,"open")},4E3)):(sd(this,"3d"),c())},this);R(this.a,"click",f,void 0,this);R(this.a,"touchstart",f,void 0,this);ol.control.Control.call(this,{element:e,target:a.target})}ol.inherits(qd,ol.control.Control);
function rd(a,b){a.a.innerHTML=b;var c=P("span",{role:"tooltip",innerHTML:y.c("flipviewmode-title")});a.a.appendChild(c)}function sd(a,b){"2d"===b.toLowerCase()?(Rb(a.a,"flip-mode-3d"),rd(a,"2D")):"3d"===b.toLowerCase()&&(Qb(a.a,"flip-mode-3d"),rd(a,"3D"))};function td(a){function b(a){a.preventDefault();e.getMap().getView().setRotation(0)}a=a||{};var c=document.createElement("a");c.href="#rotate-north";c.innerHTML="N";c.className="ol-has-tooltip";var d=P("span",{role:"tooltip",innerHTML:y.c("rotatenorth-title")});c.appendChild(d);var e=this;R(c,"click",b,void 0,this);R(c,"touchstart",b,void 0,this);d=document.createElement("div");d.className="rotate-north ol-unselectable";d.appendChild(c);ol.control.Control.call(this,{element:d,target:a.target})}
ol.inherits(td,ol.control.Control);function T(){Oa.call(this);this.G=new Tb(this);this.mb=this;this.Ia=null}t(T,Oa);T.prototype[Ra]=!0;g=T.prototype;g.addEventListener=function(a,b,c,d){R(this,a,b,c,d)};g.removeEventListener=function(a,b,c,d){ld(this,a,b,c,d)};
g.dispatchEvent=function(a){var b,c=this.Ia;if(c)for(b=[];c;c=c.Ia)b.push(c);var c=this.mb,d=a.type||a;if(n(a))a=new A(a,c);else if(a instanceof A)a.target=a.target||c;else{var e=a;a=new A(d,c);lb(a,e)}var e=!0,f;if(b)for(var h=b.length-1;!a.b&&0<=h;h--)f=a.currentTarget=b[h],e=ud(f,d,!0,a)&&e;a.b||(f=a.currentTarget=c,e=ud(f,d,!0,a)&&e,a.b||(e=ud(f,d,!1,a)&&e));if(b)for(h=0;!a.b&&h<b.length;h++)f=a.currentTarget=b[h],e=ud(f,d,!1,a)&&e;return e};
g.W=function(){T.ma.W.call(this);if(this.G){var a=this.G,b=0,c;for(c in a.a){for(var d=a.a[c],e=0;e<d.length;e++)++b,Va(d[e]);delete a.a[c];a.b--}}this.Ia=null};function ud(a,b,c,d){b=a.G.a[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var h=b[f];if(h&&!h.ca&&h.ga==c){var m=h.listener,r=h.Z||h.src;h.qa&&Vb(a.G,h);e=!1!==m.call(r,d)&&e}}return e&&0!=d.ib}g.Da=function(a,b,c,d){return this.G.Da(String(a),b,c,d)};
g.hasListener=function(a,b){return this.G.hasListener(l(a)?String(a):void 0,b)};var vd={AE:"maptype-ae",AK:"maptype-ak",CM:"maptype-cm",GL:"maptype-gl",MB:"maptype-mb",MTB:"maptype-mtb",TK:"maptype-tk",TKX:"maptype-tkx",ToGeoref:"georeference-false"};
function wd(a,b){this.m=n(a)?L(a):a;b||delete vd.ToGeoref;var c="",d;for(d in vd)var e=y.c("facet-"+d.toLowerCase()),c=c+('<label class="checkbox-inline" title="'+e+'"><input class="facet-search-el" type="checkbox" id="'+d+'" value="'+vd[d]+'" title="'+e+'" >'+e+"</label>");c=P("div",{"class":"search-facet",innerHTML:c});this.m.appendChild(c);R(c,"click",function(a){a=N("facet-search-el",a.currentTarget);for(var c=[],b=!0,d=0;d<a.length;d++)if(a[d].checked){var e=a[d].value.split("-")[0],v=a[d].value.split("-")[1];
"georeference"!==e&&c.push({key:e,value:v});"georeference"===e&&(b=!1)}this.dispatchEvent(new A("facet-change",{facets:c,georeference:b}))},void 0,this);T.call(this)}t(wd,T);function xd(a,b){var c=n(a)?L(a):a;this.m=P("div",{"class":"timeslider-container"});c.appendChild(this.m);void 0!==b&&yd(this,b);T.call(this)}t(xd,T);function zd(a){a.innerHTML="";var b=P("label",{innerHTML:y.c("timeslider-adjust-timeperiod")});a.appendChild(b);b=P("div",{"class":"slider-container"});a.appendChild(b);a=P("div",{"class":"slider"});b.appendChild(a);return a}
function yd(a,b){function c(a,c){c.style.left=(a-b[0])/(b[1]-b[0])*100+"%";c.innerHTML=a}var d=zd(a.m),e,f;$(d).slider({range:!0,min:b[0],max:b[1],values:[b[0],b[1]],animate:"slow",orientation:"horizontal",step:1,slide:function(a,b){var d=b.values;c(d[0],e);c(d[1],f)},change:p(function(a,b){var d=b.values;c(d[0],e);c(d[1],f);this.dispatchEvent(new A("timechange",{time:d}))},a)});e=P("div",{"class":"tooltip min-value",innerHTML:b[0]});d.appendChild(e);f=P("div",{"class":"tooltip max-value",innerHTML:b[1]});
d.appendChild(f)};function U(){this.status_=!1;T.call(this)}t(U,T);U.prototype.D=function(){};U.prototype.F=function(){};function Ad(a,b,c,d){this.a=[c,d];this.s=[new ol.interaction.Draw({source:a,type:"Point",style:function(){return[y.j.pa]}}),new ol.interaction.Draw({source:b,type:"Point",style:function(){return[y.j.pa]}})];U.call(this)}t(Ad,U);Ad.prototype.D=function(){this.J();this.status_=!0};Ad.prototype.J=function(){for(var a=0;a<this.a.length;a++)this.a[a].addInteraction(this.s[a])};Ad.prototype.F=function(){this.O();this.status_=!1};Ad.prototype.O=function(){for(var a=0;a<this.a.length;a++)this.a[a].removeInteraction(this.s[a])};function Bd(a,b,c,d){function e(a,c,b){if("point"===a.getGeometry().getType().toLowerCase()){var d=c.getSource().getFeatureById(a.getId());a=b.getSource().getFeatureById(a.getId());null!=d&&c.getSource().removeFeature(d);null!=a&&b.getSource().removeFeature(a)}}this.a=[c,d];this.s=[new ol.interaction.Select({condition:ol.events.condition.click,layer:a,style:function(){return[y.j.pa]},condition:p(function(d){"click"===d.type&&c.forEachFeatureAtPixel(d.pixel,function(c){e(c,a,b)});return!1},this)}),
new ol.interaction.Select({condition:ol.events.condition.click,layer:b,style:function(){return[y.j.pa]},condition:p(function(c){"click"===c.type&&d.forEachFeatureAtPixel(c.pixel,function(c){e(c,a,b)});return!1},this)})];U.call(this)}t(Bd,U);Bd.prototype.D=function(){this.J();this.status_=!0};Bd.prototype.J=function(){for(var a=0;a<this.a.length;a++)this.a[a].addInteraction(this.s[a])};Bd.prototype.F=function(){this.O();this.status_=!1};Bd.prototype.O=function(){for(var a=0;a<this.a.length;a++)this.a[a].removeInteraction(this.s[a])};function Cd(a,b,c,d){this.a=[c,d];a.getStyle();y.j.ka();this.s=[new ol.interaction.Modify({features:a.getSource().getFeaturesCollection(),pixelTolerance:10,style:function(){return[y.j.ka()]}}),new ol.interaction.Modify({features:b.getSource().getFeaturesCollection(),pixelTolerance:10,style:function(){return[y.j.ka()]}})];this.s[0].getMap=function(){return c};this.s[1].getMap=function(){return d};Dd(this,this.s,[a,b]);U.call(this)}t(Cd,U);Cd.prototype.D=function(){this.J();this.status_=!0};
Cd.prototype.J=function(){for(var a=0;a<this.a.length;a++)this.a[a].addInteraction(this.s[a])};Cd.prototype.F=function(){this.O();this.status_=!1};Cd.prototype.O=function(){for(var a=0;a<this.a.length;a++)this.a[a].removeInteraction(this.s[a])};
function Dd(a,b,c){function d(a,c){var b=f(c.target.getMap(),c.mapBrowserPointerEvent.pixel,a);da(b.getId())&&this.dispatchEvent(new A("deselected",{feature:b,srcStyle:y.j.ka(b.getId()),targetStyle:y.j.Ca(b.getId())}))}function e(a,c){var b=f(c.target.getMap(),c.mapBrowserPointerEvent.pixel,a);da(b.getId())&&this.dispatchEvent(new A("selected",{feature:b,srcStyle:y.j.Ca(b.getId()),targetStyle:y.j.ka(b.getId())}))}function f(a,c,b){var d;a.forEachFeatureAtPixel(c,function(a){d=a});return b.getFeatureById(d.getId())}
var h=c[0].getSource();c=c[1].getSource();b[0].on("modifystart",p(e,a,c));b[1].on("modifystart",p(e,a,h));b[0].on("modifyend",p(d,a,c));b[1].on("modifyend",p(d,a,h))}ol.Collection.prototype.addFeature=function(a){var b=!1;this.forEach(function(c){c===a&&(b=!0)});b||this.push(a)};ol.Collection.prototype.removeFeature=function(a){var b=!1;this.forEach(function(c){c===a&&(b=!0)});b&&this.remove(a)};function Ed(){T.call(this)}t(Ed,T);function Fd(a,b,c,d,e){if(!(I||Ac||J&&K("525")))return!0;if(Cc&&e)return Gd(a);if(e&&!d)return!1;ga(b)&&(b=Hd(b));if(!c&&(17==b||18==b||Cc&&91==b))return!1;if((J||Ac)&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(I&&d&&b==a)return!1;switch(a){case 13:return!0;case 27:return!(J||Ac)}return Gd(a)}
function Gd(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||(J||Ac)&&0==a)return!0;switch(a){case 32:case 43:case 63:case 64:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function Hd(a){if(Bc)a=Id(a);else if(Cc&&J)a:switch(a){case 93:a=91;break a}return a}
function Id(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}};function Jd(a,b){T.call(this);a&&(this.va&&Kd(this),this.ia=a,this.ua=R(this.ia,"keypress",this,b),this.Ea=R(this.ia,"keydown",this.a,b,this),this.va=R(this.ia,"keyup",this.b,b,this))}t(Jd,T);g=Jd.prototype;g.ia=null;g.ua=null;g.Ea=null;g.va=null;g.C=-1;g.T=-1;g.za=!1;
var Ld={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Md={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Nd=I||Ac||J&&K("525"),Od=Cc&&Bc;
Jd.prototype.a=function(a){if(J||Ac)if(17==this.C&&!a.i||18==this.C&&!a.a||Cc&&91==this.C&&!a.h)this.T=this.C=-1;-1==this.C&&(a.i&&17!=a.keyCode?this.C=17:a.a&&18!=a.keyCode?this.C=18:a.h&&91!=a.keyCode&&(this.C=91));Nd&&!Fd(a.keyCode,this.C,a.l,a.i,a.a)?this.handleEvent(a):(this.T=Hd(a.keyCode),Od&&(this.za=a.a))};Jd.prototype.b=function(a){this.T=this.C=-1;this.za=a.a};
Jd.prototype.handleEvent=function(a){var b=a.P,c,d,e=b.altKey;I&&"keypress"==a.type?c=this.T:(J||Ac)&&"keypress"==a.type?c=this.T:zc&&!J?c=this.T:(c=b.keyCode||this.T,d=b.charCode||0,Od&&(e=this.za),Cc&&63==d&&224==c&&(c=191));d=c=Hd(c);var f=b.keyIdentifier;c?63232<=c&&c in Ld?d=Ld[c]:25==c&&a.l&&(d=9):f&&f in Md&&(d=Md[f]);a=d==this.C;this.C=d;b=new Pd(d,0,a,b);b.a=e;this.dispatchEvent(b)};function Kd(a){a.ua&&(md(a.ua),md(a.Ea),md(a.va),a.ua=null,a.Ea=null,a.va=null);a.ia=null;a.C=-1;a.T=-1}
Jd.prototype.W=function(){Jd.ma.W.call(this);Kd(this)};function Pd(a,b,c,d){bd.call(this,d);this.type="key";this.keyCode=a;this.repeat=c}t(Pd,bd);function Qd(a,b,c){if(n(b))(b=Rd(a,b))&&(a.style[b]=c);else for(var d in b){c=a;var e=b[d],f=Rd(c,d);f&&(c.style[f]=e)}}var Sd={};function Rd(a,b){var c=Sd[b];if(!c){var d=yb(b),c=d;void 0===a.style[d]&&(d=(J?"Webkit":Bc?"Moz":I?"ms":zc?"O":null)+zb(d),void 0!==a.style[d]&&(c=d));Sd[b]=c}return c}function Td(a,b){var c=a.style[yb(b)];return"undefined"!==typeof c?c:a.style[Rd(a,b)]||""}
function Vd(a){var b=Wd,c;a:{c=9==a.nodeType?a:a.ownerDocument||a.document;if(c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))){c=c.display||c.getPropertyValue("display")||"";break a}c=""}if("none"!=(c||(a.currentStyle?a.currentStyle.display:null)||a.style&&a.style.display))return b(a);c=a.style;var d=c.display,e=c.visibility,f=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=f;c.visibility=e;return a}
function Wd(a){var b=a.offsetWidth,c=a.offsetHeight,d=J&&!b&&!c;if((!l(b)||d)&&a.getBoundingClientRect){var e;a:{try{e=a.getBoundingClientRect()}catch(f){e={left:0,top:0,right:0,bottom:0};break a}I&&a.ownerDocument.body&&(a=a.ownerDocument,e.left-=a.documentElement.clientLeft+a.body.clientLeft,e.top-=a.documentElement.clientTop+a.body.clientTop)}return new Xa(e.right-e.left,e.bottom-e.top)}return new Xa(b,c)};function Xd(){var a=document.body,b=P("div",{"class":"modal fade vk2-overlay-modal",id:"vk2-overlay-modal"}),c=P("div",{"class":"modal-dialog"});b.appendChild(c);var d=P("div",{"class":"modal-content"});c.appendChild(d);this.a=P("div",{"class":"modal-header"});d.appendChild(this.a);c=P("button",{"class":"close",type:"button","data-dismiss":"modal","aria-hidden":"true",innerHTML:"&times;"});this.a.appendChild(c);c=P("h4",{"class":"modal-title"});this.a.appendChild(c);c=P("div",{"class":"modal-body"});
d.appendChild(c);c=P("div",{"class":"modal-footer"});d.appendChild(c);d=P("button",{"class":"btn btn-default",type:"button","data-dismiss":"modal",innerHTML:"Close"});c.appendChild(d);this.I=b;a.appendChild(this.I);Yd(this.I)}
function Zd(a,b){for(var c=Vc(b,function(a){return"a"===a.nodeName.toLowerCase()&&a.hasAttribute("href")}),d=O("modal-content",a.I),e=0;e<c.length;e++){var f=c[e];if(!f.hasAttribute("target")||"_self"===f.getAttribute("target")){f.setAttribute("data-href",f.href);f.href="#";var h=l("map-profile")?"map-profile":f.hasAttribute("data-classname")?f.getAttribute("data-classname"):"";R(f,"click",na(function(a,c){c.preventDefault();var b=c.currentTarget.getAttribute("data-href");$d(this,{href:b,classes:a});
d.className="modal-content "+a;return!1},h),void 0,a)}}}function Yd(a){$(a).on("hidden.bs.modal",function(){O("modal-body",this).innerHTML="";O("modal-title",this.I).innerHTML="";O("modal-content",this).className="modal-content";Rc(this)})}
function $d(a,b){var c=O("modal-body",a.I);c.innerHTML="";var d=P("iframe",{frameborder:"0",name:"vk2-modal",src:b.href});d.setAttribute("webkitallowfullscreen","");d.setAttribute("mozallowfullscreen","");d.setAttribute("allowfullscreen","");l(b.width)&&Qd(d,"width",b.width);l(b.height)&&Qd(d,"height",b.height);l(b.classes)&&C(d,b.classes);c.appendChild(d)}function ae(a){l(a.I)&&$(a.I).modal("hide")}
function be(a,b,c,d){null!=b&&b?O("modal-title",a.I).innerHTML=b:a.a.style.display="none";l(c)&&(b=O("modal-content",a.I),C(b,c));l(d)&&$d(a,d);$(a.I).modal("show")}function ce(a,b){var c=O("modal-body",a.I);n(b)&&(c.innerHTML=b)};function de(a,b,c){if("function"==ca(a))c&&(a=p(a,c));else if(a&&"function"==typeof a.handleEvent)a=p(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:k.setTimeout(a,b||0)};function ee(a,b){this.ra=l(b)?b:void 0;this.m=l(a)?a:void 0;this.v=!1}function fe(a){for(var b in a)if(a.hasOwnProperty(b))for(var c=a[b],d=0;d<c.length;d++)c[d].setOpacity(0),c[d].setVisible(!0)}function ge(a,b){fe(b);({start:function(a,b,e){if(e.v){for(var f in a)break;var h=l(a[f])?a[f]:[];delete a[f];a=p(this.start,this,a,b,e);de(na(e.Nb,h,a),b,e);l(e.ra)&&(e.ra.innerHTML=l(f)?f:"");l(f)||(console.log("Visualization finished ...."),e.v=!1,l(e.m)&&D(e.m,"play"))}}}).start(b,500,a)}
function he(a,b){for(var c=a.sort(function(a,c){return a.getTime()>c.getTime()?1:a.getTime()<c.getTime()?-1:0}),d=0;d<c.length;d++)b.removeLayer(c[d]),b.addLayer(c[d]);for(var e={},d=0;d<c.length;d++)c[d].getTime()in e?e[c[d].getTime()].push(c[d]):e[c[d].getTime()]=[c[d]];return e}
ee.prototype.Nb=function(a,b){({Va:function(a,b,e,f,h){if(h.v){var m=a[0].getOpacity()+b;if(1.05>=m){for(var r=0;r<a.length;r++)a[r].setOpacity(m);de(na(this.Va,a,b,e,f,h),e,this)}else l(f)&&f()}},start:function(a,b,e,f,h){for(var m=0;m<a.length;m++)a[m].setOpacity(0),a[m].setVisible(!0);de(na(this.Va,a,b,e,f,h),e,this)}}).start(a,.1,500,b,this)};function ie(a){a.v=!1;l(a.ra)&&(a.ra.innerHTML=l(void 0)?void 0:"");l(a.m)&&D(a.m,"play")};function V(a){T.call(this);this.nb=new Zb;this.X=a||null;this.v=!1;this.U=this.a=null;this.l=this.ob=this.oa="";this.b=this.la=this.h=this.aa=!1;this.u=0;this.o=null;this.Ja=je;this.da=this.pb=!1}t(V,T);var je="",ke=/^https?$/i,le=["POST","PUT"],me=[];function W(a,b,c,d){var e=new V;me.push(e);b&&e.G.add("complete",b,!1,void 0,void 0);e.G.add("ready",e.vb,!0,void 0,void 0);ne(e,a,c,d,void 0)}g=V.prototype;g.vb=function(){z(this);Gb(me,this)};
function ne(a,b,c,d,e){if(a.a)throw Error("[goog.net.XhrIo] Object is active with another request="+a.oa+"; newUri="+b);c=c?c.toUpperCase():"GET";a.oa=b;a.l="";a.ob=c;a.aa=!1;a.v=!0;a.a=a.X?Yb(a.X):Yb(Wb);a.U=a.X?cb(a.X):cb(Wb);a.a.onreadystatechange=p(a.bb,a);try{a.la=!0,a.a.open(c,String(b),!0),a.la=!1}catch(f){oe(a,f);return}b=d||"";var h=a.nb.clone();e&&dc(e,function(a,c){h.set(c,a)});e=Db(h.getKeys());d=k.FormData&&b instanceof k.FormData;!Fb(le,c)||e||d||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");
h.forEach(function(a,c){this.a.setRequestHeader(c,a)},a);a.Ja&&(a.a.responseType=a.Ja);ib(a.a)&&(a.a.withCredentials=a.pb);try{pe(a),0<a.u&&(a.da=qe(a.a),a.da?(a.a.timeout=a.u,a.a.ontimeout=p(a.kb,a)):a.o=de(a.kb,a.u,a)),a.h=!0,a.a.send(b),a.h=!1}catch(m){oe(a,m)}}function qe(a){return I&&K(9)&&ga(a.timeout)&&l(a.ontimeout)}function Eb(a){return"content-type"==a.toLowerCase()}
g.kb=function(){"undefined"!=typeof aa&&this.a&&(this.l="Timed out after "+this.u+"ms, aborting",this.dispatchEvent("timeout"),this.a&&this.v&&(this.v=!1,this.b=!0,this.a.abort(),this.b=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),re(this)))};function oe(a,b){a.v=!1;a.a&&(a.b=!0,a.a.abort(),a.b=!1);a.l=b;se(a);re(a)}function se(a){a.aa||(a.aa=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}
g.W=function(){this.a&&(this.v&&(this.v=!1,this.b=!0,this.a.abort(),this.b=!1),re(this,!0));V.ma.W.call(this)};g.bb=function(){this.i||(this.la||this.h||this.b?te(this):this.Jb())};g.Jb=function(){te(this)};
function te(a){if(a.v&&"undefined"!=typeof aa&&(!a.U[1]||4!=ue(a)||2!=ve(a)))if(a.h&&4==ue(a))de(a.bb,0,a);else if(a.dispatchEvent("readystatechange"),4==ue(a)){a.v=!1;try{var b=ve(a),c;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:c=!0;break a;default:c=!1}var d;if(!(d=c)){var e;if(e=0===b){var f=String(a.oa).match(ec)[1]||null;if(!f&&k.self&&k.self.location)var h=k.self.location.protocol,f=h.substr(0,h.length-1);e=!ke.test(f?f.toLowerCase():"")}d=e}if(d)a.dispatchEvent("complete"),
a.dispatchEvent("success");else{var m;try{m=2<ue(a)?a.a.statusText:""}catch(r){m=""}a.l=m+" ["+ve(a)+"]";se(a)}}finally{re(a)}}}function re(a,b){if(a.a){pe(a);var c=a.a,d=a.U[0]?ba:null;a.a=null;a.U=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){}}}function pe(a){a.a&&a.da&&(a.a.ontimeout=null);ga(a.o)&&(k.clearTimeout(a.o),a.o=null)}function ue(a){return a.a?a.a.readyState:0}function ve(a){try{return 2<ue(a)?a.a.status:-1}catch(b){return-1}}
function we(a){try{return a.a?a.a.responseXML:null}catch(b){return null}}function X(a){if(a.a)return Wa(a.a.responseText)};y.Tb=function(){$(window)};y.tb=function(a,b){var c=y.c("facetedsearch-open"),d=y.c("facetedsearch-close"),e=l("facetedsearch-open")?"facetedsearch-open":"active",f=l(c)?c:"",h=l(d)?d:"";R(a,"click",function(c){c.preventDefault();E(b,e)?(D(b,e),a.title=f):(C(b,e),a.title=h)})};
y.fa=function(a){var b=Vd(L("spatialsearch-container")),c=Vd(L("layermanagement-container")),d=Vd(L("mapdiv")),c=d.width-c.width-30,b=a.getCoordinateFromPixel([0+b.width+30,d.height-25-30]);a=a.getCoordinateFromPixel([c,35]);return[b[0],b[1],a[0],a[1]]};y.Na=function(){navigator.cookieEnabled||alert("For proper working of the virtuel map forum 2.0 please activate cookies in your browser")};y.Qa=function(a){return sc(l(a)?new F(a):new F(window.location.href))};
y.Ra=function(a,b){return a=E(a,b)?a:y.Ra(Sc(a),b)};y.c=function(a){if(!l(a))return"";try{if(l(window.lang_dictionary))return window.lang_dictionary[a]}catch(b){return""}};y.Eb=function(a){return[[a[0],a[1]],[a[0],a[3]],[a[2],a[3]],[a[2],a[1]],[a[0],a[1]]]};y.getQueryParam=function(a,b){return l(b)?y.Qa(b).get(a):y.Qa().get(a)};y.wb=function(){return ab.get("vk2-welcomepage")};
y.sa=function(a,b,c,d,e){var f=new Xd;d=l(d)?d:"";e=l(e)?e:!0;var h=1==e?'<button type="button" class="btn btn-primary" id="confirm-dialog-btn-yes">'+y.c("yes")+'</button><button type="button" class="btn btn-primary"id="confirm-dialog-btn-no">'+y.c("no")+"</button>":"";be(f,a,d);ce(f,"<p>"+b+"</p><br>"+h);if(1==e){var m=l(c)?c:function(){};R(L("confirm-dialog-btn-yes"),"click",function(){m();ae(f)});R(L("confirm-dialog-btn-no"),"click",function(){ae(f)})}};y.S=function(){if(y.A())return window.ol3d};
y.Wb=function(){return l(ab.get("auth_tkt"))?!0:!1};y.A=function(){return Ia&&void 0!==window.ol3d};y.Ya=function(a){a=N(a,(l(void 0)?void 0:document.body).body);for(var b=0;b<a.length;b++)R(a[b],"click",function(a){a.preventDefault();try{var b=new Xd,e=this.title,f=this.getAttribute("data-classes");be(b,e,f,{href:this.href,classes:f});a.preventDefault()}catch(h){}})};y.ba=function(){y.A()&&!0===y.S().getEnabled()&&y.S().getAutoRenderLoop().restartRenderLoop()};
y.round=function(a,b){var c=l(b)?Math.pow(10,Math.ceil(b)):Math.pow(10,2);return Math.round(a*c)/c};y.Kb=function(a){a=O("ol-overlaycontainer-stopevent",L(a));for(var b=0;b<a.children.length;b++){var c=a.children[b];if(E(c.children[0],"ol-has-tooltip"))for(var c=N("ol-has-tooltip",c),d=0;d<c.length;d++)c[d].setAttribute("title",c[d].children[0].innerHTML)}};
y.Xb=function(a,b,c){var d=new V;S(d,"success",function(a){a=a.target;l(b)&&b(a);z(a)});S(d,"error",function(a){a=a.target;l(c)&&c(a)});ne(d,a)};y.jb=function(a,b){ab.set(a,b,void 0,"/")};q("vk2.utils.setCookie",y.jb);y.Yb=function(){};y.Zb=function(a,b){var c=P("div",{"class":"georef-point-container alert alert-warning",style:"display:none;"});a.appendChild(c);c.innerHTML="+"+b+" "+y.c("points");$(c).fadeIn(1E3).effect("puff",{},3E3,function(){c.innerHTML=""})};
y.Pb=function(a){return[Math.round(a[0]),Math.round(-1*a[1])]};y.Qb=function(a){return[Math.round(a[0]),Math.round(-1*a[1])]};q("vk2.app.UserHistoryApp",function(a){xe(this,L(a.target),L(a.targetPoints));$("body").scroll(function(){$(".lazy-image").lazyload()});$(".lazy-image").lazyload()});function ye(a,b,c){void 0!==a.points&&(c.innerHTML=a.points);if(void 0!==a.georef_profile){c=0;for(var d=a.georef_profile.length;c<d;c++)Q(b,ze(a.georef_profile[c]))}setTimeout(function(){$("body").scroll()},100)}
function xe(a,b,c){var d=new V;S(d,"success",function(a){a=a.target;var d=X(a);ye(d,b,c);z(a)},!1,a);S(d,"error",function(){alert("Something went wrong, while trying to fetch data from the server.")},!1,a);a=y.g.Cb();ne(d,a,"GET")}
function ze(a){var b=void 0!==a.transformed&&!0===a.transformed?Ha+"?SERVICE=WMS&VERSION=1.0.0&REQUEST=GetCapabilities&map="+a.mapid:"#",c=void 0!==a.thumbnail?a.thumbnail:"#",d=y.g.B()+"&oid="+a.mapid,d=void 0!==a.transformed&&!0===a.transformed?'<a href="'+d+'" target="_blank" class="btn btn-default">'+y.c("evaluation-showmap")+"</a>":"",e=void 0!==a.transformed&&!0===a.transformed?'<a href="'+y.g.ta(void 0,"georeferenceid="+a.georefid)+'" target="_blank" class="btn btn-default">'+y.c("evaluation-gotoprocess")+
"</a>":"",f=""!==a.isvalide?a.isvalide:"waiting",f='<span class="label '+("waiting"===f?"label-warning":"isvalide"===f?"label-success":"label-danger")+'">'+f+"</span>";return P("article",{id:a.georefid,innerHTML:'<div class="media"><a class="pull-right" href="'+b+'"><img alt="" class="lazy-image" alt="" data-original="'+c+'"></a><div class="media-body"><h3>'+a.title+"</h3><p><strong>"+y.c("georef-history-mapId")+":</strong> "+a.mapid+"</p><p><strong>Validation:</strong> "+f+'</p><p class="links">'+
d+" "+e+'</p><p class="meta">Created: '+a.georeftime+"</p></div></div>"})};q("vk2.app.WelcomePageApp",function(a){var b=void 0!==a.georefenceElClass?N(a.georefenceElClass):void 0,c=void 0!==a.overallGeorefenceElClass?N(a.overallGeorefenceElClass):void 0,d=void 0!==a.relGeoreferenceElClass?N(a.relGeoreferenceElClass):void 0,e=void 0!==a.georeferenceUserRankingElId?L(a.georeferenceUserRankingElId):void 0;$("#"+a.deactivateWelcomePageId).change(function(){var a=$(this).prop("checked")?"off":"on";y.jb("vk2-welcomepage",a)});void 0!==b&&void 0!==c&&void 0!==d&&void 0!==e&&Ae(this,
b,c,d,e)});
function Ae(a,b,c,d,e){var f=new V;S(f,"success",function(a){a=a.target;var f=X(a),r=f.georeference_map_count,u=r+f.missing_georeference_map_count,v=parseInt(r/u*100);Be(b,r);Be(c,u);for(r=0;r<d.length;r++){var u=Td(d[r],"width"),B=Td(d[r],"margin-left");void 0!==u&&""!==u&&Qd(d[r],"width",v+"%");void 0!==B&&""!==B&&(-1<B.indexOf("-")?Qd(d[r],"margin-left","-"+v+"%"):Qd(d[r],"margin-left",v+"%"))}$("head").append("<style>.vk2WelcomePageBody .vk2GeoreferenceProgressText .content:after{ left:"+v+"%; }</style>");
v=Math.min(f.pointoverview.length,3);for(r=0;r<v;r++)u=f.pointoverview[r],u=P("li",{innerHTML:"<span><b>"+(u.hasOwnProperty("username")?u.username:u.userid)+":</b> "+u.points+" "+y.c("welcome-points")+"</span>"}),e.appendChild(u);z(a)},!1,a);S(f,"error",function(){alert("Something went wrong, while trying to fetch data from the server.")},!1,a)}function Be(a,b){for(var c=0;c<a.length;c++)a[c].innerHTML=b};function Ce(a,b){function c(){var a=!1;E(e,"deactivate")?(D(e,"deactivate"),e.title=y.c("activatemap-all")):(C(e,"deactivate"),e.title=y.c("deactivatemap-all"),a=!0);for(var c=De(b),d=0;d<c.length;d++)c[d].setVisible(a);y.ba()}var d=P("div",{"class":"deactivate-map-col-control"});a.appendChild(d);var e=P("a",{href:"#",innerHTML:"D","class":"deactivate",title:y.c("deactivatemap-all")});d.appendChild(e);R(e,"click",c);R(e,"touchstart",c)};function Ee(a,b){var c=P("div",{"class":"dyn-vis-control",title:y.c("dynamicmapvis-open")}),d=P("div",{"class":"content",style:"display:none;"});c.appendChild(d);a.appendChild(c);var e=P("div",{"class":"feedback"});d.appendChild(e);e=new ee(c,e);Fe(this,d,e,b);Ge(this,c,d,e)}
function Ge(a,b,c,d){var e=P("a",{innerHTML:"o","class":"open-dyn-vis"});b.insertBefore(e,b.childNodes[0]||null);R(e,"click",function(a){a.preventDefault();$(c).slideToggle();E(a.currentTarget,"open")?(ie(d),D(a.currentTarget,"open"),a.currentTarget.parentElement.title=y.c("dynamicmapvis-open")):(C(a.currentTarget,"open"),a.currentTarget.parentElement.title=y.c("dynamicmapvis-close"))},void 0,a)}
function Fe(a,b,c,d){var e=P("div",{"class":"start-container"});b.appendChild(e);var f=P("a",{href:"#dynamic-start",title:y.c("dynamicmapvis-start"),innerHTML:"Start"});e.appendChild(f);R(f,"click",function(a){a.preventDefault();a=De(d);c.v||(c.v=!0,a=he(a,d),ge(c,a),l(c.m)&&!E(c.m,"play")&&C(c.m,"play"))},void 0,a);e=P("span",{role:"tooltip",innerHTML:y.c("dynamicmapvis-start")});f.appendChild(e);f=P("div",{"class":"stop-container"});b.appendChild(f);b=P("a",{href:"#dynamic-stop",title:y.c("dynamicmapvis-stop"),
innerHTML:"Stop"});f.appendChild(b);R(b,"click",function(a){a.preventDefault();ie(c)},void 0,a);a=P("span",{role:"tooltip",innerHTML:y.c("dynamicmapvis-stop")});b.appendChild(a)};var He={brightness:1,contrast:1,hue:0,saturation:0};
function Ie(a){function b(a){a.preventDefault();E(a.target,"active")?(D(a.target,"active"),$(h).fadeOut().removeClass("open")):(C(a.target,"active"),$(h).fadeIn().addClass("open"))}function c(a){a=a.glContext;var c=$("canvas.ol-unselectable")[0];if(void 0!==a&&null!==a){var b=a.getGL();if(r){glif.reset();for(var d in m)glif.addFilter(d,m[d]);r=!1}glif.apply(b,c);a.useProgram(void 0)}}a=a||{};var d=P("a",{"class":"ol-has-tooltip",href:"#image-manipulation",innerHTML:"I"}),e=P("span",{role:"tooltip",
innerHTML:y.c("imagemanipulation-open")}),f=P("div",{"class":"image-manipulation ol-unselectable"}),h=P("div",{"class":"slider-container",style:"display:none;"});d.appendChild(e);f.appendChild(d);f.appendChild(h);var m=jb(He),r=!1,u=!1,v=p(function(a,b,d,e,f){f=P("div",{"class":"slider "+a,title:l("opt_title")?f:"","data-type":d});var h=l(e)?e[1]:0,v=l(e)?e[2]:100,B=l(e)?e[3]:1,M=l(e)?e[0]:100,Ud=p(function(a,e){var f=e.value,B=this.getMap().getLayers().getArray()[0];u||(B.on("postcompose",c),u=!0);
"vertical"==b?(Ua.style.top=100-(f-h)/(v-h)*100+"%",Ua.innerHTML=f+"%"):(Ua.style.left=(f-h)/(v-h)*100+"%",Ua.innerHTML=f,m[d]=f,r=!0,B.changed())},this);$(f).slider({min:h,max:v,value:M,animate:"slow",orientation:b,step:B,slide:Ud,change:Ud});var Ua=P("div",{"class":"tooltip value "+a,innerHTML:l(e)?e[0]:""});f.appendChild(Ua);return f},this),e=v("slider-contrast","horizontal","contrast",[1,0,2,.01],y.c("imagemanipulation-contrast")),B=v("slider-saturation","horizontal","saturation",[0,-1,1,.01],
y.c("imagemanipulation-saturation")),M=v("slider-brightness","horizontal","brightness",[1,0,2,.1],y.c("imagemanipulation-brightness")),v=v("slider-hue","horizontal","hue",[0,-180,180,5],y.c("imagemanipulation-hue"));h.appendChild(e);h.appendChild(B);h.appendChild(M);h.appendChild(v);e=P("button",{"class":"reset-btn",title:y.c("imagemanipulation-reset"),innerHTML:"Reset"});h.appendChild(e);R(e,"click",function(){this.getMap().getLayers().getArray()[0].un("postcompose",c);u=!1;for(var a=N("slider",
h),b=0;b<a.length;b++){var d=a[b],e=d.getAttribute("data-type"),e=He[e];$(d).slider("value",e)}},void 0,this);R(d,"click",b);R(d,"touchstart",b);ol.control.Control.call(this,{element:f,target:a.target})}ol.inherits(Ie,ol.control.Control);function Je(a){a=a||{};var b=l(a.spyLayer)?a.spyLayer:new ol.layer.Tile({attribution:void 0,source:new ol.source.OSM({attribution:void 0})}),c=l(a.radius)?parseInt(a.radius,0):75,d=null,e=P("a",{"class":"ol-has-tooltip",href:"#layerspy",innerHTML:"L"}),f=P("div",{"class":"ol-layerspy ol-unselectable"}),h=P("span",{role:"tooltip",innerHTML:y.c("layerspy-title")});f.appendChild(e);e.appendChild(h);var m={fb:function(a){a.context.restore()},gb:function(a){var b=a.context;a=a.frameState.pixelRatio;b.save();
b.beginPath();d&&(b.arc(d[0]*a,d[1]*a,c*a,0,2*Math.PI),b.lineWidth=5*a,b.strokeStyle="rgba(0,0,0,0.5)",b.stroke());b.clip()},$a:function(a){d=this.getMap().getEventPixel(a.P);this.getMap().render()},ab:function(){d=null;this.getMap().render()},Wa:function(a){89===a.keyCode?(c=Math.min(c+5,150),this.getMap().render()):88===a.keyCode&&(c=Math.max(c-5,25),this.getMap().render())},Ma:function(a){a.target.getArray()[a.target.getLength()-1]!==b&&(this.getMap().removeLayer(b),this.getMap().addLayer(b))}},
r=null,u=p(function(a,b,c){this.getMap().addLayer(b);b.on("precompose",c.gb,this);b.on("postcompose",c.fb,this);R(this.getMap().getViewport(),"mousemove",c.$a,void 0,this);R(this.getMap().getViewport(),"mouseout",c.ab,void 0,this);C(a,"active");r=r||new Jd(document);R(r,"key",c.Wa,void 0,this);this.getMap().getLayers().on("add",c.Ma,this)},this),v=p(function(a,c,b){c.un("precompose",b.gb,this);c.un("postcompose",b.fb,this);ld(this.getMap().getViewport(),"mousemove",b.$a,void 0,this);ld(this.getMap().getViewport(),
"mouseout",b.ab,void 0,this);this.getMap().removeLayer(c);D(a,"active");ld(r,"key",b.Wa,void 0,this);this.getMap().getLayers().un("add",b.Ma,this)},this);R(e,"click",p(function(a){a.preventDefault();E(e,"active")?v(e,b,m):u(e,b,m)},this));ol.control.Control.call(this,{element:f,target:a.target})}ol.inherits(Je,ol.control.Control);function Ke(a){function b(a){var b=this.getMap();a=ol.proj.transform(b.getEventCoordinate(a),w.projection,"EPSG:4326");e.innerHTML="Lon: "+y.round(a[0],3)+", Lat: "+y.round(a[1],3)}a=a||{};var c=document.createElement("a");c.href="#mouse-position";c.innerHTML="M";c.className="ol-has-tooltip";var d=P("span",{role:"tooltip",innerHTML:y.c("mouseposition-title")});c.appendChild(d);var e=void 0,d=p(function(a){a.preventDefault();var c=!Pb(a.target,"active"),d=this.getMap();ol.proj.transform(d.getEventCoordinate(a),
w.projection,"EPSG:4326");Sb(a.target);if(void 0===e){var r=d.getViewport();e=P("div",{"class":"mouse-position-box",innerHTML:""});r.appendChild(e)}else e.innerHTML="";c?R(d.getViewport(),"mousemove",b,void 0,this):ld(d.getViewport(),"mousemove",b,void 0,this);b.call(this,[a]);Sb(e)},this);R(c,"click",d);R(c,"touchstart",d);d=document.createElement("div");d.className="mouse-position ol-unselectable";d.appendChild(c);ol.control.Control.call(this,{element:d,target:a.target})}ol.inherits(Ke,ol.control.Control);function Le(a,b,c){$(a).hover(function(){E(this,"hover")||(c.getSource().clear(),c.getSource().addFeature(b),C(this,"hover"),Ia&&void 0!==window.ol3d&&window.ol3d.getAutoRenderLoop().restartRenderLoop())},function(){E(this,"hover")&&(c.getSource().clear(),D(this,"hover"))})};function Y(a){this.id_=l(a.id)?a.id:void 0;this.time_=a.time;this.title_=l(a.title)?a.title:void 0;this.thumb_=l(a.thumbnail)?a.thumbnail:Ea;this.allowUseInLayerManagement=!0;for(var b=[],c=0;c<Fa.length;c++){var d=a.tms.replace("{s}",Fa[c])+"/{z}/{x}/{-y}.png";b.push(d.replace("http:",""))}c=Me(a.clip,this.id_,this.time_,this.title_);b=new ol.layer.Tile({extent:a.clip.getExtent(),source:new ol.source.XYZ({maxZoom:a.maxZoom,urls:b,crossOrigin:"*"})});c=new ol.layer.Vector({source:new ol.source.Vector({features:[c]}),
style:function(){return[y.j.sb]}});a.layers=[b,c];ol.layer.Group.call(this,a)}ol.inherits(Y,ol.layer.Group);function Me(a,b,c,d){a=new ol.Feature(a);a.setProperties({objectid:b,time:c,title:d});a.setId(b);return a}Y.prototype.getTime=function(){return this.time_};Y.prototype.Ua=function(){return this.title_};Y.prototype.Ta=function(){return this.thumb_.replace("http:","")};Y.prototype.getId=function(){return this.id_};function Z(a){this.id_=l(a.id)?a.id:void 0;this.time_=a.time;this.title_=l(a.title)?a.title:void 0;this.thumb_=l(a.thumbnail)?a.thumbnail:Ea;this.allowUseInLayerManagement=!0;for(var b=[],c=0;c<Fa.length;c++){var d=a.tms.replace("{s}",Fa[c])+"/{z}/{x}/{-y}.png";b.push(d.replace("http:",""))}a.extent=a.clip.getExtent();a.source=new ol.source.XYZ({maxZoom:a.maxZoom,urls:b,crossOrigin:"*"});ol.layer.Tile.call(this,a)}ol.inherits(Z,ol.layer.Tile);Z.prototype.getTime=function(){return this.time_};
Z.prototype.Ua=function(){return this.title_};Z.prototype.Ta=function(){return this.thumb_};Z.prototype.getId=function(){return this.id_};function Ne(a,b){var c=l(a.ha)?a.ha:void 0,d=l(a.projection)?a.projection:"EPSG:3857",e=l(a.lb)?a.lb:void 0,f=l(a.Xa)?a.Xa:void 0,h=void 0===c?void 0:c.getExtent();a.source=new ol.source.TileWMS({url:e,params:{LAYERS:f,VERSION:"1.1.1"},projection:d,extent:h});a.preload=Infinity;d=new ol.layer.Tile(a);d.set("wms_url",e);d.set("layerid",f);l(c)&&(d.on("precompose",function(a){for(var d=a.context,e=[],f=c.getCoordinates()[0],h=0;h<f.length;h++)e.push(b.getPixelFromCoordinate(f[h]));d.save();a=a.frameState.pixelRatio;
d.beginPath();d.moveTo(e[0][0]*a,e[0][1]*a);for(f=1;f<e.length;f++)d.lineTo(e[f][0]*a,e[f][1]*a);d.closePath();d.clip()}),d.on("postcompose",function(a){a.context.restore()}));return d};function Oe(a,b,c){W(y.g.zb(),function(a){200===ve(a.target)?b(a):c(a)},"POST","req="+JSON.stringify(a))}function Pe(a,b){W(y.g.xb(),b,"POST","req="+JSON.stringify(a))};function Qe(){return{query:{filtered:{filter:{bool:{must:[]}}}},sort:{}}}function Re(a){var b={geo_shape:{}};b.geo_shape.geometry={relation:"intersects",shape:{type:"polygon",coordinates:[a]}};return b}function Se(a){for(var b=[],c={bool:{should:b}},d=0;d<a.length;d++){var e=a[d],f={term:{}};f.term[e.key]=e.value.toLowerCase();b.push(f)}return c}function Te(a){var b={range:{}};b.range.time={gte:a[0],lte:a[1]};return b}
function Ue(a,b){var c=pa+"/map/_mget",d=JSON.stringify({ids:a});W(c,b,"POST",d)}function Ve(a,b){for(var c=[],d={query:{filtered:{filter:{bool:{should:c}}}}},e=0,f=b.length;e<f;e++){var h={term:{}};h.term[a]=b[e];c.push(h)}return d};q("vk2.app.GeoreferenceChooseApp",function(a){this.a=[];We(this,L(a.target),L(a.targetCount))});
function Xe(a,b){b.innerHTML="";var c=P("div",{"class":"form-group"}),d=P("input",{type:"text",id:"georeference-search",name:"georeference-search","class":"form-control",placeholder:y.c("georef-search-field")+":"}),e=P("ul");c.appendChild(d);b.appendChild(c);b.appendChild(e);var f=p(function(a){e.innerHTML="";for(var b=0,c=a.length;b<c;b++)Q(e,Ye(a[b]));setTimeout(function(){$("body").scroll()},100)},a),h;R(d,"keydown",function(a){clearTimeout(h);h=setTimeout(p(function(){for(var b=a.target.value,
c=$.extend(!0,[],this.a),d=[],e=c.length-1;0<=e;e--)0===c[e]._source.title.indexOf(b,0)&&d.push(c[e]);f(d)},this),1E3)},void 0,a);f(a.a)}function Ze(a,b,c,d){void 0!==b.hits&&void 0!==b.hits.total&&(d.innerHTML=b.hits.total);void 0!==b.hits&&void 0!==b.hits.hits&&0<b.hits.hits.length&&(a.a=b.hits.hits,Xe(a,c));$("body").scroll(function(){$(".lazy-image").lazyload()});$(".lazy-image").lazyload()}
function We(a,b,c){var d=new V;S(d,"success",function(a){a=a.target;var d=X(a);Ze(this,d,b,c);z(a)},!1,a);S(d,"error",function(){alert("Something went wrong, while trying to fetch data from the server.")},!1,a);a=pa+"/_search?size=2000";var e=Ve("georeference",[!1]);e.sort={title:{order:"asc"}};ne(d,a,"POST",JSON.stringify(e))}
function Ye(a){var b=a._source,c=a._id;a=b.maptype;var d=void 0!==b.thumb?b.thumb:"#",c=void 0!==c?y.g.ta(c):"#",e=b.time;return P("li",{id:b.id,innerHTML:'<div class="container record-container"><div class="image"><img class="lazy-image" alt="" data-original="'+d+'"></div><div class="body"><p><strong>'+b.title+"</strong></p><p>"+y.c("georef-choose-time")+": "+e+"</p><p>"+y.c("georef-choose-maptype")+": "+a+'</p></div><div class="tools"><a class="btn btn-primary" href="'+c+'" target="_top">'+y.c("georef-choose-goToGeoreference")+
"</a></div></div>"})};function $e(a){this.o=l(a.projection)?a.projection:"EPSG:900913";this.da=l(a.Hb)?a.Hb:20;this.Fa=void 0;this.l=new ol.Collection;this.U="title";this.aa="ascending";this.b=0;this.h=void 0;this.a={ea:l(a.time)?a.time[0]:1625,ya:l(a.time)?a.time[1]:1965};this.f=a.map;this.u=[];this.X=!0;this.D();T.call(this)}t($e,T);$e.prototype.D=function(){this.f.on("moveend",function(){var a=y.fa(this.f);l(this.Fa)&&ol.extent.equals(this.Fa,a)||this.xa()},this)};
function af(a,b,c){var d=[a.a.ea+"-01-01",a.a.ya+"-01-01"],e="ascending"===a.aa?"asc":"desc";if(a.X){b=y.Eb(ol.proj.transformExtent(b,c,qa));c=a.U;a=a.u;var f=[],h=Qe();f.push(Te(d));f.push(Re(b));f.push(Se(a));f.push({term:{georeference:!0}});h.query.filtered.filter.bool.must=f;h.sort[c]={order:e};return h}b=a.U;a=a.u;c=[];f=Qe();c.push(Te(d));c.push(Se(a));c.push({term:{georeference:!1}});f.query.filtered.filter.bool.must=c;f.sort[b]={order:e};return f}
$e.prototype.oa=function(a){this.dispatchEvent(new A("refresh",{features:a,totalFeatureCount:this.h}))};$e.prototype.la=function(a){this.dispatchEvent(new A("paginate",{features:a,totalFeatureCount:this.h}))};
function bf(a,b,c,d){b=af(a,b,c);c=pa+"/_search?from="+a.b+"&size="+a.da;var e=new V;S(e,"success",function(a){a=a.target;if(X(a)){var b=X(a);this.h=b.hits.total;z(a);a=Ka(b.hits.hits);this.l.extend(a);this.b+=a.length;d.call(this,a)}else console.log("Response is empty")},!1,a);ne(e,c,"POST",JSON.stringify(b))}$e.prototype.xa=function(){var a=y.fa(this.f);cf(this,a,this.o);this.Fa=Ib(a)};function cf(a,b,c){a.l.clear();a.b=0;bf(a,b,c,a.oa)};function df(a,b){this.m=n(a)?L(a):a;this.a=new $e({projection:"EPSG:900913",map:b});R(this.a,"refresh",p(this.u,this));R(this.a,"paginate",p(this.xa,this));this.h=["time","title","georeference"];this.K=new ol.layer.Vector({source:new ol.source.Vector,style:function(){return[y.j.rb]}});void 0!==y.A()&&this.K.set("altitudeMode","clampToGround");b.addLayer(this.K);b.getLayers().on("add",function(a){a=a.target.getArray()[a.target.getLength()-1];if(a instanceof Y||a instanceof Z||"click"==a.get("type"))b.removeLayer(this.K),
b.addLayer(this.K)},this);ef(this,this.m);ff(this,this.m);gf(this);hf(this);jf(this);T.call(this)}t(df,T);
function ef(a,b){var c=P("div",{"class":"mapsearch-container"});b.appendChild(c);var d=P("div",{"class":"panel panel-default searchTablePanel"});c.appendChild(d);var e=P("div",{"class":"panel-heading"});d.appendChild(e);var f=P("div",{"class":"content"});e.appendChild(f);a.l=P("div");f.appendChild(a.l);var h=P("a",{innerHTML:"o",title:y.c("facetedsearch-open")});f.appendChild(h);f=P("div",{"class":"facet-container"});e.appendChild(f);y.tb(h,c);a.o=new wd(f,!1);c=P("div",{"class":"panel-body"});d.appendChild(c);
d=P("div",{"class":"mapsearch-list"});c.appendChild(d);c=P("div",{"class":"list-header"});d.appendChild(c);for(e=0;e<a.h.length;e++)f=a.h[e],h=P("div",{"class":"inner-col "+f}),f=P("div",{"data-type":f,"class":"sort-element "+f,innerHTML:y.c("mapsearch-"+f)+' <span class="caret caret-reversed"></span>'}),h.appendChild(f),c.appendChild(h);a.b=P("ul",{id:"mapsearch-contentlist","class":"mapsearch-contentlist"});d.appendChild(a.b)}
function hf(a){l(a.b)&&R(a.b,"click",function(a){a.preventDefault();var c=y.Ra(a.P.target,"mapsearch-record"),d;this.a.l.forEach(function(a){a.get("id")==c.id&&(d=a)});this.dispatchEvent(new A("click-record",{feature:d}))},void 0,a)}
function ff(a,b){for(var c=N("sort-element",b),d=0;d<c.length;d++)R(c[d],"click",function(a){a=a.target.getAttribute("data-type");for(var b=O("sort-element "+a),c=E(b,"ascending")?"descending":"ascending",d=N("sort-element"),r=0;r<d.length;r++)D(d[r],"descending"),D(d[r],"ascending");C(b,c);this.a.U=a;this.a.aa=c;a=this.a;cf(a,y.fa(a.f),a.o)},void 0,a)}
function gf(a){var b=!1;l(a.b)&&R(a.b,"scroll",function(a){if(!b){b=!0;a=a.currentTarget;if(a.offsetHeight+a.scrollTop>=a.scrollHeight&&(a=this.a,!(a.l.getLength()>=a.h)&&(a=this.a,a.b<a.h&&500>a.b))){var d=y.fa(a.f);bf(a,d,a.o,a.la)}b=!1}},void 0,a)}function jf(a){R(a.o,"facet-change",function(a){var c=this.a;a=a.target;c.X=a.georeference;c.u=a.facets;c.xa()},void 0,a)}
function kf(a,b){for(var c=0;c<b.length;c++){var d,e=b[c];d=P("li",{"class":"mapsearch-record type "+e.get("maptype"),id:e.get("id")});var f=P("span",{"class":"data-col time",innerHTML:parseInt(e.get("time"),0)});d.appendChild(f);f=P("span",{"class":"data-col title",innerHTML:e.get("title")});d.appendChild(f);f=P("span",{"class":"data-col time",innerHTML:1});d.appendChild(f);f=P("div",{"class":"view-item"});d.appendChild(f);var h=P("a",{"class":"thumbnail",href:"#"});f.appendChild(h);var m=P("img",
{onerror:'this.onerror=null;this.src="http://www.deutschefotothek.de/images/noimage/image120.jpg"',alt:"Thumbnail Image of Map",src:e.get("thumb").replace("http:","")});h.appendChild(m);h=P("div",{"class":"overview"});f.appendChild(h);f=P("h2",{innerHTML:e.get("title")});h.appendChild(f);f=P("p",{"class":"details"});h.appendChild(f);h=P("div",{"class":"timestamp",innerHTML:y.c("timestamp")+" "+e.get("time")});f.appendChild(h);h="0"===e.get("denominator")||0===e.get("denominator")?" unknown":" 1:"+
e.get("denominator");h=P("div",{"class":"scale",innerHTML:y.c("factory-scale")+h});f.appendChild(h);e.get("georeference")||(e=P("div",{"class":"georeference",innerHTML:y.c("factory-no-georef")}),f.appendChild(e));a.b.appendChild(d);l(a.K)&&Le(d,b[c],a.K)}}df.prototype.u=function(a){lf(this,a.target.totalFeatureCount);this.b.innerHTML="";kf(this,a.target.features)};df.prototype.xa=function(a){lf(this,a.target.ac);kf(this,a.target.features)};
function lf(a,b){a.l.innerHTML=0<b?b+" "+y.c("mapsearch-found-maps"):y.c("mapsearch-found-no-maps")};function mf(a,b){this.o=b;this.l=n(a)?L(a):a;nf(this,this.l);this.b={};this.u={placename:p(function(a){this.b.hasOwnProperty(a)?of(this,this.b[a][0]):pf(this,a,p(function(a){0<a.length?of(this,a[0]):alert("The choosen placename is unknown.")},this))},this)};qf(this);rf(this);T.call(this)}t(mf,T);
function nf(a,b){var c=P("div",{"class":"gazetteersearch-container"});b.appendChild(c);var d=P("div",{"class":"form-group"});c.appendChild(d);a.a=P("input",{placeholder:y.c("gazetteer-placeholder"),type:"text","class":"form-control gazetteersearch-input"});d.appendChild(a.a);a.h=P("input",{value:y.c("gazetteer-submit"),type:"submit","class":"form-control gazetteersearch-submit"});d.appendChild(a.h)}
function qf(a){$(a.a).autocomplete({source:p(function(a,c){pf(this,a.term,c)},a),delay:300,minLength:3,autoFocus:!0,select:p(function(a,c){of(this,c.item)},a),open:function(){$(this).removeClass("ui-corner-all").addClass("ui-corner-top")},close:function(){$(this).removeClass("ui-corner-top").addClass("ui-corner-all")}})}function rf(a){var b=p(function(a){a=-1<a.indexOf(",")?a.split(",")[0]:a;this.u.placename(a)},a);R(a.h,"click",function(){b(this.a.value)},void 0,a)}
function pf(a,b,c){C(a.a,"loading");W(a.o+"?format=json&q="+b,p(function(a){a=a.target;var e;if(X(a))e=X(a);else try{e=a.a?a.a.responseText:""}catch(f){e=""}z(a);console.log(e);a=$.map(e,function(a){return{label:a.display_name,value:a.display_name,lonlat:{x:parseFloat(a.lon),y:parseFloat(a.lat)},type:a.type}});this.b[b]=a;c(a);E(this.a,"loading")&&D(this.a,"loading")},a),"GET")}
function of(a,b){a.dispatchEvent(new A(sf,{location_type:b.type,lonlat:[b.lonlat.x,b.lonlat.y],srs:l(void 0)?void 0:"EPSG:4326"}))}var sf="jumpto";function tf(a,b){var c=n(a)?L(a):a,d=P("div",{"class":"spatialsearch-inner-container"});c.appendChild(d);c=P("div",{"class":"spatialsearch-content-panel"});d.appendChild(c);d=P("div",{"class":"body-container"});c.appendChild(d);this.b=new mf(d,Ga);uf(this,d,b,vf(d))}
function uf(a,b,c,d){a.a=new df(b,c);R(d,"timechange",function(a){var b=this.a.a,c=a.target.time[0];a=a.target.time[1];var d=b.a.ea;if(null!=c&&ga(c)){if(c>b.a.ya)throw{name:"WrongParameterExecption",message:"Start value shouldn't be higher than the end value."};b.a.ea=c}if(null!=a&&ga(a)){if(a<b.a.ea)throw b.a.ea=d,{name:"WrongParameterExecption",message:"End value shouldn't be lower than the start value."};b.a.ya=a}b=this.a.a;cf(b,y.fa(b.f),b.o)},void 0,a)}
function vf(a){var b=pa+"/_search",c=new xd(a);W(b,function(a){a=a.target;X(a)?(a=X(a),a=[(new Date(a.aggregations.summary.min)).getUTCFullYear(),(new Date(a.aggregations.summary.max)).getUTCFullYear()]):a=[1850,1970];yd(c,a)},"POST",JSON.stringify({aggs:{summary:{stats:{field:"time"}}}}));return c};function wf(a,b,c){this.a=n(a)?L(a):a;a=P("div",{"class":"container"});this.a.appendChild(a);var d=P("div",{"class":"row-metadata"});a.appendChild(d);a=P("div",{"class":"col-md-8 col-lg-8 metdata-col"});d.appendChild(a);var e=P("div",{"class":"col-md-4 col-lg-4 thumbnail-col"});d.appendChild(e);var f=c.description,d=P("div",{"class":"description"});a.appendChild(d);f=P("h3",{innerHTML:f});d.appendChild(f);d=P("img",{"class":"thumbnail",src:c.thumb});e.appendChild(d);f=y.c("metadata-keyword");d=c.keywords;
e=xf(a);f=P("div",{"class":"label",innerHTML:f});e.appendChild(f);d=P("div",{innerHTML:d});e.appendChild(d);for(e=0;e<c["online-resources"].length;e++){var f=y.c("metadata-online-res"),d=c["online-resources"][e].url,h=xf(a),f=P("div",{"class":"label",innerHTML:f});h.appendChild(f);f=P("div");h.appendChild(f);var m=new F(d),h=!1;l(m.a.get("SERVICE"))&&"wcs"==m.a.get("SERVICE").toLowerCase()&&m.a.get("REQUEST")&&"getcoverage"==m.a.get("REQUEST").toLowerCase()&&(h=!0);ic(m,"",void 0);m=0===m.toString().indexOf("//")?
m.toString().replace("//",""):m.toString();d=h?P("a",{target:"_blank",href:d,innerHTML:m,"class":"download"}):P("a",{target:"_blank",href:d,innerHTML:m});f.appendChild(d)}c="0"===c.denominator||0===c.denominator?" unknown":" 1:"+c.denominator;d=y.c("metadata-spatial-res");e=xf(a);d=P("div",{"class":"label",innerHTML:d});e.appendChild(d);d=P("div");e.appendChild(d);e=P("label",{innerHTML:""});d.appendChild(e);c=P("span",{innerHTML:c});d.appendChild(c);b=P("span",{"class":"unique-id metadata-content-row",
innerHTML:'<div class="label">'+y.c("metadata-unqiue-id")+"</div><div>"+b+"</div>"});a.appendChild(b)}function xf(a){var b=P("div",{"class":"metadata-content-row"});a.appendChild(b);return b};function yf(a,b){this.b=n(a)?L(a):a;var c=l("vertical")&&n("vertical")?"vertical":"horizontal",d=this.b,e=P("div",{"class":"opacity-container"});d.appendChild(e);d=P("div",{"class":"slider-container opacity-slider"});e.appendChild(d);this.a=P("div",{"class":"slider"});d.appendChild(this.a);zf(this,this.a,b,c)}
function zf(a,b,c,d){function e(a,b){"vertical"==d?b.style.top=100-(a-0)/100*100+"%":b.style.left=(a-0)/100*100+"%";b.innerHTML=a+"%"}var f=100*c.getOpacity();$(b).slider({min:0,max:100,value:f,animate:"slow",orientation:d,step:1,slide:function(a,b){var d=b.value;e(d,h);c.setOpacity(d/100);y.ba()},change:p(function(a,b){var d=b.value;e(d,h);c.setOpacity(d/100);y.ba()},a)});var h=P("div",{"class":"tooltip value",innerHTML:"100%"});b.appendChild(h);c.on("change:opacity",function(){var a=100*this.getOpacity();
19<Math.abs(a-$(b).slider("value"))&&$(b).slider("value",a)})};function Af(a,b,c){var d=a.getVisible()?"visible":"notvisible",e=P("li",{"class":"layermanagement-record "+d,id:b,"data-id":a.getId()});b=P("div",{"class":"control-container"});e.appendChild(b);d=P("button",{"class":"move-layer-top minimize-tool",type:"button",title:y.c("factory-move-top"),innerHTML:y.c("factory-move-top")});b.appendChild(d);R(d,"click",function(b){c.removeLayer(a);c.addLayer(a);b.stopPropagation();y.ba()});d=P("button",{"class":"disable-layer minimize-tool",type:"button",title:y.c("factory-show-map"),
innerHTML:y.c("factory-show-map")});b.appendChild(d);R(d,"click",function(){E(e,"visible")?(Nb(e,"visible","notvisible"),a.setVisible(!1)):(Nb(e,"notvisible","visible"),a.setVisible(!0));y.ba()});d=P("button",{"class":"remove-layer minimize-tool",type:"button",title:y.c("factory-rm-map"),innerHTML:y.c("factory-rm-map")});b.appendChild(d);R(d,"click",function(b){c.removeLayer(a);b.stopPropagation();y.ba()});d=P("div",{"class":"drag-btn"});b.appendChild(d);d=P("a",{"class":"thumbnail",href:"#"});e.appendChild(d);
var f=P("img",{onerror:'this.onerror=null;this.src="http://www.deutschefotothek.de/images/noimage/image120.jpg"',alt:"Thumbnail Image of Map",src:a.Ta()});d.appendChild(f);d=P("div",{"class":"metadata-container"});e.appendChild(d);f=P("h4",{innerHTML:a.Ua()});d.appendChild(f);f=P("div",{"class":"timestamps"});d.appendChild(f);d=P("span",{"class":"timestamps-label",innerHTML:y.c("timestamp")+" "+a.getTime()});f.appendChild(d);ab.get("vk2-auth")&&(d=P("a",{"class":"georeference-update",title:y.c("factory-update-georef")+
" ...",innerHTML:y.c("factory-update-georef")+" ...",target:"_blank",href:y.g.ta(a.getId())}),b.appendChild(d));new yf(e,a);a.on("change:visible",function(){!a.getVisible()&&E(e,"visible")?Nb(e,"visible","notvisible"):a.getVisible()&&E(e,"notvisible")&&Nb(e,"notvisible","visible")});return e};function Bf(a,b,c){this.a=b;this.f=c;b=n(a)?L(a):a;a=P("div",{"class":"layermanagement-container",id:"layermanagement-container"});b.appendChild(a);b=P("div",{"class":"heading"});a.appendChild(b);c=P("span",{"class":"header-label",innerHTML:y.c("layermanagement-header-lbl")});b.appendChild(c);c=P("ul",{"class":"layermanagement-body",innerHTML:'<li class="empty">'+y.c("layermanagement-start-msg")+"</li>"});a.appendChild(c);this.b=c;new Ce(b,this.f);new Ee(b,this.f);this.J();T.call(this)}t(Bf,T);
function Cf(a){a=a.a.getArray();for(var b=[],c=0,d=a.length;c<d;c++)l(a[c].allowUseInLayerManagement)&&a[c].allowUseInLayerManagement&&b.push(a[c]);return b}function Df(a,b){for(var c=a.a.getArray(),d=0,e=c.length;d<e;d++)if(b===c[d])return d}
Bf.prototype.h=function(a){if(l(a.element.allowUseInLayerManagement)&&a.element.allowUseInLayerManagement){this.b.innerHTML="";a=Cf(this);for(var b=a.length-1;0<=b;b--){var c=Af(a[b],b,this.f);this.b.appendChild(c)}}$(this.b).sortable({revert:!0,handle:".drag-btn",stop:p(function(a,b){var c=Cf(this),h=N("layermanagement-record",this.b),m=h.length-parseInt(h[b.item.index()].id,0)-1,r=b.item.index(),u=c.length-1-r,h=parseInt(h[r].id,0);l(h)&&m!=r&&(m=c[h],r=Df(this,m),this.a.removeAt(r),c=Df(this,c[u]),
u>h?this.a.insertAt(c+1,m):this.a.insertAt(c,m))},this)})};Bf.prototype.J=function(){this.a.on("add",this.h,this);this.a.on("remove",this.h,this)};Bf.prototype.O=function(){this.a.un("add",this.h,this);this.a.un("remove",this.h,this)};Bf.prototype.getLayers=function(){return this.a.getArray()};function Ef(){T.call(this)}t(Ef,T);function Ff(){var a=sc(new F(window.location.href));return G(a,"c")||G(a,"pos")||G(a,"dataid")||G(a,"oid")?!0:!1}
function Gf(a,b){var c=sc(new F(window.location.href)),d,e;if(G(c,"c")){var f=c.get("c").split(",");d=ol.proj.transform([parseFloat(f[0],0),parseFloat(f[1],0)],"EPSG:4326",w.projection);e=void 0!==c.get("z")?parseInt(c.get("z"),0):4;if(isNaN(d[0])||isNaN(d[1]))d=ol.proj.transform([parseFloat(f[0],0),parseFloat(f[1],0)],"EPSG:3857",w.projection);Hf(b,d,e)}if(G(c,"pos")&&y.A()){var f=y.S(),h=f.getCesiumScene().camera,m=c.get("pos").split(","),m={x:parseFloat(m[0],0),y:parseFloat(m[1],0),z:parseFloat(m[2],
0)},r=void 0!==c.get("h")?parseFloat(c.get("h"),5):0,u=void 0!==c.get("p")?parseFloat(c.get("p"),10):0,v=void 0!==c.get("r")?parseFloat(c.get("r"),10):0;f.getEnabled()||f.setEnabled(!0);h.setView({destination:m,orientation:{heading:r,pitch:u,roll:v}})}var B=p(function(a,c){var f=Ka(a);if(void 0!==c)for(var h=0;h<M.length;h++)for(var m=0;m<f.length;m++)M[h]==f[m].getId()&&this.dispatchEvent(new A("addmap",{feature:f[m]}));else for(m=0;m<f.length;m++)this.dispatchEvent(new A("addmap",{feature:f[m]}));
!d&&0<f.length&&!y.A()&&(h=void 0===e?4:e,d=f[0].getGeometry().getInteriorPoint().getCoordinates(),Hf(b,d,h))},a);if(G(c,"oid")&&""!==c.get("oid")){for(var M=c.get("oid").split(","),c=0;c<M.length;c++)""==M[c]&&M.splice(c,1);Ue(M,function(a){a=a.target;var b=X(a)?X(a):void 0;z(a);void 0!==b.docs&&0<b.docs.length&&B(b.docs,M)})}else G(c,"dataid")&&""!==c.get("dataid")&&(f=pa+"/_search",c=Ve("dataid",[c.get("dataid")]),W(f,function(a){a=a.target;var b=X(a)?X(a):void 0;z(a);void 0!==b.hits&&void 0!==
b.hits.hits&&0<b.hits.hits.length&&B(b.hits.hits)},"POST",JSON.stringify(c)))}
function If(a){var b="";a.getLayers().forEach(function(a){l(a.getId)&&(b+=a.getId()+",")});var c=ol.proj.transform(a.getView().getCenter(),w.projection,"EPSG:4326"),d=a.getView().getZoom();a=Ia&&void 0!==window.ol3d?window.location.origin+"/vkviewer/main/3d/?welcomepage=off":window.location.origin+y.g.B()+"?welcomepage=off";a=new F(a);var e=a.a;y.A()&&da(O("flip-mode-3d"))?(c=y.S().getCesiumScene(),d=Cesium.Ellipsoid.WGS84.cartographicToCartesian(c.camera.positionCartographic),e.set("h",c.camera.heading),
e.set("p",c.camera.pitch),e.set("pos",d.x+","+d.y+","+d.z),e.set("r",c.camera.roll)):(e.set("z",d),e.set("c",y.round(c[0],4)+","+y.round(c[1],4)));e.set("oid",b);ic(a,e);return a.toString()};function Jf(a){a=a||{};var b=P("div",{"class":"permalink ol-unselectable"}),c=P("a",{href:"#permalink",innerHTML:"P","class":"ol-has-tooltip"});b.appendChild(c);var d=P("span",{role:"tooltip",innerHTML:y.c("permalink-title")});c.appendChild(d);var e=P("form",{id:"permaCopyBox",style:"display:none;"}),d=P("div",{"class":"permaClose"});e.appendChild(d);d=P("div",{"class":"nose"});e.appendChild(d);d=P("div",{"class":"moreDots",innerHTML:"..."});e.appendChild(d);var f=P("input",{type:"text",id:"permalinkResult",
readonly:"readonly",value:"#"});e.appendChild(f);d="MacIntel"==navigator.platform?"&#8984;":"Strg";d=P("label",{"for":"permalinkResult",innerHTML:y.c("permalink-msg")+" "+d+"+C."});e.appendChild(d);b.appendChild(e);d=p(function(a){a.preventDefault();$(e).hasClass("open")?($(e).fadeOut().removeClass("open"),$(f).blur()):(f.value=If(this.getMap()),$(e).fadeIn().addClass("open"),$(f).focus().select())},this);R(c,"click",d);R(c,"touchstart",d);ol.control.Control.call(this,{element:b,target:a.target})}
ol.inherits(Jf,ol.control.Control);function Hf(a,b,c){a.getView().setCenter(b);a.getView().setZoom(c)}function De(a){a=a.getLayers().getArray();for(var b=[],c=0;c<a.length;c++)y.A()?a[c]instanceof Z&&b.push(a[c]):a[c]instanceof Y&&b.push(a[c]);return b}
function Kf(a,b,c){b=void 0!==b?b:{projection:"EPSG:3857",center:[1528150,6630500],zoom:2};var d=[new ol.control.Attribution({collapsible:!1,collapsed:!1}),new ol.control.Zoom,new ol.control.FullScreen,new td,new ol.control.ScaleLine,new Jf,new Ke];l(c)&&!1!==c||d.push(new Je({spyLayer:new ol.layer.Tile({attribution:void 0,source:new ol.source.XYZ({urls:Ca,crossOrigin:"*",attributions:[]})})}));var e=[new ol.Attribution({html:'\u00a9 <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'})];
l(c)&&!0===c&&e.push(new ol.Attribution({html:'<a href="https://cesiumjs.org/data-and-assets/terrain/stk-world-terrain.html">\u00a9 Analytical Graphics, Inc., \u00a9 CGIAR-CSI, Produced using Copernicus data and information funded by the European Union - EU-DEM layers,  \u00a9 Commonwealth of Australia (Geoscience Australia) 2012</a>'}));this.f=new ol.Map({layers:[new ol.layer.Tile({source:new ol.source.XYZ({urls:Ca,crossOrigin:"*",attributions:e,maxZoom:18})})],renderer:"canvas",target:a,interactions:ol.interaction.defaults().extend([new ol.interaction.DragRotateAndZoom]),
controls:d,view:new ol.View(b)});if(!0===Ia&&l(c)&&!0===c){a=new olcs.OLCesium({map:this.f,sceneOptions:{terrainExaggeration:2}});a.enableAutoRenderLoop();c=a.getCesiumScene();var d=c.globe,f=c.camera;window.ol3d=a;window.minimumRetrievingLevel=8;window.imageryAvailableLevels=void 0;d.baseColor=Cesium.Color.WHITE;d.tileCacheSize="100";d.maximumScreenSpaceError=1.5;c.backgroundColor=Cesium.Color.WHITE;c.globe.depthTestAgainstTerrain=!0;c.screenSpaceCameraController.maximumZoomDistance=3E5;c.terrainProvider=
new Cesium.CesiumTerrainProvider({url:Da,requestVertexNormals:!0});c.fog.enabled=!0;c.fog.density=7.761417520450251E-5;c.fog.screenSpaceErrorFactor=50;c.scene3DOnly=!0;var h=ol.proj.transformExtent(b.extent,b.projection,"EPSG:4326").map(function(a){return a*Math.PI/180});c.postRender.addEventListener(function(){var a=f.positionCartographic.clone();if(!ol.extent.containsXY(h,a.longitude,a.latitude)){var b=.05*a.height/this.screenSpaceCameraController.maximumZoomDistance;a.longitude=Math.max(h[0]-b,
a.longitude);a.latitude=Math.max(h[1]-b,a.latitude);a.longitude=Math.min(h[2]+b,a.longitude);a.latitude=Math.min(h[3]+b,a.latitude);this.camera.setView({destination:Cesium.Ellipsoid.WGS84.cartographicToCartesian(a),orientation:{heading:this.camera.heading,pitch:this.camera.pitch}})}this.screenSpaceCameraController.minimumZoomDistance=1800<a.height?400:200},c);b=sc(new F(window.location.href));a=new qd;G(b,"pos")&&sd(a,"3d");this.f.addControl(a)}this.f.on("singleclick",function(a){var b=[];y.A()?(a=
this.f.getCoordinateFromPixel(a.pixel),b=this.N.getSource().getFeaturesAtCoordinate(a)):this.getMap().forEachFeatureAtPixel(a.pixel,function(a){b.push(a)});Lf(b)},this)}q("vk2.module.MapModule",Kf);
function Mf(a){var b=0==a.get("denominator")?15:5E3>=a.get("denominator")?17:15E3>=a.get("denominator")?16:15;return Ia&&void 0!==window.ol3d?new Z({maxZoom:b,time:a.get("time"),thumbnail:a.get("thumb"),title:a.get("title"),objectid:a.get("id"),id:a.getId(),dataid:a.get("dataid"),tms:a.get("tms"),clip:a.getGeometry().clone()}):new Y({time:a.get("time"),maxZoom:b,thumbnail:a.get("thumb"),title:a.get("title"),objectid:a.get("id"),id:a.getId(),dataid:a.get("dataid"),tms:a.get("tms"),clip:a.getGeometry().clone()})}
Kf.prototype.getMap=function(){return this.f};Kf.prototype.getMap=Kf.prototype.getMap;function Nf(a,b){R(b,"addmap",function(a){a=a.target.feature;!0===a.get("georeference")&&(this.f.addLayer(Mf(a)),y.A()&&(a=Me(a.getGeometry().clone(),a.getId(),a.get("time"),a.get("title")),this.N.getSource().addFeature(a)))},void 0,a);Gf(b,a.f)}
function Of(a,b){a.a=b.a;a.N=y.A()?new ol.layer.Vector({source:new ol.source.Vector,style:function(){return[new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.0)"})})]}}):void 0;void 0!==a.N&&(a.N.set("altitudeMode","clampToGround"),a.N.set("type","click"),a.f.getLayers().on("add",function(a){a=a.target.getArray()[a.target.getLength()-1];if(a instanceof Y||a instanceof Z)this.f.removeLayer(this.N),this.f.addLayer(this.N)},a),a.f.addLayer(a.N));R(a.a,"click-record",function(a){a=
a.target.feature;var b;a:{b=a.getId();for(var e=this.f.getLayers().getArray(),f=0;f<e.length;f++)if((e[f]instanceof Y||e[f]instanceof Z)&&e[f].getId()==b){b=!0;break a}b=!1}!b&&a.get("georeference")&&(this.f.addLayer(Mf(a)),Ia&&void 0!==window.ol3d&&(a=Me(a.getGeometry().clone(),a.getId(),a.get("time"),a.get("title")),this.N.getSource().addFeature(a)))},void 0,a);R(b.b,"jumpto",function(a){var b=a.target.lonlat;a=ol.proj.transform([parseFloat(b[0]),parseFloat(b[1])],a.target.srs,w.projection);Hf(this.f,
a,6)},void 0,a)}function Lf(a){if(0<a.length){var b=new Xd;be(b,void 0,"mapcontroller-click-modal");for(var c=P("section"),d=0;d<a.length;d++){var e=P("a",{href:y.g.Db(a[d].getId()),innerHTML:a[d].get("title")+" "+a[d].get("time"),target:"_self"});c.appendChild(e);var f=P("br");c.appendChild(f)}d=O("modal-body",b.I);ha(c)&&1==c.nodeType&&(d.appendChild(c),Zd(b,c));1==a.length&&e.click()}};q("vk2.app.PresentationApp",function(a){y.Na();var b=l(a.authenticate)&&"boolean"==typeof a.authenticate?a.authenticate:!1,c=Ff();y.Ya(l(a.modalAnchorClassName)?a.modalAnchorClassName:"vk2-modal-anchor");b||c||Pf();b=new Kf(a.mapContainerId,w,l(a.with25d)?a.with25d:void 0);c=new tf(a.spatialsearchContainerId,b.getMap());Of(b,c);new Bf(a.mapContainerId,b.getMap().getLayers(),b.getMap());c=new Ef(b.getMap());Nf(b,c);setTimeout(function(){y.Kb(a.mapContainerId)},500)});
function Pf(){var a=y.getQueryParam("welcomepage");L("welcome-page-link")&&"off"!==y.wb()&&"off"!==a&&L("welcome-page-link").click()};function Qf(a,b,c,d){var e=l(c)?"webgl":"canvas",f=l(d)?d:!1;W(b,p(function(c){200!=ve(c.target)&&alert("Something went wrong, while trying to get the process information from the server. Please try again or contact the administrator.");c=we(c.target);var d=Tc(c,function(a){return 1==a.nodeType&&"IMAGE_PROPERTIES"==a.tagName});c=parseInt(d.getAttribute("WIDTH"),0);d=parseInt(d.getAttribute("HEIGHT"),0);Rf(this,b.substring(0,b.lastIndexOf("/")+1),d,c,a,e,f)},this),"GET");T.call(this)}t(Qf,T);
function Rf(a,b,c,d,e,f,h){a.h=c;a.l=d;var m=new ol.proj.Projection({code:"ZOOMIFY",units:"pixels",extent:[0,0,d,c]});a.o=new ol.source.Zoomify({url:b,size:[d,c],crossOrigin:"*"});b=new ol.View({projection:m,center:[d/2,-c/2],zoom:1,maxZoom:9});a.b=new ol.layer.Tile({source:a.o});c=[new ol.control.FullScreen,new ol.control.Zoom];h&&c.push(new ol.control.OverviewMap({collapsed:!1,layers:[a.b]}));a.a=new ol.Map({layers:[a.b],interactions:ol.interaction.defaults().extend([new ol.interaction.DragZoom]),
controls:c,renderer:f,target:e,view:b});a.a.addControl(new ol.control.ZoomToExtent({extent:b.calculateExtent(a.a.getSize())}));a.dispatchEvent(new A("loadend",{}))}Qf.prototype.getMap=function(){return this.a};Qf.prototype.getHeight=function(){return parseInt(this.h,0)};Qf.prototype.getWidth=function(){return parseInt(this.l,0)};q("vk2.app.MapProfileApp",function(a){var b=y.getQueryParam("objectid");null!=b?W(pa+"/map/"+b,p(function(b){if(b=X(b.target))b=Ja(b._id,b._source),Sf(b,a)},this)):console.log("Could not identify objectid.")});
function Sf(a,b){var c=a.getProperties(),d=c.zoomify.replace("http:","");L(b.titleshortId).innerHTML=c.title;L(b.titlelongId).innerHTML=c.titlelong;L(b.linkToFotothekId).href=c.plink;if(ol.has.WEBGL)e=new Qf(b.zoomifyContainer,d,!0),new wf(b.metadataContainer,a.getId(),c),R(e,"loadend",function(){e.getMap().addControl(new Ie)});else{var e=new Qf(b.zoomifyContainer,d);new wf(b.metadataContainer,a.getId(),c)}};function Tf(a,b,c,d){var e=P("div",{"class":"vk2GeorefToolsBtn btn btn-default btn-submit deactivate",innerHTML:'<span class="glyphicon glyphicon-refresh"></span> '+y.c("georef-confirm")});L(a).appendChild(e);R(e,"click",p(this.a,this,b,c,d));T.call(this)}t(Tf,T);
Tf.prototype.a=function(a,b,c){this.dispatchEvent(new A("start-confirm",{}));var d=Zc(),e=Uf(b,d);c=0<c.getFeatures().length?c.getFeatures()[0].getGeometry().clone().transform(w.projection,d):void 0;var f=b.getType();if(4>e.gcps.length)alert("You have to place at least 4 ground control points");else{var h={georeference:e,id:a,type:f};void 0!==c&&(h.clip={source:d,polygon:c.getCoordinates()[0]});"update"===f&&(a=l(b.eb)?b.eb:void 0,h.overwrites=a);var m=p(function(a){a=X(a.target);this.dispatchEvent(new A("end-confirm",
{data:a}))},this);p(function(){this.dispatchEvent(new A("error",{error:"Something went wrong, while sending confirmation data from the server."}))},this);h.hasOwnProperty("clip")?Pe(h,m):y.sa(y.c("georef-confirm-clip-title"),y.c("georef-confirm-clip-msg"),function(){Pe(h,m)},"georeference-confirm-without-clip")}};function Vf(a,b,c){var d=P("div",{"class":"vk2GeorefToolsBtn btn btn-default btn-validate",innerHTML:'<span class="glyphicon glyphicon-refresh"></span> '+y.c("georef-validate")});L(a).appendChild(d);R(d,"click",p(this.a,this,b,c));T.call(this)}t(Vf,T);
Vf.prototype.a=function(a,b){var c={georeference:Wf(b,Yc(),Zc()),id:a};if(4>c.georeference.gcps.length)y.sa("Info",y.c("georef-confirm-warn-gcp"),function(){},"georef-validation-dialog",!1);else{this.dispatchEvent(new A("start-warping",{}));var d=p(function(a){a=X(a.target);this.dispatchEvent(new A("end-warping",{data:a,georefParams:c}))},this),e=p(function(){this.dispatchEvent(new A("error",{error:"Something went wrong, while fetching validation data from the server."}))},this);Oe(c,d,e)}};function Xf(a){this.a=l(a.ja)&&ha(a.ja)?l(a.ja["new"])?jb(a.ja["new"]):jb(a.ja):{source:"pixel",target:"EPSG:4314"};this.eb=l(a.cb)?a.cb:void 0;this.h=l(a.$b)?a.hb:{source:"pixel",target:"EPSG:900913"};this.b=a.sources;this.o=l(a.type)?"update"===a.type?!0:!1:!1;this.l=new La;this.J();T.call(this)}t(Xf,T);
Xf.prototype.J=function(){Yf(this,this.b);if(this.a.hasOwnProperty("gcps"))for(var a=this.a,b=this.b,c=this.h,d=0;d<a.gcps.length;d++){var e=a.gcps[d],f=y.Qb(e.source),f=new ol.Feature(new ol.geom.Point(f)),e=ol.proj.transform(e.target,a.target,c.target),e=new ol.Feature(new ol.geom.Point(e));b[0].addFeature(f);b[1].addFeature(e)}};
function Yf(a,b){function c(a){var c=b[0].getFeatureById(a),h=b[1].getFeatureById(a);if(null!=c&&null!=h){c.setProperties({Lb:!0});h.setProperties({Lb:!0});var m=y.j.Ca();m.getText().setText(""+a);c.setStyle(m);h.setStyle(m);d.a=!1;d.b=!1}}var d=a.l;b[0].on("addfeature",function(a){if(!1===d.a){var b=Ma(d);a=a.feature;d.a=!0;a.setId(b);a.setStyle(y.j.La);d.a&&d.b&&c(b)}else alert("Please add source to other map!"),this.removeFeature(a.feature)});b[0].on("removefeature",function(a){a=a.feature.getId();
var c=void 0!==a?b[0].getFeatureById(a):void 0;null===(void 0!==a?b[1].getFeatureById(a):void 0)&null===c&&d.a&&(d.a=!1)});b[1].on("removefeature",function(a){a=a.feature.getId();var c=void 0!==a?b[0].getFeatureById(a):void 0;null===(void 0!==a?b[1].getFeatureById(a):void 0)&null===c&&d.b&&(d.b=!1)});b[1].on("addfeature",function(a){if(!1===d.b){var b=Ma(d);a=a.feature;d.b=!0;a.setId(b);a.setStyle(y.j.La);d.a&&d.b&&c(b)}else alert("Please add source to other map!"),this.removeFeature(a.feature)})}
function Wf(a,b,c){b=l(b)?b:"affine";a=Zf(a,l(c)?c:void 0);a.algorithm=b;return a}
function Zf(a,b){var c=p(function(a,b){for(var c=[],d=0;d<a.length;d++){var e=y.Pb(a[d][0].getGeometry().getCoordinates()),v=ol.proj.transform(a[d][1].getGeometry().getCoordinates(),this.h.target,b);c.push({source:e,target:v})}return c},a),d=jb(a.a),e=l(b)?b:d.target;d.gcps=c(function(a){for(var b=[],c=0;c<a[0].getFeatures().length;c++){var d=a[0].getFeatures()[c],e;da(d.getId())&&(e=a[1].getFeatureById(d.getId()));null!=d&&null!=e&&b.push([d,e])}return b}(a.b),e);d.target=e;return d}
function Uf(a,b){var c=Yc(),c=l(c)?c:"affine",d=jb(a.a),e=Wf(a,c,l(b)?b:d.target);Wf(a,c,d.target);return e}Xf.prototype.getType=function(){return this.o?"update":"new"};function $f(a,b){var c=b.getSource(),d;this.f=a;this.s=[new ol.interaction.Draw({features:c.getFeaturesCollection(),type:"Polygon",style:y.j.Ka,minPoints:5,condition:function(a){a=a.coordinate;return void 0!==d&&y.round(d[0],4)===y.round(a[0],4)&&y.round(d[1],4)===y.round(a[1],4)?!1:!0},geometryFunction:function(a,b){b||(b=new ol.geom.Polygon(null));void 0!==b.getCoordinates()[0]&&2<b.getCoordinates()[0].length&&3>=b.getCoordinates()[0].length?d=b.getCoordinates()[0][b.getCoordinates()[0].length-
1]:d=void 0;b.setCoordinates(a);return b}}),new ol.interaction.Modify({features:c.getFeaturesCollection(),deleteCondition:function(a){var b=1<=c.getFeatures().length?c.getFeatures()[0].getGeometry().getCoordinates()[0]:void 0;return void 0!==b&&5<b.length&&ol.events.condition.shiftKeyOnly(a)&&ol.events.condition.singleClick(a)}})];this.s[0].on("drawstart",function(){1<=c.getFeatures().length&&this.finishDrawing()},this.s[0]);this.s[0].on("drawend",function(a){a=1<=c.getFeatures().length?c.getFeatures()[0].getGeometry():
a.feature.getGeometry();if(5>a.getCoordinates()[0].length)y.sa("Info",y.c("georef-confirm-warn-clippolygon"),function(){},"georef-validation-dialog",!1),this.finishDrawing();else{var b=a.getCoordinates(),d=b[0].length;y.round(b[0][d-2][0],4)===y.round(b[0][d-3][0],4)&&y.round(b[0][d-2][1],4)===y.round(b[0][d-3][1],4)&&(b[0].splice(d-2,1),a.setCoordinates(b))}},this.s[0]);c.getFeaturesCollection().on("add",function(){1<c.getFeatures().length?c.getFeatures().splice(1,1):this.dispatchEvent(new A("drawend",
{feature:c.getFeatures()[0]}))},this);U.call(this)}t($f,U);$f.prototype.D=function(){this.J();this.status_=!0};$f.prototype.J=function(){for(var a=0;a<this.s.length;a++)this.f.addInteraction(this.s[a])};$f.prototype.F=function(){this.O();this.status_=!1};$f.prototype.O=function(){for(var a=0;a<this.s.length;a++)this.f.removeInteraction(this.s[a])};function ag(a){this.b=n(a)?L(a):a;var b=P("div",{"class":"georef-tools-clip-container",id:"georef-tools-clip-container"});this.b.appendChild(b);bg(this,b);a=P("div",{"class":"georef-tools-clip-inner-container",id:"georef-tools-clip-inner-container"});b.appendChild(a);var b=[],c=cg("noneToggle","none",y.c("georef-movemap"));a.appendChild(c);b.push(c);var d=cg("drawClip","drawclip",y.c("georef-drawclip"));a.appendChild(d);b.push(d);R(c,"click",p(this.a,this,"none",b));R(d,"click",p(this.a,this,"drawclip",
b));T.call(this)}t(ag,Ed);ag.prototype.D=function(){var a=L("georef-tools-clip-handler");null!=a&&E(a,"open")||$(a).trigger("click")};function cg(a,b,c){var d=P("div",{"class":"tool"});a=P("div",{id:a,"class":"tool-move toggle-elements "+a,value:b,innerHTML:'<span class="tool-title">'+c+"</span>"});d.appendChild(a);return d}
ag.prototype.F=function(){var a=L("georef-tools-clip-handler");if(null==a||E(a,"open")){$(a).trigger("click");for(var a=N("toggle-elements"),b=0;b<a.length;b++)E(a[b],"active")&&D(a[b],"active")}};
ag.prototype.a=function(a,b){for(var c=p(function(a,b){E(a,"active")||C(a,"active");this.dispatchEvent(new A("activate-"+b,a))},this),d=p(function(a,b){E(a,"active")&&D(a,"active");this.dispatchEvent(new A("deactivate-"+b,a))},this),e=0;e<b.length;e++){var f=b[e].children[0];f.value===a?c(f,f.value):d(f,f.value)}};
function bg(a,b){var c=P("div",{"class":"georef-tools-clip-handler",id:"georef-tools-clip-handler"});b.appendChild(c);Q(c,P("span",{"class":"icon"}));$(c).click(p(function(){var a=E(c,"open")?new A("deactivate",c):new A("activate",c);this.dispatchEvent(a);$("#georef-tools-clip-inner-container").slideToggle(300,function(){$(c).toggleClass("open")})},a))};function dg(a,b,c){this.a=new ol.source.Vector({features:new ol.Collection});l(c)&&(c=Xc(c),this.a.addFeature(c));this.K=new ol.layer.Vector({source:this.a,style:y.j.Ka});this.K.setMap(b);this.b=new $f(b,this.K);eg(a,{"activate-drawclip":this.b,"deactivate-drawclip":this.b});this.wa=a}t(dg,Na);dg.prototype.i=function(a){a=Xc(a.target.clip);0===this.a.getFeatures().length&&(this.a.addFeature(a),this.K.addFeature(a))};
function eg(a,b){function c(a){if(l(a)){var c=a.type;l(c)&&b.hasOwnProperty(c)&&b[c].F()}else for(c in b)b.hasOwnProperty(c)&&b[c].F()}R(a,"activate-drawclip",function(a){c();b[a.type].D()});R(a,"deactivate-drawclip",c);R(a,"activate",function(){});R(a,"deactivate",function(){c()})};function fg(a){this.m=n(a)?L(a):a;var b=P("div",{"class":"georef-tools-gcp-container",id:"georef-tools-gcp-container"});this.m.appendChild(b);gg(this,b);a=P("div",{"class":"georef-tools-gcp-inner-container",id:"georef-tools-gcp-inner-container"});b.appendChild(a);var b=[],c=hg("noneToggle","none",y.c("georef-movemap"));a.appendChild(c);b.push(c);var d=hg("pointToggle","addgcp",y.c("georef-setgcp"));a.appendChild(d);b.push(d);var e=hg("dragToggle","draggcp",y.c("georef-movegcp"));a.appendChild(e);
b.push(e);var f=hg("deleteToggle","delgcp",y.c("georef-delgcp"));a.appendChild(f);b.push(f);R(c,"click",p(this.a,this,"none",b));R(d,"click",p(this.a,this,"addgcp",b));R(e,"click",p(this.a,this,"draggcp",b));R(f,"click",p(this.a,this,"delgcp",b));T.call(this)}t(fg,Ed);fg.prototype.D=function(){var a=L("georef-tools-gcp-handler");null!=a&&E(a,"open")||$(a).trigger("click")};
function hg(a,b,c){var d=P("div",{"class":"tool"});a=P("div",{id:a,"class":"tool-move toggle-elements "+a,value:b,innerHTML:'<span class="tool-title">'+c+"</span>"});d.appendChild(a);return d}fg.prototype.F=function(){var a=L("georef-tools-gcp-handler");if(null==a||E(a,"open")){$(a).trigger("click");for(var a=N("toggle-elements"),b=0;b<a.length;b++)E(a[b],"active")&&D(a[b],"active")}};
fg.prototype.a=function(a,b){for(var c=p(function(a,b){E(a,"active")||C(a,"active");this.dispatchEvent(new A("activate-"+b,a))},this),d=p(function(a,b){E(a,"active")&&D(a,"active");this.dispatchEvent(new A("deactivate-"+b,a))},this),e=0;e<b.length;e++){var f=b[e].children[0];f.value===a?c(f,f.value):d(f,f.value)}};
function gg(a,b){var c=P("div",{"class":"georef-tools-gcp-handler",id:"georef-tools-gcp-handler"});b.appendChild(c);Q(c,P("span",{"class":"icon"}));$(c).click(p(function(){var a=E(c,"open")?new A("deactivate",c):new A("activate",c);this.dispatchEvent(a);$("#georef-tools-gcp-inner-container").slideToggle(300,function(){$(c).toggleClass("open")})},a))};function ig(a){this.a=a.Z;var b=a.Ob,c=a.sources[0],d=a.sources[1];a={V:a.Za[0],R:a.Za[1]};var e={V:new ol.layer.Vector({source:c,style:function(){return[y.j.qb]}}),R:new ol.layer.Vector({source:d,style:function(){return[y.j.qb]}})},d=new Ad(c,d,a.V,a.R),c=new Cd(e.V,e.R,a.V,a.R),f=new Bd(e.V,e.R,a.V,a.R),d={"activate-addgcp":d,"deactivate-addgcp":d,"activate-draggcp":c,"deactivate-draggcp":c,"activate-delgcp":f,"deactivate-delgcp":f};jg(c);kg(b,a,e,d);this.wa=b}t(ig,Na);
function jg(a){function b(a){a.target.feature.setStyle(a.target.targetStyle)}R(a,"selected",b);R(a,"deselected",b)}
function kg(a,b,c,d){function e(a){f();d[a.type].D()}function f(a){if(l(a)){var b=a.type;l(b)&&d.hasOwnProperty(b)&&d[b].F()}else for(b in d)d.hasOwnProperty(b)&&d[b].F()}R(a,"activate-addgcp",e);R(a,"deactivate-addgcp",f);R(a,"activate-draggcp",e);R(a,"deactivate-draggcp",f);R(a,"activate-delgcp",e);R(a,"deactivate-delgcp",f);R(a,"activate",function(){});R(a,"deactivate",function(){f()});b.V.addLayer(c.V);b.R.addLayer(c.R)};function lg(a){var b=n(a.Ha)?L(a.Ha):a.Ha,c=n(a.Ga)?L(a.Ga):a.Ga,d=a.Ib,e=a.Fb,f=a.Mb,h=a.Rb,m=l(a.Oa)?a.Oa:void 0,r=l(a.type)?a.type:void 0,u=l(a.ha)?a.ha:void 0,v=l(a.Pa)?a.Pa:void 0,B=[new ol.source.Vector({features:new ol.Collection}),new ol.source.Vector({features:new ol.Collection})],M=l(a.hb)?M:void 0;a=a.Gb.toLowerCase();var ma={mtb:"affine",gl:"affine",ae:"affine",tk:"affine",ak:"tps"};a=void 0!==m?m.algorithm:ma.hasOwnProperty(a)?ma[a.toLowerCase()]:ma.mtb;for(var ma=$("#transformation-chooser option"),
nb=0;nb<ma.length;nb++)a.toLowerCase()===ma[nb].innerHTML.toLowerCase()&&$("#transformation-chooser").val(ma[nb].innerHTML);m=new Xf({sources:B,ja:m,type:r,cb:v,hb:M});b=new fg(b);f=new ig({Ob:b,Z:m,Za:[f.getMap(),h.getMap()],sources:B});c=new ag(c);u=new dg(c,h.getMap(),u);B=f.wa;m=u.wa;R(B,"activate",m.F);R(m,"activate",B.F);S(f.a,"add-gcp-clippolygon",u.i,void 0,u);B=new Vf(d,e,f.a);d=new Tf(d,e,f.a,u.a);mg(B,d,h,u,c);b.D()}
function mg(a,b,c,d,e){R(a,"start-warping",function(){ng(c)});R(a,"end-warping",function(a){a=a.target.data;var b=0<d.a.getFeatures().length?d.a.getFeatures()[0]:void 0,m=ol.proj.transformExtent(a.extent,Zc(),w.projection);og(c,a.wmsUrl,a.layerId,b);c.setZoom(m);pg(c);e.D()});R(a,"error",function(){alert("Something went wrong, while trying to request a validation result.");pg(c)});R(b,"end-confirm",function(){window.location.href=y.g.Sa()});R(d.b,"drawend",function(a){a=a.target.feature;if(void 0!==
c.Y){var b=c.Y.getProperties();og(c,b.wms_url,b.layerid,a)}})};function qg(a,b){Qf.call(this,a,b)}t(qg,Qf);function rg(a,b){this.b=w.projection;this.Y=void 0;this.m=L(a);var c=l(b)?b:[640161.933,5958026.134,3585834.8011505,7847377.4901306],d=new ol.layer.Tile({source:new ol.source.XYZ({urls:Ca,crossOrigin:"*",attributions:[],maxZoom:18})});this.f=new ol.Map({layers:[d],interactions:ol.interaction.defaults().extend([new ol.interaction.DragZoom]),renderer:"canvas",target:this.m,view:new ol.View({projection:this.b,center:[0,0],zoom:2}),controls:[new ol.control.FullScreen,new ol.control.Zoom,new ol.control.Attribution,
new Je({spyLayer:new ol.layer.Tile({attribution:void 0,source:new ol.source.OSM})})]});this.f.getView().fit(c,this.f.getSize());l(b)&&(this.a=new ol.control.ZoomToExtent({extent:c}),this.f.addControl(this.a));c=new mf(this.m,Ga);R(c,"jumpto",function(a){var b=this.f.getView(),c=a.target.lonlat;b.setCenter(ol.proj.transform([parseFloat(c[0]),parseFloat(c[1])],a.target.srs,this.b));b.setZoom(12)},void 0,this);O("ol-attribution").children[0].children[0].remove()}
function ng(a){if(!l(sg(a))){var b=P("div",{"class":"result-viewer-loading-panel",id:"result-viewer-loading-panel",innerHTML:'<div class="progress"><div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="100"aria-valuemin="0" aria-valuemax="100" style="width: 100%"><span class="sr-only">100% Complete</span></div></div>'});a.m.appendChild(b)}}function pg(a){a=sg(a);l(a)&&Rc(a)}
function og(a,b,c,d){l(a.Y)&&a.f.removeLayer(a.Y);d=void 0!==d?d.getGeometry():void 0;a.Y=Ne({lb:b,Xa:c,ha:d},a.f);a.f.getLayers().insertAt(1,a.Y);L("opacity-slider-container")&&(L("opacity-slider-container").innerHTML="",new yf(L("opacity-slider-container"),a.Y))}rg.prototype.getMap=function(){return this.f};function sg(a){for(var b=0;b<a.m.children.length;b++)if("result-viewer-loading-panel"===a.m.children[b].id)return a.m.children[b]}
rg.prototype.setZoom=function(a){void 0!==a&&(a=void 0===a?this.f.getView().calculateExtent(this.f.getSize()):a,this.f.removeControl(this.a),this.a=new ol.control.ZoomToExtent({extent:a}),this.f.addControl(this.a),this.f.getView().fit(a,this.f.getSize()))};q("vk2.app.AdminEvaluationApp",function(a){if(!a.hasOwnProperty("process_list")||!a.hasOwnProperty("map_container"))throw"Missing parameter in the vk2.app.AdminEvaluationApp settings. Please check the documentation.";var b=a.map_container;Wc();this.na=new rg(b);a.hasOwnProperty("btn_getallprocess")&&tg(this,a.btn_getallprocess,a.process_list);a.hasOwnProperty("btn_getallinvalideprocess")&&tg(this,a.btn_getallinvalideprocess,a.process_list,"validation=invalide");a.hasOwnProperty("btn_getsingleprocess_mapid")&&
ug(this,a.btn_getsingleprocess_mapid,a.process_list);a.hasOwnProperty("btn_getsingleprocess_userid")&&vg(this,a.btn_getsingleprocess_userid,a.process_list)});function tg(a,b,c,d){R(L(b),"click",function(){var a=new V;S(a,"success",function(a){a=a.target;wg(this,c,X(a));z(a)},!1,this);S(a,"error",function(){alert("Something went wrong, while trying to fetch data from the server.")},!1,this);var b=y.g.Ba(l(d)?d:void 0);ne(a,b,"GET")},void 0,a)}
function ug(a,b,c){R(L(b),"click",function(a){a=a.currentTarget.getAttribute("data-src");var b=L(a).value;a=new V;S(a,"success",function(a){a=a.target;wg(this,c,X(a));z(a)},!1,this);b=y.g.Ba("mapid="+b);ne(a,b,"GET")},void 0,a)}
function vg(a,b,c){R(L(b),"click",function(a){a=a.currentTarget.getAttribute("data-src");var b=L(a).value;a=new V;S(a,"success",function(a){a=a.target;wg(this,c,X(a));z(a)},!1,this);S(a,"error",function(){alert("Something went wrong, while trying to fetch data from the server.")},!1,this);b=y.g.Ba("userid="+b);ne(a,b,"GET")},void 0,a)}
function xg(a,b){function c(a,b,c){return P("p",{innerHTML:"<strong>"+a+'</strong> <span class="'+(void 0!==c?c:"")+'">'+b+"</span>"})}var d=P("article",{id:b.georef_id,"class":"panel "+("invalide"===b.adminvalidation?"panel-danger":"isvalide"===b.adminvalidation?"panel-success":"panel-warning")+" record"}),e=P("div",{"class":"panel-heading",innerHTML:"<h3>"+b.title+' <span class="label label-default">'+b.type+'</span> <span class="right">'+b.georef_id+"</span></h3>"});d.appendChild(e);var f=P("button",
{"data-params-georef":JSON.stringify(b.georef_params),"data-params-id":parseInt(b.oai.split("-")[2]),"class":"btn btn-default btn-show-georef",innerHTML:"Vorschau anzeigen ..."});void 0!==b.clippolygon&&f.setAttribute("data-params-clip",JSON.stringify(b.clippolygon));yg(a,f);e.appendChild(f);Q(e,P("a",{href:y.g.ta(void 0,"georeferenceid="+b.georef_id),"class":"btn btn-default action-btn",target:"_blank",innerHTML:"Georeferenzierung anzeigen ..."}));var e=P("div",{"class":"panel-body"}),h=c("Georeferenzierungsparameter vom "+
b.georef_time+":","","glyphicon glyphicon-triangle-left right"),m=P("p",{"class":"georef-params",innerHTML:"Passpunkte: <br>"+JSON.stringify(b.georef_params)+"<br><br>Clip-Polygon: <br>"+JSON.stringify(b.clippolygon)});R(h,"click",function(){var a=O("glyphicon",h);Pb(m,"show")?(Rb(m,"show"),Rb(a,"glyphicon-triangle-left"),Qb(a,"glyphicon-triangle-bottom")):(Qb(m,"show"),Rb(a,"glyphicon-triangle-bottom"),Qb(a,"glyphicon-triangle-left"))});Q(e,c("Karten-OAI:",b.oai));Q(e,c("Validierung:",b.adminvalidation,
"label label-danger"));Q(e,c("Vearbeitet:",1==b.processed?"Ja":"Nein","label label-info"));Q(e,c("Nutzer:",b.userid));e.appendChild(h);e.appendChild(m);Q(e,c("Aktiv:",1==b.georef_isactive?"Ja":"Nein","label label-info"));d.appendChild(e);e=P("div",{"class":"panel-footer"});d.appendChild(e);if("isvalide"!=b.adminvalidation){var f=P("button",{"class":"btn btn-primary action-btn",innerHTML:'Setze als "isvalide" ...'}),r=y.g.Bb("georeferenceid="+b.georef_id);R(f,"click",function(){W(r,function(a){alert(X(a.target).message);
Rc(d)},"GET")});e.appendChild(f)}if("invalide"!=b.adminvalidation){var u=P("button",{"data-href":y.g.Ab("georeferenceid="+b.georef_id),"class":"btn btn-warning action-btn",innerHTML:'Setze als "invalide" ...'});R(u,"click",na(y.sa,"Ist der Georeferenzierungsprozess valide?",'Soll der Georeferenzierungsprozess auf "invalide" gesetzt werden? Bitte geben Sie einen Grund an: <br><div id="admin-validation-comment" class="input-group"><input type="radio" value="imprecision"> Ungenauigkeit <br><input type="radio" value="wrong-parameter"> Falsche Parameter <br><input type="radio" value="wrong-map-sheet-number">  False Kartennummer <br><input type="radio" value="bad-original"> Schlechte Qualit\u00e4t des Orginals<br><br><input type="text" class="form-control" placeholder="Weitere Gr\u00fcnde ..." id="confirm-comment"></div>',
function(){for(var a=Mc("input",void 0,L("admin-validation-comment")),b=void 0,c=0;c<a.length;c++)"radio"==a[c].type&&a[c].checked&&(b=a[c].value);a=l(b)?b:L("confirm-comment").value;a=u.getAttribute("data-href")+"&comment="+a;W(a,function(a){alert(X(a.target).message);Rc(d)},"GET")}));e.appendChild(u)}return d}function wg(a,b,c){b=L(b);b.innerHTML="";for(var d=0,e=c.length;d<e;d++){var f=xg(a,c[d]);b.appendChild(f)}}
function yg(a,b){R(b,"click",function(a){var b=JSON.parse(a.currentTarget.getAttribute("data-params-georef")),e=b.hasOwnProperty("new")?b["new"]:b,f=null==a.currentTarget.getAttribute("data-params-clip")||void 0==a.currentTarget.getAttribute("data-params-clip")?void 0:JSON.parse(a.currentTarget.getAttribute("data-params-clip"));a=parseInt(a.currentTarget.getAttribute("data-params-id"),0);a={georeference:e,id:a};void 0!==f&&(a.clip=f);ng(this.na);Oe(a,p(function(a){a=X(a.target);var b=ol.proj.transformExtent(a.extent,
e.target,w.projection),c=void 0!==f?Xc(f):void 0;og(this.na,a.wmsUrl,a.layerId,c);this.na.setZoom(b);pg(this.na)},this),function(){pg(this.na);alert("Something went wrong while trying to fetch a georeference validation result from server ....")})},!1,a)};function zg(a,b){y.Na();y.Ya("vk2-modal-anchor");Wc();var c=new F(window.location.href),d=c.a.get("objectid"),c=c.a.get("georeferenceid");l(c)?Ag("georeferenceid="+c,p(this.a,this,a,b)):l(d)&&Ag("objectid="+d,p(this.a,this,a,b))}q("vk2.app.GeoreferenceApp",zg);function Ag(a,b){var c=y.g.yb(a);W(c,function(a){200!=ve(a.target)&&alert("Something went wrong, while trying to get the process information from the server. Please try again or contact the administrator.");b(X(a.target))})}
zg.prototype.a=function(a,b,c){var d=c.hasOwnProperty("extent")?ol.proj.transformExtent(c.extent,va,"EPSG:3857"):void 0,e=new qg(a,c.zoomify),f=new rg(b,d);R(e,"loadend",function(){var d=c.hasOwnProperty("recommendedsrid")?"EPSG:"+c.recommendedsrid:"EPSG:4326";$("#projection-chooser").val(d);new lg({Ha:a,Ga:b,Ib:"georef-validate-menu",Fb:c.objectid,Mb:e,Rb:f,Oa:c.georeference,type:c.type,ha:c.clippolygon,Pa:c.georeferenceid,Gb:c.maptype})},void 0,this);c.hasOwnProperty("warn")&&(d=P("div",{innerHTML:c.warn+
' <a href="'+y.g.Sa()+'">'+y.c("back-to-main")+"</a>","class":"alert alert-danger warn-msg"}),L(a).appendChild(d))};}).call(window);
