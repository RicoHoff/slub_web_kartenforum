(function(){var g,aa=aa||{},k=this;function l(a){return void 0!==a}function ba(){}
function ca(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function da(a){return null!=a}function ea(a){return"array"==ca(a)}function fa(a){var b=ca(a);return"array"==b||"object"==b&&"number"==typeof a.length}function n(a){return"string"==typeof a}function ga(a){return"number"==typeof a}function ha(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var ia="closure_uid_"+(1E9*Math.random()>>>0),ja=0;function ka(a,b,c){return a.call.apply(a.bind,arguments)}
function la(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function p(a,b,c){p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ka:la;return p.apply(null,arguments)}
function ma(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var oa=Date.now||function(){return+new Date};function pa(a,b){var c=a.split("."),d=k;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&l(b)?d[e]=b:d[e]?d=d[e]:d=d[e]={}}
function q(a,b){function c(){}c.prototype=b.prototype;a.ma=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Tb=function(a,c,f){for(var h=Array(arguments.length-2),m=2;m<arguments.length;m++)h[m-2]=arguments[m];return b.prototype[c].apply(a,h)}};var qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,t,Da,Ea,Fa,Ga,Ha,u;
pa("vk2.settings.updateSettings",function(){qa=vk2x.settings.ELASTICSEARCH_NODE;ra=vk2x.settings.ELASTICSEARCH_SRS;sa=vk2x.settings.EVALUATION_GETPROCESS;ta=vk2x.settings.EVALUATION_SETISINVALIDE;ua=vk2x.settings.EVALUATION_SETISVALIDE;va=vk2x.settings.GEOREFERENCE_CONFIRM;wa=vk2x.settings.GEOREFERENCE_EXTENT_SRS;xa=vk2x.settings.GEOREFERENCE_GETPROCESS;ya=vk2x.settings.GEOREFERENCE_HISTORY;za=vk2x.settings.GEOREFERENCE_PAGE;Aa=vk2x.settings.GEOREFERENCE_VALIDATION;Ba=vk2x.settings.MAIN_PAGE;Ca=vk2x.settings.MAPPROFILE_PAGE;
t=vk2x.settings.MAPVIEW_PARAMS;Ia=vk2x.settings.MODE_3D;Da=0<vk2x.settings.OSM_URLS.length&&""!==vk2x.settings.OSM_URLS[0]?vk2x.settings.OSM_URLS:["//a.tile.openstreetmap.org/{z}/{x}/{y}.png","//b.tile.openstreetmap.org/{z}/{x}/{y}.png","//c.tile.openstreetmap.org/{z}/{x}/{y}.png"];Ea=vk2x.settings.TERRAIN_TILES_URL;Fa=vk2x.settings.THUMB_PATH;Ga=vk2x.settings.TMS_URL_SUBDOMAINS;Ha=vk2x.settings.NOMINATIM_URL;u=vk2x.settings.WITH_SPEAKING_URLS});var Ia=!1;function Ja(a,b){function c(a,c){if("polygon"===c.toLowerCase()){for(var b=[],d=0,e=a.length;d<e;d++){var x=ol.proj.transform(a[d],"EPSG:4326","EPSG:900913");Ia&&x.push(1E4);b.push(x)}return new ol.geom.Polygon([b])}}var d="clippolygon"in b?c(b.clippolygon,"polygon"):void 0,d=void 0===d&&"geometry"in b?c(b.geometry.coordinates[0],b.geometry.type):d;delete b.geometry;var d=new ol.Feature({geometry:d}),e;for(e in b)b.hasOwnProperty(e)&&("time"===e?d.set(e,b[e].split("-")[0]):d.set(e,b[e]));d.setId(a);
return d}function Ka(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(Ja(a[c]._id,a[c]._source));return b};var v={j:{}};v.j.Rb=new ol.style.Style({stroke:new ol.style.Stroke({color:"rgba(0, 0, 255, 1.0)",width:2})});v.j.qb=new ol.style.Style({stroke:new ol.style.Stroke({color:"#f00",width:1}),fill:new ol.style.Fill({color:"rgba(255,0,0,0.2)"})});v.j.rb=new ol.style.Style({stroke:new ol.style.Stroke({color:"#000000",width:2})});v.j.Ka=new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.2)"}),stroke:new ol.style.Stroke({color:"#ffcc33",width:2}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#ffcc33"})})});
v.j.Ca=function(a){var b=16*Math.PI/6,b=[0,b,b,b,b,b,b];a=l(a)?a:void 0;return new ol.style.Style({image:new ol.style.Circle({radius:8,fill:new ol.style.Fill({color:"rgba(255,255,255,0.6)"}),stroke:new ol.style.Stroke({color:"rgba(49,159,211,0.5)",width:15,lineDash:b})}),text:new ol.style.Text({textAlign:"start",textBaseline:"bottom",font:"12px Calibri,sans-serif",text:a,fill:new ol.style.Fill({color:"#aa3300"}),stroke:new ol.style.Stroke({color:"#ffffff",width:3}),offsetX:10,offsetY:-5})})};
v.j.La=new ol.style.Style({image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.6)"}),stroke:new ol.style.Stroke({color:"#29A329",width:1.5})})});v.j.pa=new ol.style.Style({image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"rgba(255,0,0,0.1)"}),stroke:new ol.style.Stroke({color:"#f00",width:1})}),zIndex:1E5});
v.j.ka=function(a){var b=22*Math.PI/6;a=l(a)?a:void 0;b=[0,b,b,b,b,b,b];return new ol.style.Style({image:new ol.style.Circle({radius:11,fill:new ol.style.Fill({color:"rgba(255,128,0,0.6)"}),stroke:new ol.style.Stroke({color:"rgba(240,0,0,0.5)",width:15,lineDash:b})}),text:new ol.style.Text({textAlign:"start",textBaseline:"bottom",font:"12px Calibri,sans-serif",text:a,fill:new ol.style.Fill({color:"#aa3300"}),stroke:new ol.style.Stroke({color:"#ffffff",width:3}),offsetX:10,offsetY:-5})})};function La(){this.b=this.a=!1;this.i=0}function Ma(a){a.a||a.b||(a.i+=1);return""+a.i};function Na(a){this.va=a};function Oa(){0!=Pa&&(Qa[this[ia]||(this[ia]=++ja)]=this);this.i=this.i;this.M=this.M}var Pa=0,Qa={};Oa.prototype.i=!1;function w(a){a.i||(a.i=!0,a.W(),0!=Pa&&(a=a[ia]||(a[ia]=++ja),delete Qa[a]))}Oa.prototype.W=function(){if(this.M)for(;this.M.length;)this.M.shift()()};function y(a,b){this.type=a;this.currentTarget=this.target=b;this.b=!1;this.ib=!0}y.prototype.stopPropagation=function(){this.b=!0};y.prototype.preventDefault=function(){this.ib=!1};var Ra="closure_listenable_"+(1E6*Math.random()|0),Sa=0;function Ua(a,b,c,d,e){this.listener=a;this.a=null;this.src=b;this.type=c;this.ga=!!d;this.Z=e;++Sa;this.ca=this.qa=!1}function Va(a){a.ca=!0;a.listener=null;a.a=null;a.src=null;a.Z=null};function Wa(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/(?:"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)[\s\u2028\u2029]*(?=:|,|]|}|$)/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);};function Xa(a,b){this.width=a;this.height=b}g=Xa.prototype;g.clone=function(){return new Xa(this.width,this.height)};g.tb=function(){return this.width*this.height};g.isEmpty=function(){return!this.tb()};g.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};g.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};g.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function Ya(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function Za(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return!0;return!1}function $a(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function ab(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function bb(a){return null!==a&&"withCredentials"in a}function cb(a){var b={},c;for(c in a)b[c]=a[c];return b}var db="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function eb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<db.length;f++)c=db[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function fb(a){this.a=a}var gb=/\s*;\s*/;g=fb.prototype;g.set=function(a,b,c,d,e,f){if(/[;=\s]/.test(a))throw Error('Invalid cookie name "'+a+'"');if(/[;\r\n]/.test(b))throw Error('Invalid cookie value "'+b+'"');l(c)||(c=-1);e=e?";domain="+e:"";d=d?";path="+d:"";f=f?";secure":"";c=0>c?"":0==c?";expires="+(new Date(1970,1,1)).toUTCString():";expires="+(new Date(oa()+1E3*c)).toUTCString();this.a.cookie=a+"="+b+e+d+c+f};
g.get=function(a,b){for(var c=a+"=",d=(this.a.cookie||"").split(gb),e=0,f;f=d[e];e++){if(0==f.lastIndexOf(c,0))return f.substr(c.length);if(f==a)return""}return b};g.remove=function(a,b,c){var d=l(this.get(a));this.set(a,"",0,b,c);return d};g.getKeys=function(){return hb(this).keys};g.H=function(){return hb(this).values};g.isEmpty=function(){return!this.a.cookie};g.za=function(){return this.a.cookie?(this.a.cookie||"").split(gb).length:0};
g.clear=function(){for(var a=hb(this).keys,b=a.length-1;0<=b;b--)this.remove(a[b])};function hb(a){a=(a.a.cookie||"").split(gb);for(var b=[],c=[],d,e,f=0;e=a[f];f++)d=e.indexOf("="),-1==d?(b.push(""),c.push(e)):(b.push(e.substring(0,d)),c.push(e.substring(d+1)));return{keys:b,values:c}}var ib=new fb(document);ib.b=3950;function jb(){}jb.prototype.a=null;function kb(a){var b;(b=a.a)||(b={},mb(a)&&(b[0]=!0,b[1]=!0),b=a.a=b);return b};function nb(a){nb[" "](a);return a}nb[" "]=ba;var ob=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};function pb(a){if(!qb.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(rb,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(sb,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(tb,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(ub,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(vb,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(wb,"&#0;"));return a}var rb=/&/g,sb=/</g,tb=/>/g,ub=/"/g,vb=/'/g,wb=/\x00/g,qb=/[\x00&<>"']/;
function xb(a,b){return a<b?-1:a>b?1:0}function yb(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})}function zb(a){var b=n(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};var Ab=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(n(a))return n(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Bb=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=n(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Cb=Array.prototype.filter?function(a,b,c){return Array.prototype.filter.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,h=n(a)?a.split(""):a,m=0;m<d;m++)if(m in h){var r=h[m];b.call(c,r,m,a)&&(e[f++]=r)}return e};function Db(a){var b;a:{b=Eb;for(var c=a.length,d=n(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:n(a)?a.charAt(b):a[b]}function Fb(a,b){return 0<=Ab(a,b)}function Gb(a,b){var c=Ab(a,b),d;(d=0<=c)&&Array.prototype.splice.call(a,c,1);return d}
function Hb(a){return Array.prototype.concat.apply(Array.prototype,arguments)}function Ib(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Jb(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)};function Kb(a){a=a.className;return n(a)&&a.match(/\S+/g)||[]}function A(a,b){var c=Kb(a);Lb(c,Jb(arguments,1));a.className=c.join(" ")}function C(a,b){var c=Kb(a),c=Mb(c,Jb(arguments,1));a.className=c.join(" ")}function Lb(a,b){for(var c=0;c<b.length;c++)Fb(a,b[c])||a.push(b[c])}function Mb(a,b){return Cb(a,function(a){return!Fb(b,a)})}function Nb(a,b,c){var d=Kb(a);n(b)?Gb(d,b):ea(b)&&(d=Mb(d,b));n(c)&&!Fb(d,c)?d.push(c):ea(c)&&Lb(d,c);a.className=d.join(" ")}
function D(a,b){return Fb(Kb(a),b)};function Ob(a){if(a.classList)return a.classList;a=a.className;return n(a)&&a.match(/\S+/g)||[]}function E(a,b){return a.classList?a.classList.contains(b):Fb(Ob(a),b)}function Pb(a,b){a.classList?a.classList.add(b):E(a,b)||(a.className+=0<a.className.length?" "+b:b)}function Qb(a,b){a.classList?a.classList.remove(b):E(a,b)&&(a.className=Cb(Ob(a),function(a){return a!=b}).join(" "))}function Rb(a){E(a,"active")?Qb(a,"active"):Pb(a,"active")};function Sb(a){this.src=a;this.a={};this.b=0}Sb.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.a[f];a||(a=this.a[f]=[],this.b++);var h=Tb(a,b,d,e);-1<h?(b=a[h],c||(b.qa=!1)):(b=new Ua(b,this.src,f,!!d,e),b.qa=c,a.push(b));return b};Sb.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.a))return!1;var e=this.a[a];b=Tb(e,b,c,d);return-1<b?(Va(e[b]),Array.prototype.splice.call(e,b,1),0==e.length&&(delete this.a[a],this.b--),!0):!1};
function Ub(a,b){var c=b.type;c in a.a&&Gb(a.a[c],b)&&(Va(b),0==a.a[c].length&&(delete a.a[c],a.b--))}Sb.prototype.Da=function(a,b,c,d){a=this.a[a.toString()];var e=-1;a&&(e=Tb(a,b,c,d));return-1<e?a[e]:null};Sb.prototype.hasListener=function(a,b){var c=l(a),d=c?a.toString():"",e=l(b);return Za(this.a,function(a){for(var h=0;h<a.length;++h)if(!(c&&a[h].type!=d||e&&a[h].ga!=b))return!0;return!1})};
function Tb(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.ca&&f.listener==b&&f.ga==!!c&&f.Z==d)return e}return-1};var Vb;function Wb(){}q(Wb,jb);function Xb(a){return(a=mb(a))?new ActiveXObject(a):new XMLHttpRequest}function mb(a){if(!a.b&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.b=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.b}Vb=new Wb;function Yb(a,b){this.f={};this.a=[];this.b=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof Yb?(c=a.getKeys(),d=a.H()):(c=ab(a),d=$a(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}g=Yb.prototype;g.za=function(){return this.b};g.H=function(){Zb(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.f[this.a[b]]);return a};g.getKeys=function(){Zb(this);return this.a.concat()};
g.equals=function(a,b){if(this===a)return!0;if(this.b!=a.za())return!1;var c=b||$b;Zb(this);for(var d,e=0;d=this.a[e];e++)if(!c(this.get(d),a.get(d)))return!1;return!0};function $b(a,b){return a===b}g.isEmpty=function(){return 0==this.b};g.clear=function(){this.f={};this.b=this.a.length=0};g.remove=function(a){return ac(this.f,a)?(delete this.f[a],this.b--,this.a.length>2*this.b&&Zb(this),!0):!1};
function Zb(a){if(a.b!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];ac(a.f,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.b!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],ac(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}g.get=function(a,b){return ac(this.f,a)?this.f[a]:b};g.set=function(a,b){ac(this.f,a)||(this.b++,this.a.push(a));this.f[a]=b};g.forEach=function(a,b){for(var c=this.getKeys(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};g.clone=function(){return new Yb(this)};
function ac(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function bc(a){if(a.H&&"function"==typeof a.H)return a.H();if(n(a))return a.split("");if(fa(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return $a(a)}
function cc(a,b,c){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,c);else if(fa(a)||n(a))Bb(a,b,c);else{var d;if(a.getKeys&&"function"==typeof a.getKeys)d=a.getKeys();else if(a.H&&"function"==typeof a.H)d=void 0;else if(fa(a)||n(a)){d=[];for(var e=a.length,f=0;f<e;f++)d.push(f)}else d=ab(a);for(var e=bc(a),f=e.length,h=0;h<f;h++)b.call(c,e[h],d&&d[h],a)}};var dc=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function ec(a,b){if(a)for(var c=a.split("&"),d=0;d<c.length;d++){var e=c[d].indexOf("="),f=null,h=null;0<=e?(f=c[d].substring(0,e),h=c[d].substring(e+1)):f=c[d];b(f,h?decodeURIComponent(h.replace(/\+/g," ")):"")}};function F(a,b){this.h=this.u=this.i="";this.o=null;this.M=this.l="";this.b=!1;var c;a instanceof F?(this.b=l(b)?b:a.b,fc(this,a.i),this.u=a.u,this.h=a.h,gc(this,a.o),this.l=a.l,hc(this,a.a.clone()),this.M=a.M):a&&(c=String(a).match(dc))?(this.b=!!b,fc(this,c[1]||"",!0),this.u=ic(c[2]||""),this.h=ic(c[3]||"",!0),gc(this,c[4]),this.l=ic(c[5]||"",!0),hc(this,c[6]||"",!0),this.M=ic(c[7]||"")):(this.b=!!b,this.a=new jc(null,0,this.b))}
F.prototype.toString=function(){var a=[],b=this.i;b&&a.push(kc(b,lc,!0),":");var c=this.h;if(c||"file"==b)a.push("//"),(b=this.u)&&a.push(kc(b,lc,!0),"@"),a.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c=this.o,null!=c&&a.push(":",String(c));if(c=this.l)this.h&&"/"!=c.charAt(0)&&a.push("/"),a.push(kc(c,"/"==c.charAt(0)?mc:nc,!0));(c=this.a.toString())&&a.push("?",c);(c=this.M)&&a.push("#",kc(c,oc));return a.join("")};F.prototype.clone=function(){return new F(this)};
function fc(a,b,c){a.i=c?ic(b,!0):b;a.i&&(a.i=a.i.replace(/:$/,""))}function gc(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.o=b}else a.o=null}function hc(a,b,c){b instanceof jc?(a.a=b,pc(a.a,a.b)):(c||(b=kc(b,qc)),a.a=new jc(b,0,a.b))}function rc(a){return a.a}function ic(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function kc(a,b,c){return n(a)?(a=encodeURI(a).replace(b,sc),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}
function sc(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var lc=/[#\/\?@]/g,nc=/[\#\?:]/g,mc=/[\#\?]/g,qc=/[\#\?@]/g,oc=/#/g;function jc(a,b,c){this.b=this.a=null;this.i=a||null;this.h=!!c}function G(a){a.a||(a.a=new Yb,a.b=0,a.i&&ec(a.i,function(b,c){a.add(decodeURIComponent(b.replace(/\+/g," ")),c)}))}g=jc.prototype;g.za=function(){G(this);return this.b};
g.add=function(a,b){G(this);this.i=null;a=tc(this,a);var c=this.a.get(a);c||this.a.set(a,c=[]);c.push(b);this.b=this.b+1;return this};g.remove=function(a){G(this);a=tc(this,a);return ac(this.a.f,a)?(this.i=null,this.b=this.b-this.a.get(a).length,this.a.remove(a)):!1};g.clear=function(){this.a=this.i=null;this.b=0};g.isEmpty=function(){G(this);return 0==this.b};function H(a,b){G(a);b=tc(a,b);return ac(a.a.f,b)}
g.getKeys=function(){G(this);for(var a=this.a.H(),b=this.a.getKeys(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};g.H=function(a){G(this);var b=[];if(n(a))H(this,a)&&(b=Hb(b,this.a.get(tc(this,a))));else{a=this.a.H();for(var c=0;c<a.length;c++)b=Hb(b,a[c])}return b};g.set=function(a,b){G(this);this.i=null;a=tc(this,a);H(this,a)&&(this.b=this.b-this.a.get(a).length);this.a.set(a,[b]);this.b=this.b+1;return this};
g.get=function(a,b){var c=a?this.H(a):[];return 0<c.length?String(c[0]):b};g.toString=function(){if(this.i)return this.i;if(!this.a)return"";for(var a=[],b=this.a.getKeys(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.H(d),f=0;f<d.length;f++){var h=e;""!==d[f]&&(h+="="+encodeURIComponent(String(d[f])));a.push(h)}return this.i=a.join("&")};g.clone=function(){var a=new jc;a.i=this.i;this.a&&(a.a=this.a.clone(),a.b=this.b);return a};
function tc(a,b){var c=String(b);a.h&&(c=c.toLowerCase());return c}function pc(a,b){b&&!a.h&&(G(a),a.i=null,a.a.forEach(function(a,b){var e=b.toLowerCase();b!=e&&(this.remove(b),this.remove(e),0<a.length&&(this.i=null,this.a.set(tc(this,e),Ib(a)),this.b=this.b+a.length))},a));a.h=b}g.extend=function(a){for(var b=0;b<arguments.length;b++)cc(arguments[b],function(a,b){this.add(b,a)},this)};v.g={};v.g.Ub=function(a){a=a.split("/");for(var b="/",c=0;c<a.length;c++)""!==a[c]&&(b+=a[c]+"/");return b};v.g.G=function(){var a=new F(window.location.href),b=v.getQueryParam("L"),b=void 0!==b&&""!==b?b:0,a=a.l;return u?-1===a.indexOf(Ba)?(-1!==a.indexOf("/de")||-1!==a.indexOf("/en")?a.substring(0,3):"")+Ba+"?":a.substring(0,a.indexOf(Ba)+Ba.length)+"?":a+"?"+Ba+"&L="+b};v.g.L=function(){var a=v.g.G(),b=a.indexOf("?");return a.substring(0,b)};
v.g.Ba=function(a){new F(window.location.href);return u?v.g.L()+sa+"&"+a:v.g.G()+"&"+sa+"&"+a};v.g.Ab=function(a){new F(window.location.href);return u?v.g.L()+ua+"&"+a:v.g.G()+"&"+ua+"&"+a};v.g.zb=function(a){new F(window.location.href);return u?v.g.L()+ta+"&"+a:v.g.G()+"&"+ta+"&"+a};v.g.Vb=function(){new F(window.location.href);return u?v.g.L()+ya:v.g.G()+"&"+ya};v.g.xb=function(a){new F(window.location.href);return u?v.g.L()+xa+"&"+a:v.g.G()+"&"+xa+"&"+a};
v.g.yb=function(){new F(window.location.href);return u?v.g.L()+Aa+"&undefined":v.g.G()+"&"+Aa+"&undefined"};v.g.wb=function(){new F(window.location.href);return u?v.g.L()+va+"&undefined":v.g.G()+"&"+va+"&undefined"};v.g.Aa=function(a,b){var c=void 0!==a?"&objectid="+a:void 0!==b?"&"+b:"";new F(window.location.href);return u?v.g.L()+za+"&"+c:v.g.G()+"&"+za+c};v.g.Bb=function(a){new F(window.location.href);return u?v.g.L()+Ca+"&objectid="+a:v.g.G()+"&"+Ca+"&objectid="+a};v.g.Sa=function(){return v.g.G()};var uc;a:{var vc=k.navigator;if(vc){var wc=vc.userAgent;if(wc){uc=wc;break a}}uc=""}function I(a){return-1!=uc.indexOf(a)};var xc=I("Opera")||I("OPR"),J=I("Trident")||I("MSIE"),yc=I("Edge"),K=I("Gecko")&&!(-1!=uc.toLowerCase().indexOf("webkit")&&!I("Edge"))&&!(I("Trident")||I("MSIE"))&&!I("Edge"),M=-1!=uc.toLowerCase().indexOf("webkit")&&!I("Edge");M&&I("Mobile");var zc=I("Macintosh");I("Windows");I("Linux")||I("CrOS");var Ac=k.navigator||null;Ac&&(Ac.appVersion||"").indexOf("X11");I("Android");!I("iPhone")||I("iPod")||I("iPad");I("iPad");
function Bc(){var a=uc;if(K)return/rv\:([^\);]+)(\)|;)/.exec(a);if(yc)return/Edge\/([\d\.]+)/.exec(a);if(J)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(M)return/WebKit\/(\S+)/.exec(a)}function Cc(){var a=k.document;return a?a.documentMode:void 0}var Dc=function(){if(xc&&k.opera){var a;var b=k.opera.version;try{a=b()}catch(c){a=b}return a}a="";(b=Bc())&&(a=b?b[1]:"");return J&&(b=Cc(),null!=b&&b>parseFloat(a))?String(b):a}(),Ec={};
function N(a){var b;if(!(b=Ec[a])){b=0;for(var c=ob(String(Dc)).split("."),d=ob(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||"",m=d[f]||"",r=RegExp("(\\d*)(\\D*)","g"),z=RegExp("(\\d*)(\\D*)","g");do{var x=r.exec(h)||["","",""],B=z.exec(m)||["","",""];if(0==x[0].length&&0==B[0].length)break;b=xb(0==x[1].length?0:parseInt(x[1],10),0==B[1].length?0:parseInt(B[1],10))||xb(0==x[2].length,0==B[2].length)||xb(x[2],B[2])}while(0==b)}b=Ec[a]=0<=b}return b}
var Fc=k.document,Gc=Fc&&J?Cc()||("CSS1Compat"==Fc.compatMode?parseInt(Dc,10):5):void 0;var Hc=!J||9<=Number(Gc);!K&&!J||J&&9<=Number(Gc)||K&&N("1.9.1");J&&N("9");var Ic=J||xc||M;function O(a){var b=document;return n(a)?b.getElementById(a):a}function Jc(a,b){var c=b||document;return c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):Kc("*",a,b)}function P(a,b){var c=b||document,d=null;c.getElementsByClassName?d=c.getElementsByClassName(a)[0]:c.querySelectorAll&&c.querySelector?d=c.querySelector("."+a):d=Kc("*",a,b)[0];return d||null}
function Kc(a,b,c){var d=document;c=c||d;a=a&&"*"!=a?a.toUpperCase():"";if(c.querySelectorAll&&c.querySelector&&(a||b))return c.querySelectorAll(a+(b?"."+b:""));if(b&&c.getElementsByClassName){c=c.getElementsByClassName(b);if(a){for(var d={},e=0,f=0,h;h=c[f];f++)a==h.nodeName&&(d[e++]=h);d.length=e;return d}return c}c=c.getElementsByTagName(a||"*");if(b){d={};for(f=e=0;h=c[f];f++)a=h.className,"function"==typeof a.split&&Fb(a.split(/\s+/),b)&&(d[e++]=h);d.length=e;return d}return c}
function Lc(a,b){Ya(b,function(c,b){"style"==b?a.style.cssText=c:"class"==b?a.className=c:"for"==b?a.htmlFor=c:Mc.hasOwnProperty(b)?a.setAttribute(Mc[b],c):0==b.lastIndexOf("aria-",0)||0==b.lastIndexOf("data-",0)?a.setAttribute(b,c):a[b]=c})}var Mc={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function Q(a,b,c){var d=arguments,e=document,f=d[0],h=d[1];if(!Hc&&h&&(h.name||h.type)){f=["<",f];h.name&&f.push(' name="',pb(h.name),'"');if(h.type){f.push(' type="',pb(h.type),'"');var m={};eb(m,h);delete m.type;h=m}f.push(">");f=f.join("")}f=e.createElement(f);h&&(n(h)?f.className=h:ea(h)?f.className=h.join(" "):Lc(f,h));2<d.length&&Nc(e,f,d);return f}
function Nc(a,b,c){function d(c){c&&b.appendChild(n(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];!fa(f)||ha(f)&&0<f.nodeType?d(f):Bb(Oc(f)?Ib(f):f,d)}}function Pc(a,b){a.appendChild(b)}function Qc(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function Rc(a){var b;if(Ic&&!(J&&N("9")&&!N("10")&&k.SVGElement&&a instanceof k.SVGElement)&&(b=a.parentElement))return b;b=a.parentNode;return ha(b)&&1==b.nodeType?b:null}function Sc(a,b){var c=[];return Tc(a,b,c,!0)?c[0]:void 0}
function Uc(a,b){var c=[];Tc(a,b,c,!1);return c}function Tc(a,b,c,d){if(null!=a)for(a=a.firstChild;a;){if(b(a)&&(c.push(a),d)||Tc(a,b,c,d))return!0;a=a.nextSibling}return!1}function Oc(a){if(a&&"number"==typeof a.length){if(ha(a))return"function"==typeof a.item||"string"==typeof a.item;if("function"==ca(a))return"function"==typeof a.item}return!1};function Vc(){proj4.defs("EPSG:3043","+proj=utm +zone=31 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs");proj4.defs("EPSG:4314","+proj=longlat +ellps=bessel +datum=potsdam +no_defs");proj4.defs("EPSG:4326","+proj=longlat +datum=WGS84 +no_defs");proj4.defs("EPSG:900913","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext +over no_defs");proj4.defs("EPSG:3857","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs")}
function Wc(a){var b=a.hasOwnProperty("polygon")&&0<a.polygon.length?new ol.geom.Polygon([a.polygon]):void 0;void 0!==b&&b.transform(a.source,t.projection);return new ol.Feature({geometry:b})}function Xc(){var a=O("transformation-chooser");return"tps"===a.value.toLowerCase()?"tps":"polynom"===a.value.toLowerCase()?"polynom":"affine"}function Yc(){var a=O("projection-chooser");return null!==a&&void 0!==a?a.value:"EPSG:4314"};var Zc=!J||9<=Number(Gc),$c=J&&!N("9");!M||N("528");K&&N("1.9b")||J&&N("8")||xc&&N("9.5")||M&&N("528");K&&!N("8")||J&&N("9");function ad(a,b){y.call(this,a?a.type:"");this.currentTarget=this.target=null;this.keyCode=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.h=this.l=this.a=this.i=!1;this.P=this.state=null;if(a){this.type=a.type;var c=a.changedTouches?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d&&K)try{nb(d.nodeName)}catch(e){}null===c?(this.offsetX=M||void 0!==a.offsetX?a.offsetX:a.layerX,this.offsetY=M||void 0!==a.offsetY?a.offsetY:a.layerY,
this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY):(this.clientX=void 0!==c.clientX?c.clientX:c.pageX,this.clientY=void 0!==c.clientY?c.clientY:c.pageY);this.keyCode=a.keyCode||0;this.i=a.ctrlKey;this.a=a.altKey;this.l=a.shiftKey;this.h=a.metaKey;this.state=a.state;this.P=a;a.defaultPrevented&&this.preventDefault()}}q(ad,y);
ad.prototype.stopPropagation=function(){ad.ma.stopPropagation.call(this);this.P.stopPropagation?this.P.stopPropagation():this.P.cancelBubble=!0};ad.prototype.preventDefault=function(){ad.ma.preventDefault.call(this);var a=this.P;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,$c)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var bd="closure_lm_"+(1E6*Math.random()|0),cd={},dd=0;function R(a,b,c,d,e){if(ea(b)){for(var f=0;f<b.length;f++)R(a,b[f],c,d,e);return null}c=ed(c);return a&&a[Ra]?a.F.add(String(b),c,!1,d,e):fd(a,b,c,!1,d,e)}
function fd(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var h=!!e,m=gd(a);m||(a[bd]=m=new Sb(a));c=m.add(b,c,d,e,f);if(c.a)return c;d=hd();c.a=d;d.src=a;d.listener=c;if(a.addEventListener)a.addEventListener(b.toString(),d,h);else if(a.attachEvent)a.attachEvent(id(b.toString()),d);else throw Error("addEventListener and attachEvent are unavailable.");dd++;return c}
function hd(){var a=jd,b=Zc?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function S(a,b,c,d,e){if(ea(b))for(var f=0;f<b.length;f++)S(a,b[f],c,d,e);else c=ed(c),a&&a[Ra]?a.F.add(String(b),c,!0,d,e):fd(a,b,c,!0,d,e)}function kd(a,b,c,d,e){if(ea(b))for(var f=0;f<b.length;f++)kd(a,b[f],c,d,e);else c=ed(c),a&&a[Ra]?a.F.remove(String(b),c,d,e):a&&(a=gd(a))&&(b=a.Da(b,c,!!d,e))&&ld(b)}
function ld(a){if(!ga(a)&&a&&!a.ca){var b=a.src;if(b&&b[Ra])Ub(b.F,a);else{var c=a.type,d=a.a;b.removeEventListener?b.removeEventListener(c,d,a.ga):b.detachEvent&&b.detachEvent(id(c),d);dd--;(c=gd(b))?(Ub(c,a),0==c.b&&(c.src=null,b[bd]=null)):Va(a)}}}function id(a){return a in cd?cd[a]:cd[a]="on"+a}function md(a,b,c,d){var e=!0;if(a=gd(a))if(b=a.a[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.ga==c&&!f.ca&&(f=nd(f,d),e=e&&!1!==f)}return e}
function nd(a,b){var c=a.listener,d=a.Z||a.src;a.qa&&ld(a);return c.call(d,b)}
function jd(a,b){if(a.ca)return!0;if(!Zc){var c;if(!(c=b))a:{c=["window","event"];for(var d=k,e;e=c.shift();)if(null!=d[e])d=d[e];else{c=null;break a}c=d}e=c;c=new ad(e,this);d=!0;if(!(0>e.keyCode||void 0!=e.returnValue)){a:{var f=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(h){f=!0}if(f||void 0==e.returnValue)e.returnValue=!0}e=[];for(f=c.currentTarget;f;f=f.parentNode)e.push(f);for(var f=a.type,m=e.length-1;!c.b&&0<=m;m--){c.currentTarget=e[m];var r=md(e[m],f,!0,c),d=d&&r}for(m=0;!c.b&&m<e.length;m++)c.currentTarget=
e[m],r=md(e[m],f,!1,c),d=d&&r}return d}return nd(a,new ad(b,this))}function gd(a){a=a[bd];return a instanceof Sb?a:null}var od="__closure_events_fn_"+(1E9*Math.random()>>>0);function ed(a){if("function"==ca(a))return a;a[od]||(a[od]=function(b){return a.handleEvent(b)});return a[od]};function pd(a){function b(){if(v.A()){var a=v.S(),c=a.getCesiumScene(),b=c.camera,d=olcs.core.pickBottomPoint(c),e=Cesium.Matrix4.fromTranslation(d),c=olcs.core.computeAngleToZenith(c,d);a.getEnabled()&&olcs.core.rotateAroundAxis(b,-c,b.right,e,{callback:function(){a.setEnabled(!1);var c=a.getOlMap().getView(),b=c.getResolution(),d=c.getRotation();c.setResolution(c.constrainResolution(b));c.setRotation(c.constrainRotation(d))}})}}function c(){if(v.A()){var a=v.S(),c=a.getCesiumScene(),b=c.camera,
d=olcs.core.pickBottomPoint(c),c=Cesium.Math.toRadians(50),d=Cesium.Matrix4.fromTranslation(d);a.setEnabled(!0);olcs.core.rotateAroundAxis(b,-c,b.right,d,{duration:500})}}a=a||{};this.a=document.createElement("a");this.a.href="#flip-view-mode";this.a.className=v.A()&&v.S().getEnabled()?"ol-has-tooltip three-d":"ol-has-tooltip two-d";qd(this,v.A()&&v.S().getEnabled()?"2D":"3D");var d=Q("div",{"class":"info-message",innerHTML:v.c("flipviewmode-zoomin")}),e=document.createElement("div");e.className=
"flip-view-mode ol-unselectable";e.appendChild(this.a);e.appendChild(d);var f=p(function(a){a.preventDefault();E(this.a,"flip-mode-3d")?(rd(this,"2d"),b()):3>this.getMap().getView().getZoom()?(Pb(d,"open"),setTimeout(function(){Qb(d,"open")},4E3)):(rd(this,"3d"),c())},this);R(this.a,"click",f,void 0,this);R(this.a,"touchstart",f,void 0,this);ol.control.Control.call(this,{element:e,target:a.target})}ol.inherits(pd,ol.control.Control);
function qd(a,b){a.a.innerHTML=b;var c=Q("span",{role:"tooltip",innerHTML:v.c("flipviewmode-title")});a.a.appendChild(c)}function rd(a,b){"2d"===b.toLowerCase()?(Qb(a.a,"flip-mode-3d"),qd(a,"2D")):"3d"===b.toLowerCase()&&(Pb(a.a,"flip-mode-3d"),qd(a,"3D"))};function sd(a){function b(a){a.preventDefault();e.getMap().getView().setRotation(0)}a=a||{};var c=document.createElement("a");c.href="#rotate-north";c.innerHTML="N";c.className="ol-has-tooltip";var d=Q("span",{role:"tooltip",innerHTML:v.c("rotatenorth-title")});c.appendChild(d);var e=this;R(c,"click",b,void 0,this);R(c,"touchstart",b,void 0,this);d=document.createElement("div");d.className="rotate-north ol-unselectable";d.appendChild(c);ol.control.Control.call(this,{element:d,target:a.target})}
ol.inherits(sd,ol.control.Control);function T(){Oa.call(this);this.F=new Sb(this);this.lb=this;this.Ia=null}q(T,Oa);T.prototype[Ra]=!0;g=T.prototype;g.addEventListener=function(a,b,c,d){R(this,a,b,c,d)};g.removeEventListener=function(a,b,c,d){kd(this,a,b,c,d)};
g.dispatchEvent=function(a){var b,c=this.Ia;if(c)for(b=[];c;c=c.Ia)b.push(c);var c=this.lb,d=a.type||a;if(n(a))a=new y(a,c);else if(a instanceof y)a.target=a.target||c;else{var e=a;a=new y(d,c);eb(a,e)}var e=!0,f;if(b)for(var h=b.length-1;!a.b&&0<=h;h--)f=a.currentTarget=b[h],e=td(f,d,!0,a)&&e;a.b||(f=a.currentTarget=c,e=td(f,d,!0,a)&&e,a.b||(e=td(f,d,!1,a)&&e));if(b)for(h=0;!a.b&&h<b.length;h++)f=a.currentTarget=b[h],e=td(f,d,!1,a)&&e;return e};
g.W=function(){T.ma.W.call(this);if(this.F){var a=this.F,b=0,c;for(c in a.a){for(var d=a.a[c],e=0;e<d.length;e++)++b,Va(d[e]);delete a.a[c];a.b--}}this.Ia=null};function td(a,b,c,d){b=a.F.a[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var h=b[f];if(h&&!h.ca&&h.ga==c){var m=h.listener,r=h.Z||h.src;h.qa&&Ub(a.F,h);e=!1!==m.call(r,d)&&e}}return e&&0!=d.ib}g.Da=function(a,b,c,d){return this.F.Da(String(a),b,c,d)};
g.hasListener=function(a,b){return this.F.hasListener(l(a)?String(a):void 0,b)};var ud={AE:"maptype-ae",AK:"maptype-ak",CM:"maptype-cm",GL:"maptype-gl",MB:"maptype-mb",MTB:"maptype-mtb",TK:"maptype-tk",TKX:"maptype-tkx",ToGeoref:"georeference-false"};
function vd(a,b){this.m=n(a)?O(a):a;b||delete ud.ToGeoref;var c="",d;for(d in ud)var e=v.c("facet-"+d.toLowerCase()),c=c+('<label class="checkbox-inline" title="'+e+'"><input class="facet-search-el" type="checkbox" id="'+d+'" value="'+ud[d]+'" title="'+e+'" >'+e+"</label>");c=Q("div",{"class":"search-facet",innerHTML:c});this.m.appendChild(c);R(c,"click",function(a){a=Jc("facet-search-el",a.currentTarget);for(var c=[],b=!0,d=0;d<a.length;d++)if(a[d].checked){var e=a[d].value.split("-")[0],x=a[d].value.split("-")[1];
"georeference"!==e&&c.push({key:e,value:x});"georeference"===e&&(b=!1)}this.dispatchEvent(new y("facet-change",{facets:c,georeference:b}))},void 0,this);T.call(this)}q(vd,T);function wd(a,b){var c=n(a)?O(a):a;this.m=Q("div",{"class":"timeslider-container"});c.appendChild(this.m);void 0!==b&&xd(this,b);T.call(this)}q(wd,T);function yd(a){a.innerHTML="";var b=Q("label",{innerHTML:v.c("timeslider-adjust-timeperiod")});a.appendChild(b);b=Q("div",{"class":"slider-container"});a.appendChild(b);a=Q("div",{"class":"slider"});b.appendChild(a);return a}
function xd(a,b){function c(a,c){c.style.left=(a-b[0])/(b[1]-b[0])*100+"%";c.innerHTML=a}var d=yd(a.m),e,f;$(d).slider({range:!0,min:b[0],max:b[1],values:[b[0],b[1]],animate:"slow",orientation:"horizontal",step:1,slide:function(a,b){var d=b.values;c(d[0],e);c(d[1],f)},change:p(function(a,b){var d=b.values;c(d[0],e);c(d[1],f);this.dispatchEvent(new y("timechange",{time:d}))},a)});e=Q("div",{"class":"tooltip min-value",innerHTML:b[0]});d.appendChild(e);f=Q("div",{"class":"tooltip max-value",innerHTML:b[1]});
d.appendChild(f)};function U(){this.status_=!1;T.call(this)}q(U,T);U.prototype.C=function(){};U.prototype.D=function(){};function zd(a,b,c,d){this.a=[c,d];this.s=[new ol.interaction.Draw({source:a,type:"Point",style:function(){return[v.j.pa]}}),new ol.interaction.Draw({source:b,type:"Point",style:function(){return[v.j.pa]}})];U.call(this)}q(zd,U);zd.prototype.C=function(){this.J();this.status_=!0};zd.prototype.J=function(){for(var a=0;a<this.a.length;a++)this.a[a].addInteraction(this.s[a])};zd.prototype.D=function(){this.O();this.status_=!1};zd.prototype.O=function(){for(var a=0;a<this.a.length;a++)this.a[a].removeInteraction(this.s[a])};function Ad(a,b,c,d){function e(a,c,b){if("point"===a.getGeometry().getType().toLowerCase()){var d=c.getSource().getFeatureById(a.getId());a=b.getSource().getFeatureById(a.getId());null!=d&&c.getSource().removeFeature(d);null!=a&&b.getSource().removeFeature(a)}}this.a=[c,d];this.s=[new ol.interaction.Select({condition:ol.events.condition.click,layer:a,style:function(){return[v.j.pa]},condition:p(function(d){"click"===d.type&&c.forEachFeatureAtPixel(d.pixel,function(c){e(c,a,b)});return!1},this)}),
new ol.interaction.Select({condition:ol.events.condition.click,layer:b,style:function(){return[v.j.pa]},condition:p(function(c){"click"===c.type&&d.forEachFeatureAtPixel(c.pixel,function(c){e(c,a,b)});return!1},this)})];U.call(this)}q(Ad,U);Ad.prototype.C=function(){this.J();this.status_=!0};Ad.prototype.J=function(){for(var a=0;a<this.a.length;a++)this.a[a].addInteraction(this.s[a])};Ad.prototype.D=function(){this.O();this.status_=!1};Ad.prototype.O=function(){for(var a=0;a<this.a.length;a++)this.a[a].removeInteraction(this.s[a])};function Bd(a,b,c,d){this.a=[c,d];a.getStyle();v.j.ka();this.s=[new ol.interaction.Modify({features:a.getSource().getFeaturesCollection(),pixelTolerance:10,style:function(){return[v.j.ka()]}}),new ol.interaction.Modify({features:b.getSource().getFeaturesCollection(),pixelTolerance:10,style:function(){return[v.j.ka()]}})];this.s[0].getMap=function(){return c};this.s[1].getMap=function(){return d};Cd(this,this.s,[a,b]);U.call(this)}q(Bd,U);Bd.prototype.C=function(){this.J();this.status_=!0};
Bd.prototype.J=function(){for(var a=0;a<this.a.length;a++)this.a[a].addInteraction(this.s[a])};Bd.prototype.D=function(){this.O();this.status_=!1};Bd.prototype.O=function(){for(var a=0;a<this.a.length;a++)this.a[a].removeInteraction(this.s[a])};
function Cd(a,b,c){function d(a,c){var b=f(c.target.getMap(),c.mapBrowserPointerEvent.pixel,a);da(b.getId())&&this.dispatchEvent(new y("deselected",{feature:b,srcStyle:v.j.ka(b.getId()),targetStyle:v.j.Ca(b.getId())}))}function e(a,c){var b=f(c.target.getMap(),c.mapBrowserPointerEvent.pixel,a);da(b.getId())&&this.dispatchEvent(new y("selected",{feature:b,srcStyle:v.j.Ca(b.getId()),targetStyle:v.j.ka(b.getId())}))}function f(a,c,b){var d;a.forEachFeatureAtPixel(c,function(a){d=a});return b.getFeatureById(d.getId())}
var h=c[0].getSource();c=c[1].getSource();b[0].on("modifystart",p(e,a,c));b[1].on("modifystart",p(e,a,h));b[0].on("modifyend",p(d,a,c));b[1].on("modifyend",p(d,a,h))}ol.Collection.prototype.addFeature=function(a){var b=!1;this.forEach(function(c){c===a&&(b=!0)});b||this.push(a)};ol.Collection.prototype.removeFeature=function(a){var b=!1;this.forEach(function(c){c===a&&(b=!0)});b&&this.remove(a)};function Dd(){T.call(this)}q(Dd,T);function Ed(a,b,c,d,e){if(!(J||yc||M&&N("525")))return!0;if(zc&&e)return Fd(a);if(e&&!d)return!1;ga(b)&&(b=Gd(b));if(!c&&(17==b||18==b||zc&&91==b))return!1;if((M||yc)&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(J&&d&&b==a)return!1;switch(a){case 13:return!0;case 27:return!(M||yc)}return Fd(a)}
function Fd(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||(M||yc)&&0==a)return!0;switch(a){case 32:case 43:case 63:case 64:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function Gd(a){if(K)a=Hd(a);else if(zc&&M)a:switch(a){case 93:a=91;break a}return a}
function Hd(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}};function Id(a,b){T.call(this);a&&(this.ua&&Jd(this),this.ia=a,this.ta=R(this.ia,"keypress",this,b),this.Ea=R(this.ia,"keydown",this.a,b,this),this.ua=R(this.ia,"keyup",this.b,b,this))}q(Id,T);g=Id.prototype;g.ia=null;g.ta=null;g.Ea=null;g.ua=null;g.B=-1;g.T=-1;g.ya=!1;
var Kd={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Ld={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Md=J||yc||M&&N("525"),Nd=zc&&K;
Id.prototype.a=function(a){if(M||yc)if(17==this.B&&!a.i||18==this.B&&!a.a||zc&&91==this.B&&!a.h)this.T=this.B=-1;-1==this.B&&(a.i&&17!=a.keyCode?this.B=17:a.a&&18!=a.keyCode?this.B=18:a.h&&91!=a.keyCode&&(this.B=91));Md&&!Ed(a.keyCode,this.B,a.l,a.i,a.a)?this.handleEvent(a):(this.T=Gd(a.keyCode),Nd&&(this.ya=a.a))};Id.prototype.b=function(a){this.T=this.B=-1;this.ya=a.a};
Id.prototype.handleEvent=function(a){var b=a.P,c,d,e=b.altKey;J&&"keypress"==a.type?c=this.T:(M||yc)&&"keypress"==a.type?c=this.T:xc&&!M?c=this.T:(c=b.keyCode||this.T,d=b.charCode||0,Nd&&(e=this.ya),zc&&63==d&&224==c&&(c=191));d=c=Gd(c);var f=b.keyIdentifier;c?63232<=c&&c in Kd?d=Kd[c]:25==c&&a.l&&(d=9):f&&f in Ld&&(d=Ld[f]);a=d==this.B;this.B=d;b=new Pd(d,0,a,b);b.a=e;this.dispatchEvent(b)};function Jd(a){a.ta&&(ld(a.ta),ld(a.Ea),ld(a.ua),a.ta=null,a.Ea=null,a.ua=null);a.ia=null;a.B=-1;a.T=-1}
Id.prototype.W=function(){Id.ma.W.call(this);Jd(this)};function Pd(a,b,c,d){ad.call(this,d);this.type="key";this.keyCode=a;this.repeat=c}q(Pd,ad);function Qd(a,b,c){if(n(b))(b=Rd(a,b))&&(a.style[b]=c);else for(var d in b){c=a;var e=b[d],f=Rd(c,d);f&&(c.style[f]=e)}}var Sd={};function Rd(a,b){var c=Sd[b];if(!c){var d=yb(b),c=d;void 0===a.style[d]&&(d=(M?"Webkit":K?"Moz":J?"ms":xc?"O":null)+zb(d),void 0!==a.style[d]&&(c=d));Sd[b]=c}return c}
function Td(a){var b=Ud,c;a:{c=9==a.nodeType?a:a.ownerDocument||a.document;if(c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))){c=c.display||c.getPropertyValue("display")||"";break a}c=""}if("none"!=(c||(a.currentStyle?a.currentStyle.display:null)||a.style&&a.style.display))return b(a);c=a.style;var d=c.display,e=c.visibility,f=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=f;c.visibility=e;return a}
function Ud(a){var b=a.offsetWidth,c=a.offsetHeight,d=M&&!b&&!c;if((!l(b)||d)&&a.getBoundingClientRect){var e;a:{try{e=a.getBoundingClientRect()}catch(f){e={left:0,top:0,right:0,bottom:0};break a}J&&a.ownerDocument.body&&(a=a.ownerDocument,e.left-=a.documentElement.clientLeft+a.body.clientLeft,e.top-=a.documentElement.clientTop+a.body.clientTop)}return new Xa(e.right-e.left,e.bottom-e.top)}return new Xa(b,c)};function Vd(){var a=document.body,b=Q("div",{"class":"modal fade vk2-overlay-modal",id:"vk2-overlay-modal"}),c=Q("div",{"class":"modal-dialog"});b.appendChild(c);var d=Q("div",{"class":"modal-content"});c.appendChild(d);this.a=Q("div",{"class":"modal-header"});d.appendChild(this.a);c=Q("button",{"class":"close",type:"button","data-dismiss":"modal","aria-hidden":"true",innerHTML:"&times;"});this.a.appendChild(c);c=Q("h4",{"class":"modal-title"});this.a.appendChild(c);c=Q("div",{"class":"modal-body"});
d.appendChild(c);c=Q("div",{"class":"modal-footer"});d.appendChild(c);d=Q("button",{"class":"btn btn-default",type:"button","data-dismiss":"modal",innerHTML:"Close"});c.appendChild(d);this.I=b;a.appendChild(this.I);Wd(this.I)}
function Xd(a,b){for(var c=Uc(b,function(a){return"a"===a.nodeName.toLowerCase()&&a.hasAttribute("href")}),d=P("modal-content",a.I),e=0;e<c.length;e++){var f=c[e];if(!f.hasAttribute("target")||"_self"===f.getAttribute("target")){f.setAttribute("data-href",f.href);f.href="#";var h=l("map-profile")?"map-profile":f.hasAttribute("data-classname")?f.getAttribute("data-classname"):"";R(f,"click",ma(function(a,c){c.preventDefault();var b=c.currentTarget.getAttribute("data-href");Yd(this,{href:b,classes:a});
d.className="modal-content "+a;return!1},h),void 0,a)}}}function Wd(a){$(a).on("hidden.bs.modal",function(){P("modal-body",this).innerHTML="";P("modal-title",this.I).innerHTML="";P("modal-content",this).className="modal-content";Qc(this)})}
function Yd(a,b){var c=P("modal-body",a.I);c.innerHTML="";var d=Q("iframe",{frameborder:"0",name:"vk2-modal",src:b.href});d.setAttribute("webkitallowfullscreen","");d.setAttribute("mozallowfullscreen","");d.setAttribute("allowfullscreen","");l(b.width)&&Qd(d,"width",b.width);l(b.height)&&Qd(d,"height",b.height);l(b.classes)&&A(d,b.classes);c.appendChild(d)}function Zd(a){l(a.I)&&$(a.I).modal("hide")}
function $d(a,b,c,d){null!=b&&b?P("modal-title",a.I).innerHTML=b:a.a.style.display="none";l(c)&&(b=P("modal-content",a.I),A(b,c));l(d)&&Yd(a,d);$(a.I).modal("show")}function ae(a,b){var c=P("modal-body",a.I);n(b)&&(c.innerHTML=b)};function be(a,b,c){if("function"==ca(a))c&&(a=p(a,c));else if(a&&"function"==typeof a.handleEvent)a=p(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:k.setTimeout(a,b||0)};function ce(a,b){this.ra=l(b)?b:void 0;this.m=l(a)?a:void 0;this.v=!1}function de(a){for(var b in a)if(a.hasOwnProperty(b))for(var c=a[b],d=0;d<c.length;d++)c[d].setOpacity(0),c[d].setVisible(!0)}function ee(a,b){de(b);({start:function(a,b,e){if(e.v){for(var f in a)break;var h=l(a[f])?a[f]:[];delete a[f];a=p(this.start,this,a,b,e);be(ma(e.Mb,h,a),b,e);l(e.ra)&&(e.ra.innerHTML=l(f)?f:"");l(f)||(console.log("Visualization finished ...."),e.v=!1,l(e.m)&&C(e.m,"play"))}}}).start(b,500,a)}
function fe(a,b){for(var c=a.sort(function(a,c){return a.getTime()>c.getTime()?1:a.getTime()<c.getTime()?-1:0}),d=0;d<c.length;d++)b.removeLayer(c[d]),b.addLayer(c[d]);for(var e={},d=0;d<c.length;d++)c[d].getTime()in e?e[c[d].getTime()].push(c[d]):e[c[d].getTime()]=[c[d]];return e}
ce.prototype.Mb=function(a,b){({Va:function(a,b,e,f,h){if(h.v){var m=a[0].getOpacity()+b;if(1.05>=m){for(var r=0;r<a.length;r++)a[r].setOpacity(m);be(ma(this.Va,a,b,e,f,h),e,this)}else l(f)&&f()}},start:function(a,b,e,f,h){for(var m=0;m<a.length;m++)a[m].setOpacity(0),a[m].setVisible(!0);be(ma(this.Va,a,b,e,f,h),e,this)}}).start(a,.1,500,b,this)};function ge(a){a.v=!1;l(a.ra)&&(a.ra.innerHTML=l(void 0)?void 0:"");l(a.m)&&C(a.m,"play")};function V(a){T.call(this);this.mb=new Yb;this.X=a||null;this.v=!1;this.U=this.a=null;this.l=this.nb=this.oa="";this.b=this.la=this.h=this.aa=!1;this.u=0;this.o=null;this.Ja=he;this.da=this.ob=!1}q(V,T);var he="",ie=/^https?$/i,je=["POST","PUT"],ke=[];function W(a,b,c,d){var e=new V;ke.push(e);b&&e.F.add("complete",b,!1,void 0,void 0);e.F.add("ready",e.ub,!0,void 0,void 0);le(e,a,c,d,void 0)}g=V.prototype;g.ub=function(){w(this);Gb(ke,this)};
function le(a,b,c,d,e){if(a.a)throw Error("[goog.net.XhrIo] Object is active with another request="+a.oa+"; newUri="+b);c=c?c.toUpperCase():"GET";a.oa=b;a.l="";a.nb=c;a.aa=!1;a.v=!0;a.a=a.X?Xb(a.X):Xb(Vb);a.U=a.X?kb(a.X):kb(Vb);a.a.onreadystatechange=p(a.bb,a);try{a.la=!0,a.a.open(c,String(b),!0),a.la=!1}catch(f){me(a,f);return}b=d||"";var h=a.mb.clone();e&&cc(e,function(a,b){h.set(b,a)});e=Db(h.getKeys());d=k.FormData&&b instanceof k.FormData;!Fb(je,c)||e||d||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");
h.forEach(function(a,b){this.a.setRequestHeader(b,a)},a);a.Ja&&(a.a.responseType=a.Ja);bb(a.a)&&(a.a.withCredentials=a.ob);try{ne(a),0<a.u&&(a.da=oe(a.a),a.da?(a.a.timeout=a.u,a.a.ontimeout=p(a.jb,a)):a.o=be(a.jb,a.u,a)),a.h=!0,a.a.send(b),a.h=!1}catch(m){me(a,m)}}function oe(a){return J&&N(9)&&ga(a.timeout)&&l(a.ontimeout)}function Eb(a){return"content-type"==a.toLowerCase()}
g.jb=function(){"undefined"!=typeof aa&&this.a&&(this.l="Timed out after "+this.u+"ms, aborting",this.dispatchEvent("timeout"),this.a&&this.v&&(this.v=!1,this.b=!0,this.a.abort(),this.b=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),pe(this)))};function me(a,b){a.v=!1;a.a&&(a.b=!0,a.a.abort(),a.b=!1);a.l=b;qe(a);pe(a)}function qe(a){a.aa||(a.aa=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}
g.W=function(){this.a&&(this.v&&(this.v=!1,this.b=!0,this.a.abort(),this.b=!1),pe(this,!0));V.ma.W.call(this)};g.bb=function(){this.i||(this.la||this.h||this.b?re(this):this.Hb())};g.Hb=function(){re(this)};
function re(a){if(a.v&&"undefined"!=typeof aa&&(!a.U[1]||4!=se(a)||2!=te(a)))if(a.h&&4==se(a))be(a.bb,0,a);else if(a.dispatchEvent("readystatechange"),4==se(a)){a.v=!1;try{var b=te(a),c;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:c=!0;break a;default:c=!1}var d;if(!(d=c)){var e;if(e=0===b){var f=String(a.oa).match(dc)[1]||null;if(!f&&k.self&&k.self.location)var h=k.self.location.protocol,f=h.substr(0,h.length-1);e=!ie.test(f?f.toLowerCase():"")}d=e}if(d)a.dispatchEvent("complete"),
a.dispatchEvent("success");else{var m;try{m=2<se(a)?a.a.statusText:""}catch(r){m=""}a.l=m+" ["+te(a)+"]";qe(a)}}finally{pe(a)}}}function pe(a,b){if(a.a){ne(a);var c=a.a,d=a.U[0]?ba:null;a.a=null;a.U=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){}}}function ne(a){a.a&&a.da&&(a.a.ontimeout=null);ga(a.o)&&(k.clearTimeout(a.o),a.o=null)}function se(a){return a.a?a.a.readyState:0}function te(a){try{return 2<se(a)?a.a.status:-1}catch(b){return-1}}
function ue(a){try{return a.a?a.a.responseXML:null}catch(b){return null}}function X(a){if(a.a)return Wa(a.a.responseText)};v.Sb=function(){$(window)};v.sb=function(a,b){var c=v.c("facetedsearch-open"),d=v.c("facetedsearch-close"),e=l("facetedsearch-open")?"facetedsearch-open":"active",f=l(c)?c:"",h=l(d)?d:"";R(a,"click",function(c){c.preventDefault();E(b,e)?(Qb(b,e),a.title=f):(Pb(b,e),a.title=h)})};
v.fa=function(a){var b=Td(O("spatialsearch-container")),c=Td(O("layermanagement-container")),d=Td(O("mapdiv")),c=d.width-c.width-30,b=a.getCoordinateFromPixel([0+b.width+30,d.height-25-30]);a=a.getCoordinateFromPixel([c,35]);return[b[0],b[1],a[0],a[1]]};v.Na=function(){navigator.cookieEnabled||alert("For proper working of the virtuel map forum 2.0 please activate cookies in your browser")};v.Qa=function(a){return rc(l(a)?new F(a):new F(window.location.href))};
v.Ra=function(a,b){return E(a,b)?a:v.Ra(Rc(a),b)};v.c=function(a){try{if(l(window.lang_dictionary))return window.lang_dictionary[a]}catch(b){}return""};v.Cb=function(a){return[[a[0],a[1]],[a[0],a[3]],[a[2],a[3]],[a[2],a[1]],[a[0],a[1]]]};v.getQueryParam=function(a,b){return l(b)?v.Qa(b).get(a):v.Qa().get(a)};v.vb=function(){return ib.get("vk2-welcomepage")};
v.sa=function(a,b,c,d,e){var f=new Vd;d=l(d)?d:"";e=l(e)?e:!0;var h=1==e?'<button type="button" class="btn btn-primary" id="confirm-dialog-btn-yes">'+v.c("yes")+'</button><button type="button" class="btn btn-primary"id="confirm-dialog-btn-no">'+v.c("no")+"</button>":"";$d(f,a,d);ae(f,"<p>"+b+"</p><br>"+h);if(1==e){var m=l(c)?c:function(){};R(O("confirm-dialog-btn-yes"),"click",function(){m();Zd(f)});R(O("confirm-dialog-btn-no"),"click",function(){Zd(f)})}};v.S=function(){if(v.A())return window.ol3d};
v.Wb=function(){return l(ib.get("auth_tkt"))?!0:!1};v.A=function(){return Ia&&void 0!==window.ol3d};v.Ya=function(a){a=Jc(a,(l(void 0)?void 0:document.body).body);for(var b=0;b<a.length;b++)R(a[b],"click",function(a){a.preventDefault();try{var b=new Vd,e=this.title,f=this.getAttribute("data-classes");$d(b,e,f,{href:this.href,classes:f});a.preventDefault()}catch(h){}})};v.ba=function(){v.A()&&!0===v.S().getEnabled()&&v.S().getAutoRenderLoop().restartRenderLoop()};
v.round=function(a,b){var c=l(b)?Math.pow(10,Math.ceil(b)):Math.pow(10,2);return Math.round(a*c)/c};v.Ib=function(a){a=P("ol-overlaycontainer-stopevent",O(a));for(var b=0;b<a.children.length;b++){var c=a.children[b];if(E(c.children[0],"ol-has-tooltip"))for(var c=Jc("ol-has-tooltip",c),d=0;d<c.length;d++)c[d].setAttribute("title",c[d].children[0].innerHTML)}};
v.Xb=function(a,b,c){var d=new V;S(d,"success",function(a){a=a.target;l(b)&&b(a);w(a)});S(d,"error",function(a){a=a.target;l(c)&&c(a)});le(d,a)};v.Kb=function(a,b){ib.set(a,b,void 0,"/")};pa("vk2.utils.setCookie",v.Kb);v.Yb=function(){};v.Zb=function(a,b){var c=Q("div",{"class":"georef-point-container alert alert-warning",style:"display:none;"});a.appendChild(c);c.innerHTML="+"+b+" "+v.c("points");$(c).fadeIn(1E3).effect("puff",{},3E3,function(){c.innerHTML=""})};
v.Ob=function(a){return[Math.round(a[0]),Math.round(-1*a[1])]};v.Pb=function(a){return[Math.round(a[0]),Math.round(-1*a[1])]};function ve(a,b){function c(){var a=!1;D(e,"deactivate")?(C(e,"deactivate"),e.title=v.c("activatemap-all")):(A(e,"deactivate"),e.title=v.c("deactivatemap-all"),a=!0);for(var c=we(b),d=0;d<c.length;d++)c[d].setVisible(a);v.ba()}var d=Q("div",{"class":"deactivate-map-col-control"});a.appendChild(d);var e=Q("a",{href:"#",innerHTML:"D","class":"deactivate",title:v.c("deactivatemap-all")});d.appendChild(e);R(e,"click",c);R(e,"touchstart",c)};function xe(a,b){var c=Q("div",{"class":"dyn-vis-control",title:v.c("dynamicmapvis-open")}),d=Q("div",{"class":"content",style:"display:none;"});c.appendChild(d);a.appendChild(c);var e=Q("div",{"class":"feedback"});d.appendChild(e);e=new ce(c,e);ye(this,d,e,b);ze(this,c,d,e)}
function ze(a,b,c,d){var e=Q("a",{innerHTML:"o","class":"open-dyn-vis"});b.insertBefore(e,b.childNodes[0]||null);R(e,"click",function(a){a.preventDefault();$(c).slideToggle();D(a.currentTarget,"open")?(ge(d),C(a.currentTarget,"open"),a.currentTarget.parentElement.title=v.c("dynamicmapvis-open")):(A(a.currentTarget,"open"),a.currentTarget.parentElement.title=v.c("dynamicmapvis-close"))},void 0,a)}
function ye(a,b,c,d){var e=Q("div",{"class":"start-container"});b.appendChild(e);var f=Q("a",{href:"#dynamic-start",title:v.c("dynamicmapvis-start"),innerHTML:"Start"});e.appendChild(f);R(f,"click",function(a){a.preventDefault();a=we(d);c.v||(c.v=!0,a=fe(a,d),ee(c,a),l(c.m)&&!D(c.m,"play")&&A(c.m,"play"))},void 0,a);e=Q("span",{role:"tooltip",innerHTML:v.c("dynamicmapvis-start")});f.appendChild(e);f=Q("div",{"class":"stop-container"});b.appendChild(f);b=Q("a",{href:"#dynamic-stop",title:v.c("dynamicmapvis-stop"),
innerHTML:"Stop"});f.appendChild(b);R(b,"click",function(a){a.preventDefault();ge(c)},void 0,a);a=Q("span",{role:"tooltip",innerHTML:v.c("dynamicmapvis-stop")});b.appendChild(a)};var Ae={brightness:1,contrast:1,hue:0,saturation:0};
function Be(a){function b(a){a.preventDefault();D(a.target,"active")?(C(a.target,"active"),$(h).fadeOut().removeClass("open")):(A(a.target,"active"),$(h).fadeIn().addClass("open"))}function c(a){a=a.glContext;var b=$("canvas.ol-unselectable")[0];if(void 0!==a&&null!==a){var c=a.getGL();if(r){glif.reset();for(var d in m)glif.addFilter(d,m[d]);r=!1}glif.apply(c,b);a.useProgram(void 0)}}a=a||{};var d=Q("a",{"class":"ol-has-tooltip",href:"#image-manipulation",innerHTML:"I"}),e=Q("span",{role:"tooltip",
innerHTML:v.c("imagemanipulation-open")}),f=Q("div",{"class":"image-manipulation ol-unselectable"}),h=Q("div",{"class":"slider-container",style:"display:none;"});d.appendChild(e);f.appendChild(d);f.appendChild(h);var m=cb(Ae),r=!1,z=!1,x=p(function(a,b,d,e,f){f=Q("div",{"class":"slider "+a,title:l("opt_title")?f:"","data-type":d});var h=l(e)?e[1]:0,B=l(e)?e[2]:100,x=l(e)?e[3]:1,L=l(e)?e[0]:100,Od=p(function(a,e){var f=e.value,x=this.getMap().getLayers().getArray()[0];z||(x.on("postcompose",c),z=!0);
"vertical"==b?(Ta.style.top=100-(f-h)/(B-h)*100+"%",Ta.innerHTML=f+"%"):(Ta.style.left=(f-h)/(B-h)*100+"%",Ta.innerHTML=f,m[d]=f,r=!0,x.changed())},this);$(f).slider({min:h,max:B,value:L,animate:"slow",orientation:b,step:x,slide:Od,change:Od});var Ta=Q("div",{"class":"tooltip value "+a,innerHTML:l(e)?e[0]:""});f.appendChild(Ta);return f},this),e=x("slider-contrast","horizontal","contrast",[1,0,2,.01],v.c("imagemanipulation-contrast")),B=x("slider-saturation","horizontal","saturation",[0,-1,1,.01],
v.c("imagemanipulation-saturation")),L=x("slider-brightness","horizontal","brightness",[1,0,2,.1],v.c("imagemanipulation-brightness")),x=x("slider-hue","horizontal","hue",[0,-180,180,5],v.c("imagemanipulation-hue"));h.appendChild(e);h.appendChild(B);h.appendChild(L);h.appendChild(x);e=Q("button",{"class":"reset-btn",title:v.c("imagemanipulation-reset"),innerHTML:"Reset"});h.appendChild(e);R(e,"click",function(){this.getMap().getLayers().getArray()[0].un("postcompose",c);z=!1;for(var a=Jc("slider",
h),b=0;b<a.length;b++){var d=a[b],e=d.getAttribute("data-type"),e=Ae[e];$(d).slider("value",e)}},void 0,this);R(d,"click",b);R(d,"touchstart",b);ol.control.Control.call(this,{element:f,target:a.target})}ol.inherits(Be,ol.control.Control);function Ce(a){a=a||{};var b=l(a.spyLayer)?a.spyLayer:new ol.layer.Tile({attribution:void 0,source:new ol.source.OSM({attribution:void 0})}),c=l(a.radius)?parseInt(a.radius,0):75,d=null,e=Q("a",{"class":"ol-has-tooltip",href:"#layerspy",innerHTML:"L"}),f=Q("div",{"class":"ol-layerspy ol-unselectable"}),h=Q("span",{role:"tooltip",innerHTML:v.c("layerspy-title")});f.appendChild(e);e.appendChild(h);var m={fb:function(a){a.context.restore()},gb:function(a){var b=a.context;a=a.frameState.pixelRatio;b.save();
b.beginPath();d&&(b.arc(d[0]*a,d[1]*a,c*a,0,2*Math.PI),b.lineWidth=5*a,b.strokeStyle="rgba(0,0,0,0.5)",b.stroke());b.clip()},$a:function(a){d=this.getMap().getEventPixel(a.P);this.getMap().render()},ab:function(){d=null;this.getMap().render()},Wa:function(a){89===a.keyCode?(c=Math.min(c+5,150),this.getMap().render()):88===a.keyCode&&(c=Math.max(c-5,25),this.getMap().render())},Ma:function(a){a.target.getArray()[a.target.getLength()-1]!==b&&(this.getMap().removeLayer(b),this.getMap().addLayer(b))}},
r=null,z=p(function(a,b,c){this.getMap().addLayer(b);b.on("precompose",c.gb,this);b.on("postcompose",c.fb,this);R(this.getMap().getViewport(),"mousemove",c.$a,void 0,this);R(this.getMap().getViewport(),"mouseout",c.ab,void 0,this);A(a,"active");r=r||new Id(document);R(r,"key",c.Wa,void 0,this);this.getMap().getLayers().on("add",c.Ma,this)},this),x=p(function(a,b,c){b.un("precompose",c.gb,this);b.un("postcompose",c.fb,this);kd(this.getMap().getViewport(),"mousemove",c.$a,void 0,this);kd(this.getMap().getViewport(),
"mouseout",c.ab,void 0,this);this.getMap().removeLayer(b);C(a,"active");kd(r,"key",c.Wa,void 0,this);this.getMap().getLayers().un("add",c.Ma,this)},this);R(e,"click",p(function(a){a.preventDefault();D(e,"active")?x(e,b,m):z(e,b,m)},this));ol.control.Control.call(this,{element:f,target:a.target})}ol.inherits(Ce,ol.control.Control);function De(a){function b(a){var b=this.getMap();a=ol.proj.transform(b.getEventCoordinate(a),t.projection,"EPSG:4326");e.innerHTML="Lon: "+v.round(a[0],3)+", Lat: "+v.round(a[1],3)}a=a||{};var c=document.createElement("a");c.href="#mouse-position";c.innerHTML="M";c.className="ol-has-tooltip";var d=Q("span",{role:"tooltip",innerHTML:v.c("mouseposition-title")});c.appendChild(d);var e=void 0,d=p(function(a){a.preventDefault();var c=!E(a.target,"active"),d=this.getMap();ol.proj.transform(d.getEventCoordinate(a),
t.projection,"EPSG:4326");Rb(a.target);if(void 0===e){var r=d.getViewport();e=Q("div",{"class":"mouse-position-box",innerHTML:""});r.appendChild(e)}else e.innerHTML="";c?R(d.getViewport(),"mousemove",b,void 0,this):kd(d.getViewport(),"mousemove",b,void 0,this);b.call(this,[a]);Rb(e)},this);R(c,"click",d);R(c,"touchstart",d);d=document.createElement("div");d.className="mouse-position ol-unselectable";d.appendChild(c);ol.control.Control.call(this,{element:d,target:a.target})}ol.inherits(De,ol.control.Control);function Ee(a,b,c){W(v.g.yb(),function(a){200===te(a.target)?b(a):c(a)},"POST","req="+JSON.stringify(a))}function Fe(a,b){W(v.g.wb(),b,"POST","req="+JSON.stringify(a))};function Ge(a,b,c){$(a).hover(function(){D(this,"hover")||(c.getSource().clear(),c.getSource().addFeature(b),A(this,"hover"),Ia&&void 0!==window.ol3d&&window.ol3d.getAutoRenderLoop().restartRenderLoop())},function(){D(this,"hover")&&(c.getSource().clear(),C(this,"hover"))})};function Y(a){this.id_=l(a.id)?a.id:void 0;this.time_=a.time;this.title_=l(a.title)?a.title:void 0;this.thumb_=l(a.thumbnail)?a.thumbnail:Fa;this.allowUseInLayerManagement=!0;for(var b=[],c=0;c<Ga.length;c++){var d=a.tms.replace("{s}",Ga[c])+"/{z}/{x}/{-y}.png";b.push(d.replace("http:",""))}c=He(a.clip,this.id_,this.time_,this.title_);b=new ol.layer.Tile({extent:a.clip.getExtent(),source:new ol.source.XYZ({maxZoom:a.maxZoom,urls:b,crossOrigin:"*"})});c=new ol.layer.Vector({source:new ol.source.Vector({features:[c]}),
style:function(){return[v.j.rb]}});a.layers=[b,c];ol.layer.Group.call(this,a)}ol.inherits(Y,ol.layer.Group);function He(a,b,c,d){a=new ol.Feature(a);a.setProperties({objectid:b,time:c,title:d});a.setId(b);return a}Y.prototype.getTime=function(){return this.time_};Y.prototype.Ua=function(){return this.title_};Y.prototype.Ta=function(){return this.thumb_.replace("http:","")};Y.prototype.getId=function(){return this.id_};function Z(a){this.id_=l(a.id)?a.id:void 0;this.time_=a.time;this.title_=l(a.title)?a.title:void 0;this.thumb_=l(a.thumbnail)?a.thumbnail:Fa;this.allowUseInLayerManagement=!0;for(var b=[],c=0;c<Ga.length;c++){var d=a.tms.replace("{s}",Ga[c])+"/{z}/{x}/{-y}.png";b.push(d.replace("http:",""))}a.extent=a.clip.getExtent();a.source=new ol.source.XYZ({maxZoom:a.maxZoom,urls:b,crossOrigin:"*"});ol.layer.Tile.call(this,a)}ol.inherits(Z,ol.layer.Tile);Z.prototype.getTime=function(){return this.time_};
Z.prototype.Ua=function(){return this.title_};Z.prototype.Ta=function(){return this.thumb_};Z.prototype.getId=function(){return this.id_};function Ie(a,b){var c=l(a.ha)?a.ha:void 0,d=l(a.projection)?a.projection:"EPSG:3857",e=l(a.kb)?a.kb:void 0,f=l(a.Xa)?a.Xa:void 0,h=void 0===c?void 0:c.getExtent();a.source=new ol.source.TileWMS({url:e,params:{LAYERS:f,VERSION:"1.1.1"},projection:d,extent:h});a.preload=Infinity;d=new ol.layer.Tile(a);d.set("wms_url",e);d.set("layerid",f);l(c)&&(d.on("precompose",function(a){for(var d=a.context,e=[],f=c.getCoordinates()[0],h=0;h<f.length;h++)e.push(b.getPixelFromCoordinate(f[h]));d.save();a=a.frameState.pixelRatio;
d.beginPath();d.moveTo(e[0][0]*a,e[0][1]*a);for(f=1;f<e.length;f++)d.lineTo(e[f][0]*a,e[f][1]*a);d.closePath();d.clip()}),d.on("postcompose",function(a){a.context.restore()}));return d};function Je(){return{query:{filtered:{filter:{bool:{must:[]}}}},sort:{}}}function Ke(a){var b={geo_shape:{}};b.geo_shape.geometry={relation:"intersects",shape:{type:"polygon",coordinates:[a]}};return b}function Le(a){for(var b=[],c={bool:{should:b}},d=0;d<a.length;d++){var e=a[d],f={term:{}};f.term[e.key]=e.value.toLowerCase();b.push(f)}return c}function Me(a){var b={range:{}};b.range.time={gte:a[0],lte:a[1]};return b}
function Ne(a,b){var c=qa+"/map/_mget",d=JSON.stringify({ids:a});W(c,b,"POST",d)}function Oe(a,b){for(var c=[],d={query:{filtered:{filter:{bool:{should:c}}}}},e=0,f=b.length;e<f;e++){var h={term:{}};h.term[a]=b[e];c.push(h)}return d};pa("vk2.app.GeoreferenceChooseApp",function(a){this.a=[];Pe(this,O(a.target),O(a.targetCount))});
function Qe(a,b){b.innerHTML="";var c=Q("div",{"class":"form-group"}),d=Q("input",{type:"text",id:"georeference-search",name:"georeference-search","class":"form-control",placeholder:v.c("georef-search-field")+":"}),e=Q("ul");c.appendChild(d);b.appendChild(c);b.appendChild(e);var f=p(function(a){e.innerHTML="";for(var b=0,c=a.length;b<c;b++)Pc(e,Re(a[b]));setTimeout(function(){$("body").scroll()},100)},a),h;R(d,"keydown",function(a){clearTimeout(h);h=setTimeout(p(function(){for(var b=a.target.value,
c=$.extend(!0,[],this.a),d=[],e=c.length-1;0<=e;e--)0===c[e]._source.title.indexOf(b,0)&&d.push(c[e]);f(d)},this),1E3)},void 0,a);f(a.a)}function Se(a,b,c,d){void 0!==b.hits&&void 0!==b.hits.total&&(d.innerHTML=b.hits.total);void 0!==b.hits&&void 0!==b.hits.hits&&0<b.hits.hits.length&&(a.a=b.hits.hits,Qe(a,c));$("body").scroll(function(){$(".lazy-image").lazyload()});$(".lazy-image").lazyload()}
function Pe(a,b,c){var d=new V;S(d,"success",function(a){a=a.target;var d=X(a);Se(this,d,b,c);w(a)},!1,a);S(d,"error",function(){alert("Something went wrong, while trying to fetch data from the server.")},!1,a);a=qa+"/_search?size=2000";var e=Oe("georeference",[!1]);e.sort={title:{order:"asc"}};le(d,a,"POST",JSON.stringify(e))}
function Re(a){var b=a._source,c=a._id;a=b.maptype;var d=void 0!==b.thumb?b.thumb:"#",c=void 0!==c?v.g.Aa(c):"#",e=b.time;return Q("li",{id:b.id,innerHTML:'<div class="container record-container"><div class="image"><img class="lazy-image" alt="" data-original="'+d+'"></div><div class="body"><p><strong>'+b.title+"</strong></p><p>"+v.c("georef-choose-time")+": "+e+"</p><p>"+v.c("georef-choose-maptype")+": "+a+'</p></div><div class="tools"><a class="btn btn-primary" href="'+c+'" target="_top">'+v.c("georef-choose-goToGeoreference")+
"</a></div></div>"})};function Te(a){this.o=l(a.projection)?a.projection:"EPSG:900913";this.da=l(a.Fb)?a.Fb:20;this.Fa=void 0;this.l=new ol.Collection;this.U="title";this.aa="ascending";this.b=0;this.h=void 0;this.a={ea:l(a.time)?a.time[0]:1625,xa:l(a.time)?a.time[1]:1965};this.f=a.map;this.u=[];this.X=!0;this.C();T.call(this)}q(Te,T);Te.prototype.C=function(){this.f.on("moveend",function(){var a=v.fa(this.f);l(this.Fa)&&ol.extent.equals(this.Fa,a)||this.wa()},this)};
function Ue(a,b,c){var d=[a.a.ea+"-01-01",a.a.xa+"-01-01"],e="ascending"===a.aa?"asc":"desc";if(a.X){b=v.Cb(ol.proj.transformExtent(b,c,ra));c=a.U;a=a.u;var f=[],h=Je();f.push(Me(d));f.push(Ke(b));f.push(Le(a));f.push({term:{georeference:!0}});h.query.filtered.filter.bool.must=f;h.sort[c]={order:e};return h}b=a.U;a=a.u;c=[];f=Je();c.push(Me(d));c.push(Le(a));c.push({term:{georeference:!1}});f.query.filtered.filter.bool.must=c;f.sort[b]={order:e};return f}
Te.prototype.oa=function(a){this.dispatchEvent(new y("refresh",{features:a,totalFeatureCount:this.h}))};Te.prototype.la=function(a){this.dispatchEvent(new y("paginate",{features:a,totalFeatureCount:this.h}))};
function Ve(a,b,c,d){b=Ue(a,b,c);c=qa+"/_search?from="+a.b+"&size="+a.da;var e=new V;S(e,"success",function(a){a=a.target;if(X(a)){var b=X(a);this.h=b.hits.total;w(a);a=Ka(b.hits.hits);this.l.extend(a);this.b+=a.length;d.call(this,a)}else console.log("Response is empty")},!1,a);le(e,c,"POST",JSON.stringify(b))}Te.prototype.wa=function(){var a=v.fa(this.f);We(this,a,this.o);this.Fa=Ib(a)};function We(a,b,c){a.l.clear();a.b=0;Ve(a,b,c,a.oa)};function Xe(a,b){this.m=n(a)?O(a):a;this.a=new Te({projection:"EPSG:900913",map:b});R(this.a,"refresh",p(this.u,this));R(this.a,"paginate",p(this.wa,this));this.h=["time","title","georeference"];this.K=new ol.layer.Vector({source:new ol.source.Vector,style:function(){return[v.j.qb]}});void 0!==v.A()&&this.K.set("altitudeMode","clampToGround");b.addLayer(this.K);b.getLayers().on("add",function(a){a=a.target.getArray()[a.target.getLength()-1];if(a instanceof Y||a instanceof Z||"click"==a.get("type"))b.removeLayer(this.K),
b.addLayer(this.K)},this);Ye(this,this.m);Ze(this,this.m);$e(this);af(this);bf(this);T.call(this)}q(Xe,T);
function Ye(a,b){var c=Q("div",{"class":"mapsearch-container"});b.appendChild(c);var d=Q("div",{"class":"panel panel-default searchTablePanel"});c.appendChild(d);var e=Q("div",{"class":"panel-heading"});d.appendChild(e);var f=Q("div",{"class":"content"});e.appendChild(f);a.l=Q("div");f.appendChild(a.l);var h=Q("a",{innerHTML:"o",title:v.c("facetedsearch-open")});f.appendChild(h);f=Q("div",{"class":"facet-container"});e.appendChild(f);v.sb(h,c);a.o=new vd(f,!1);c=Q("div",{"class":"panel-body"});d.appendChild(c);
d=Q("div",{"class":"mapsearch-list"});c.appendChild(d);c=Q("div",{"class":"list-header"});d.appendChild(c);for(e=0;e<a.h.length;e++)f=a.h[e],h=Q("div",{"class":"inner-col "+f}),f=Q("div",{"data-type":f,"class":"sort-element "+f,innerHTML:v.c("mapsearch-"+f)+' <span class="caret caret-reversed"></span>'}),h.appendChild(f),c.appendChild(h);a.b=Q("ul",{id:"mapsearch-contentlist","class":"mapsearch-contentlist"});d.appendChild(a.b)}
function af(a){l(a.b)&&R(a.b,"click",function(a){a.preventDefault();var c=v.Ra(a.P.target,"mapsearch-record"),d;this.a.l.forEach(function(a){a.get("id")==c.id&&(d=a)});this.dispatchEvent(new y("click-record",{feature:d}))},void 0,a)}
function Ze(a,b){for(var c=Jc("sort-element",b),d=0;d<c.length;d++)R(c[d],"click",function(a){a=a.target.getAttribute("data-type");for(var b=P("sort-element "+a),c=D(b,"ascending")?"descending":"ascending",d=Jc("sort-element"),r=0;r<d.length;r++)C(d[r],"descending"),C(d[r],"ascending");A(b,c);this.a.U=a;this.a.aa=c;a=this.a;We(a,v.fa(a.f),a.o)},void 0,a)}
function $e(a){var b=!1;l(a.b)&&R(a.b,"scroll",function(a){if(!b){b=!0;a=a.currentTarget;if(a.offsetHeight+a.scrollTop>=a.scrollHeight&&(a=this.a,!(a.l.getLength()>=a.h)&&(a=this.a,a.b<a.h&&500>a.b))){var d=v.fa(a.f);Ve(a,d,a.o,a.la)}b=!1}},void 0,a)}function bf(a){R(a.o,"facet-change",function(a){var c=this.a;a=a.target;c.X=a.georeference;c.u=a.facets;c.wa()},void 0,a)}
function cf(a,b){for(var c=0;c<b.length;c++){var d,e=b[c];d=Q("li",{"class":"mapsearch-record type "+e.get("maptype"),id:e.get("id")});var f=Q("span",{"class":"data-col time",innerHTML:parseInt(e.get("time"),0)});d.appendChild(f);f=Q("span",{"class":"data-col title",innerHTML:e.get("title")});d.appendChild(f);f=Q("span",{"class":"data-col time",innerHTML:1});d.appendChild(f);f=Q("div",{"class":"view-item"});d.appendChild(f);var h=Q("a",{"class":"thumbnail",href:"#"});f.appendChild(h);var m=Q("img",
{onerror:'this.onerror=null;this.src="http://www.deutschefotothek.de/images/noimage/image120.jpg"',alt:"Thumbnail Image of Map",src:e.get("thumb").replace("http:","")});h.appendChild(m);h=Q("div",{"class":"overview"});f.appendChild(h);f=Q("h2",{innerHTML:e.get("title")});h.appendChild(f);f=Q("p",{"class":"details"});h.appendChild(f);h=Q("div",{"class":"timestamp",innerHTML:v.c("timestamp")+" "+e.get("time")});f.appendChild(h);h="0"===e.get("denominator")||0===e.get("denominator")?" unknown":" 1:"+
e.get("denominator");h=Q("div",{"class":"scale",innerHTML:v.c("factory-scale")+h});f.appendChild(h);e.get("georeference")||(e=Q("div",{"class":"georeference",innerHTML:v.c("factory-no-georef")}),f.appendChild(e));a.b.appendChild(d);l(a.K)&&Ge(d,b[c],a.K)}}Xe.prototype.u=function(a){df(this,a.target.totalFeatureCount);this.b.innerHTML="";cf(this,a.target.features)};Xe.prototype.wa=function(a){df(this,a.target.ac);cf(this,a.target.features)};
function df(a,b){a.l.innerHTML=0<b?b+" "+v.c("mapsearch-found-maps"):v.c("mapsearch-found-no-maps")};function ef(a,b){this.o=b;this.l=n(a)?O(a):a;ff(this,this.l);this.b={};this.u={placename:p(function(a){this.b.hasOwnProperty(a)?gf(this,this.b[a][0]):hf(this,a,p(function(a){0<a.length?gf(this,a[0]):alert("The choosen placename is unknown.")},this))},this)};jf(this);kf(this);T.call(this)}q(ef,T);
function ff(a,b){var c=Q("div",{"class":"gazetteersearch-container"});b.appendChild(c);var d=Q("div",{"class":"form-group"});c.appendChild(d);a.a=Q("input",{placeholder:v.c("gazetteer-placeholder"),type:"text","class":"form-control gazetteersearch-input"});d.appendChild(a.a);a.h=Q("input",{value:v.c("gazetteer-submit"),type:"submit","class":"form-control gazetteersearch-submit"});d.appendChild(a.h)}
function jf(a){$(a.a).autocomplete({source:p(function(a,c){hf(this,a.term,c)},a),delay:300,minLength:3,autoFocus:!0,select:p(function(a,c){gf(this,c.item)},a),open:function(){$(this).removeClass("ui-corner-all").addClass("ui-corner-top")},close:function(){$(this).removeClass("ui-corner-top").addClass("ui-corner-all")}})}function kf(a){var b=p(function(a){a=-1<a.indexOf(",")?a.split(",")[0]:a;this.u.placename(a)},a);R(a.h,"click",function(){b(this.a.value)},void 0,a)}
function hf(a,b,c){A(a.a,"loading");W(a.o+"?format=json&q="+b,p(function(a){a=a.target;var e;if(X(a))e=X(a);else try{e=a.a?a.a.responseText:""}catch(f){e=""}w(a);console.log(e);a=$.map(e,function(a){return{label:a.display_name,value:a.display_name,lonlat:{x:parseFloat(a.lon),y:parseFloat(a.lat)},type:a.type}});this.b[b]=a;c(a);D(this.a,"loading")&&C(this.a,"loading")},a),"GET")}
function gf(a,b){a.dispatchEvent(new y(lf,{location_type:b.type,lonlat:[b.lonlat.x,b.lonlat.y],srs:l(void 0)?void 0:"EPSG:4326"}))}var lf="jumpto";function mf(a,b){var c=n(a)?O(a):a,d=Q("div",{"class":"spatialsearch-inner-container"});c.appendChild(d);c=Q("div",{"class":"spatialsearch-content-panel"});d.appendChild(c);d=Q("div",{"class":"body-container"});c.appendChild(d);this.b=new ef(d,Ha);nf(this,d,b,of(d))}
function nf(a,b,c,d){a.a=new Xe(b,c);R(d,"timechange",function(a){var b=this.a.a,c=a.target.time[0];a=a.target.time[1];var d=b.a.ea;if(null!=c&&ga(c)){if(c>b.a.xa)throw{name:"WrongParameterExecption",message:"Start value shouldn't be higher than the end value."};b.a.ea=c}if(null!=a&&ga(a)){if(a<b.a.ea)throw b.a.ea=d,{name:"WrongParameterExecption",message:"End value shouldn't be lower than the start value."};b.a.xa=a}b=this.a.a;We(b,v.fa(b.f),b.o)},void 0,a)}
function of(a){var b=qa+"/_search",c=new wd(a);W(b,function(a){a=a.target;X(a)?(a=X(a),a=[(new Date(a.aggregations.summary.min)).getUTCFullYear(),(new Date(a.aggregations.summary.max)).getUTCFullYear()]):a=[1850,1970];xd(c,a)},"POST",JSON.stringify({aggs:{summary:{stats:{field:"time"}}}}));return c};function pf(a,b){this.b=n(a)?O(a):a;var c=l("vertical")&&n("vertical")?"vertical":"horizontal",d=this.b,e=Q("div",{"class":"opacity-container"});d.appendChild(e);d=Q("div",{"class":"slider-container opacity-slider"});e.appendChild(d);this.a=Q("div",{"class":"slider"});d.appendChild(this.a);qf(this,this.a,b,c)}
function qf(a,b,c,d){function e(a,b){"vertical"==d?b.style.top=100-(a-0)/100*100+"%":b.style.left=(a-0)/100*100+"%";b.innerHTML=a+"%"}var f=100*c.getOpacity();$(b).slider({min:0,max:100,value:f,animate:"slow",orientation:d,step:1,slide:function(a,b){var d=b.value;e(d,h);c.setOpacity(d/100);v.ba()},change:p(function(a,b){var d=b.value;e(d,h);c.setOpacity(d/100);v.ba()},a)});var h=Q("div",{"class":"tooltip value",innerHTML:"100%"});b.appendChild(h);c.on("change:opacity",function(){var a=100*this.getOpacity();
19<Math.abs(a-$(b).slider("value"))&&$(b).slider("value",a)})};function rf(a,b,c){var d=a.getVisible()?"visible":"notvisible",e=Q("li",{"class":"layermanagement-record "+d,id:b,"data-id":a.getId()});b=Q("div",{"class":"control-container"});e.appendChild(b);d=Q("button",{"class":"move-layer-top minimize-tool",type:"button",title:v.c("factory-move-top"),innerHTML:v.c("factory-move-top")});b.appendChild(d);R(d,"click",function(b){c.removeLayer(a);c.addLayer(a);b.stopPropagation();v.ba()});d=Q("button",{"class":"disable-layer minimize-tool",type:"button",title:v.c("factory-show-map"),
innerHTML:v.c("factory-show-map")});b.appendChild(d);R(d,"click",function(){D(e,"visible")?(Nb(e,"visible","notvisible"),a.setVisible(!1)):(Nb(e,"notvisible","visible"),a.setVisible(!0));v.ba()});d=Q("button",{"class":"remove-layer minimize-tool",type:"button",title:v.c("factory-rm-map"),innerHTML:v.c("factory-rm-map")});b.appendChild(d);R(d,"click",function(b){c.removeLayer(a);b.stopPropagation();v.ba()});d=Q("div",{"class":"drag-btn"});b.appendChild(d);d=Q("a",{"class":"thumbnail",href:"#"});e.appendChild(d);
var f=Q("img",{onerror:'this.onerror=null;this.src="http://www.deutschefotothek.de/images/noimage/image120.jpg"',alt:"Thumbnail Image of Map",src:a.Ta()});d.appendChild(f);d=Q("div",{"class":"metadata-container"});e.appendChild(d);f=Q("h4",{innerHTML:a.Ua()});d.appendChild(f);f=Q("div",{"class":"timestamps"});d.appendChild(f);d=Q("span",{"class":"timestamps-label",innerHTML:v.c("timestamp")+" "+a.getTime()});f.appendChild(d);ib.get("vk2-auth")&&(d=Q("a",{"class":"georeference-update",title:v.c("factory-update-georef")+
" ...",innerHTML:v.c("factory-update-georef")+" ...",target:"_blank",href:v.g.Aa(a.getId())}),b.appendChild(d));new pf(e,a);a.on("change:visible",function(){!a.getVisible()&&D(e,"visible")?Nb(e,"visible","notvisible"):a.getVisible()&&D(e,"notvisible")&&Nb(e,"notvisible","visible")});return e};function sf(a,b,c){this.a=b;this.f=c;b=n(a)?O(a):a;a=Q("div",{"class":"layermanagement-container",id:"layermanagement-container"});b.appendChild(a);b=Q("div",{"class":"heading"});a.appendChild(b);c=Q("span",{"class":"header-label",innerHTML:v.c("layermanagement-header-lbl")});b.appendChild(c);c=Q("ul",{"class":"layermanagement-body",innerHTML:'<li class="empty">'+v.c("layermanagement-start-msg")+"</li>"});a.appendChild(c);this.b=c;new ve(b,this.f);new xe(b,this.f);this.J();T.call(this)}q(sf,T);
function tf(a){a=a.a.getArray();for(var b=[],c=0,d=a.length;c<d;c++)l(a[c].allowUseInLayerManagement)&&a[c].allowUseInLayerManagement&&b.push(a[c]);return b}function uf(a,b){for(var c=a.a.getArray(),d=0,e=c.length;d<e;d++)if(b===c[d])return d}
sf.prototype.h=function(a){if(l(a.element.allowUseInLayerManagement)&&a.element.allowUseInLayerManagement){this.b.innerHTML="";a=tf(this);for(var b=a.length-1;0<=b;b--){var c=rf(a[b],b,this.f);this.b.appendChild(c)}}$(this.b).sortable({revert:!0,handle:".drag-btn",stop:p(function(a,b){var c=tf(this),h=Jc("layermanagement-record",this.b),m=h.length-parseInt(h[b.item.index()].id,0)-1,r=b.item.index(),z=c.length-1-r,h=parseInt(h[r].id,0);l(h)&&m!=r&&(m=c[h],r=uf(this,m),this.a.removeAt(r),c=uf(this,
c[z]),z>h?this.a.insertAt(c+1,m):this.a.insertAt(c,m))},this)})};sf.prototype.J=function(){this.a.on("add",this.h,this);this.a.on("remove",this.h,this)};sf.prototype.O=function(){this.a.un("add",this.h,this);this.a.un("remove",this.h,this)};sf.prototype.getLayers=function(){return this.a.getArray()};function vf(){T.call(this)}q(vf,T);function wf(){var a=rc(new F(window.location.href));return H(a,"c")||H(a,"pos")||H(a,"dataid")||H(a,"oid")?!0:!1}
function xf(a,b){var c=rc(new F(window.location.href)),d,e;if(H(c,"c")){var f=c.get("c").split(",");d=ol.proj.transform([parseFloat(f[0],0),parseFloat(f[1],0)],"EPSG:4326",t.projection);e=void 0!==c.get("z")?parseInt(c.get("z"),0):4;if(isNaN(d[0])||isNaN(d[1]))d=ol.proj.transform([parseFloat(f[0],0),parseFloat(f[1],0)],"EPSG:3857",t.projection);yf(b,d,e)}if(H(c,"pos")&&v.A()){var f=v.S(),h=f.getCesiumScene().camera,m=c.get("pos").split(","),m={x:parseFloat(m[0],0),y:parseFloat(m[1],0),z:parseFloat(m[2],
0)},r=void 0!==c.get("h")?parseFloat(c.get("h"),5):0,z=void 0!==c.get("p")?parseFloat(c.get("p"),10):0,x=void 0!==c.get("r")?parseFloat(c.get("r"),10):0;f.getEnabled()||f.setEnabled(!0);h.setView({destination:m,orientation:{heading:r,pitch:z,roll:x}})}var B=p(function(a,c){var f=Ka(a);if(void 0!==c)for(var h=0;h<L.length;h++)for(var m=0;m<f.length;m++)L[h]==f[m].getId()&&this.dispatchEvent(new y("addmap",{feature:f[m]}));else for(m=0;m<f.length;m++)this.dispatchEvent(new y("addmap",{feature:f[m]}));
!d&&0<f.length&&!v.A()&&(h=void 0===e?4:e,d=f[0].getGeometry().getInteriorPoint().getCoordinates(),yf(b,d,h))},a);if(H(c,"oid")&&""!==c.get("oid")){for(var L=c.get("oid").split(","),c=0;c<L.length;c++)""==L[c]&&L.splice(c,1);Ne(L,function(a){a=a.target;var b=X(a)?X(a):void 0;w(a);void 0!==b.docs&&0<b.docs.length&&B(b.docs,L)})}else H(c,"dataid")&&""!==c.get("dataid")&&(f=qa+"/_search",c=Oe("dataid",[c.get("dataid")]),W(f,function(a){a=a.target;var b=X(a)?X(a):void 0;w(a);void 0!==b.hits&&void 0!==
b.hits.hits&&0<b.hits.hits.length&&B(b.hits.hits)},"POST",JSON.stringify(c)))}
function zf(a){var b="";a.getLayers().forEach(function(a){l(a.getId)&&(b+=a.getId()+",")});var c=ol.proj.transform(a.getView().getCenter(),t.projection,"EPSG:4326"),d=a.getView().getZoom();a=Ia&&void 0!==window.ol3d?window.location.origin+"/vkviewer/main/3d/?welcomepage=off":window.location.origin+v.g.G()+"?welcomepage=off";a=new F(a);var e=a.a;v.A()&&da(P("flip-mode-3d"))?(c=v.S().getCesiumScene(),d=Cesium.Ellipsoid.WGS84.cartographicToCartesian(c.camera.positionCartographic),e.set("h",c.camera.heading),
e.set("p",c.camera.pitch),e.set("pos",d.x+","+d.y+","+d.z),e.set("r",c.camera.roll)):(e.set("z",d),e.set("c",v.round(c[0],4)+","+v.round(c[1],4)));e.set("oid",b);hc(a,e);return a.toString()};function Af(a){a=a||{};var b=Q("div",{"class":"permalink ol-unselectable"}),c=Q("a",{href:"#permalink",innerHTML:"P","class":"ol-has-tooltip"});b.appendChild(c);var d=Q("span",{role:"tooltip",innerHTML:v.c("permalink-title")});c.appendChild(d);var e=Q("form",{id:"permaCopyBox",style:"display:none;"}),d=Q("div",{"class":"permaClose"});e.appendChild(d);d=Q("div",{"class":"nose"});e.appendChild(d);d=Q("div",{"class":"moreDots",innerHTML:"..."});e.appendChild(d);var f=Q("input",{type:"text",id:"permalinkResult",
readonly:"readonly",value:"#"});e.appendChild(f);d="MacIntel"==navigator.platform?"&#8984;":"Strg";d=Q("label",{"for":"permalinkResult",innerHTML:v.c("permalink-msg")+" "+d+"+C."});e.appendChild(d);b.appendChild(e);d=p(function(a){a.preventDefault();$(e).hasClass("open")?($(e).fadeOut().removeClass("open"),$(f).blur()):(f.value=zf(this.getMap()),$(e).fadeIn().addClass("open"),$(f).focus().select())},this);R(c,"click",d);R(c,"touchstart",d);ol.control.Control.call(this,{element:b,target:a.target})}
ol.inherits(Af,ol.control.Control);function yf(a,b,c){a.getView().setCenter(b);a.getView().setZoom(c)}function we(a){a=a.getLayers().getArray();for(var b=[],c=0;c<a.length;c++)v.A()?a[c]instanceof Z&&b.push(a[c]):a[c]instanceof Y&&b.push(a[c]);return b}
function Bf(a,b,c){b=void 0!==b?b:{projection:"EPSG:3857",center:[1528150,6630500],zoom:2};var d=[new ol.control.Attribution({collapsible:!1,collapsed:!1}),new ol.control.Zoom,new ol.control.FullScreen,new sd,new ol.control.ScaleLine,new Af,new De];l(c)&&!1!==c||d.push(new Ce({spyLayer:new ol.layer.Tile({attribution:void 0,source:new ol.source.XYZ({urls:Da,crossOrigin:"*",attributions:[]})})}));var e=[new ol.Attribution({html:'\u00a9 <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'})];
l(c)&&!0===c&&e.push(new ol.Attribution({html:'<a href="https://cesiumjs.org/data-and-assets/terrain/stk-world-terrain.html">\u00a9 Analytical Graphics, Inc., \u00a9 CGIAR-CSI, Produced using Copernicus data and information funded by the European Union - EU-DEM layers,  \u00a9 Commonwealth of Australia (Geoscience Australia) 2012</a>'}));this.f=new ol.Map({layers:[new ol.layer.Tile({source:new ol.source.XYZ({urls:Da,crossOrigin:"*",attributions:e,maxZoom:18})})],renderer:"canvas",target:a,interactions:ol.interaction.defaults().extend([new ol.interaction.DragRotateAndZoom]),
controls:d,view:new ol.View(b)});if(!0===Ia&&l(c)&&!0===c){a=new olcs.OLCesium({map:this.f,sceneOptions:{terrainExaggeration:2}});a.enableAutoRenderLoop();c=a.getCesiumScene();var d=c.globe,f=c.camera;window.ol3d=a;window.minimumRetrievingLevel=8;window.imageryAvailableLevels=void 0;d.baseColor=Cesium.Color.WHITE;d.tileCacheSize="100";d.maximumScreenSpaceError=1.5;c.backgroundColor=Cesium.Color.WHITE;c.globe.depthTestAgainstTerrain=!0;c.screenSpaceCameraController.maximumZoomDistance=3E5;c.terrainProvider=
new Cesium.CesiumTerrainProvider({url:Ea,requestVertexNormals:!0});c.fog.enabled=!0;c.fog.density=7.761417520450251E-5;c.fog.screenSpaceErrorFactor=50;c.scene3DOnly=!0;var h=ol.proj.transformExtent(b.extent,b.projection,"EPSG:4326").map(function(a){return a*Math.PI/180});c.postRender.addEventListener(function(){var a=f.positionCartographic.clone();if(!ol.extent.containsXY(h,a.longitude,a.latitude)){var b=.05*a.height/this.screenSpaceCameraController.maximumZoomDistance;a.longitude=Math.max(h[0]-b,
a.longitude);a.latitude=Math.max(h[1]-b,a.latitude);a.longitude=Math.min(h[2]+b,a.longitude);a.latitude=Math.min(h[3]+b,a.latitude);this.camera.setView({destination:Cesium.Ellipsoid.WGS84.cartographicToCartesian(a),orientation:{heading:this.camera.heading,pitch:this.camera.pitch}})}this.screenSpaceCameraController.minimumZoomDistance=1800<a.height?400:200},c);b=rc(new F(window.location.href));a=new pd;H(b,"pos")&&rd(a,"3d");this.f.addControl(a)}this.f.on("singleclick",function(a){var b=[];v.A()?(a=
this.f.getCoordinateFromPixel(a.pixel),b=this.N.getSource().getFeaturesAtCoordinate(a)):this.getMap().forEachFeatureAtPixel(a.pixel,function(a){b.push(a)});Cf(b)},this)}pa("vk2.module.MapModule",Bf);
function Df(a){var b=0==a.get("denominator")?15:5E3>=a.get("denominator")?17:15E3>=a.get("denominator")?16:15;return Ia&&void 0!==window.ol3d?new Z({maxZoom:b,time:a.get("time"),thumbnail:a.get("thumb"),title:a.get("title"),objectid:a.get("id"),id:a.getId(),dataid:a.get("dataid"),tms:a.get("tms"),clip:a.getGeometry().clone()}):new Y({time:a.get("time"),maxZoom:b,thumbnail:a.get("thumb"),title:a.get("title"),objectid:a.get("id"),id:a.getId(),dataid:a.get("dataid"),tms:a.get("tms"),clip:a.getGeometry().clone()})}
Bf.prototype.getMap=function(){return this.f};Bf.prototype.getMap=Bf.prototype.getMap;function Ef(a,b){R(b,"addmap",function(a){a=a.target.feature;!0===a.get("georeference")&&(this.f.addLayer(Df(a)),v.A()&&(a=He(a.getGeometry().clone(),a.getId(),a.get("time"),a.get("title")),this.N.getSource().addFeature(a)))},void 0,a);xf(b,a.f)}
function Ff(a,b){a.a=b.a;a.N=v.A()?new ol.layer.Vector({source:new ol.source.Vector,style:function(){return[new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.0)"})})]}}):void 0;void 0!==a.N&&(a.N.set("altitudeMode","clampToGround"),a.N.set("type","click"),a.f.getLayers().on("add",function(a){a=a.target.getArray()[a.target.getLength()-1];if(a instanceof Y||a instanceof Z)this.f.removeLayer(this.N),this.f.addLayer(this.N)},a),a.f.addLayer(a.N));R(a.a,"click-record",function(a){a=
a.target.feature;var b;a:{b=a.getId();for(var e=this.f.getLayers().getArray(),f=0;f<e.length;f++)if((e[f]instanceof Y||e[f]instanceof Z)&&e[f].getId()==b){b=!0;break a}b=!1}!b&&a.get("georeference")&&(this.f.addLayer(Df(a)),Ia&&void 0!==window.ol3d&&(a=He(a.getGeometry().clone(),a.getId(),a.get("time"),a.get("title")),this.N.getSource().addFeature(a)))},void 0,a);R(b.b,"jumpto",function(a){var b=a.target.lonlat;a=ol.proj.transform([parseFloat(b[0]),parseFloat(b[1])],a.target.srs,t.projection);yf(this.f,
a,6)},void 0,a)}function Cf(a){if(0<a.length){var b=new Vd;$d(b,void 0,"mapcontroller-click-modal");for(var c=Q("section"),d=0;d<a.length;d++){var e=Q("a",{href:v.g.Bb(a[d].getId()),innerHTML:a[d].get("title")+" "+a[d].get("time"),target:"_self"});c.appendChild(e);var f=Q("br");c.appendChild(f)}d=P("modal-body",b.I);ha(c)&&1==c.nodeType&&(d.appendChild(c),Xd(b,c));1==a.length&&e.click()}};pa("vk2.app.PresentationApp",function(a){v.Na();var b=l(a.authenticate)&&"boolean"==typeof a.authenticate?a.authenticate:!1,c=wf();v.Ya(l(a.modalAnchorClassName)?a.modalAnchorClassName:"vk2-modal-anchor");b||c||Gf();b=new Bf(a.mapContainerId,t,l(a.with25d)?a.with25d:void 0);c=new mf(a.spatialsearchContainerId,b.getMap());Ff(b,c);new sf(a.mapContainerId,b.getMap().getLayers(),b.getMap());c=new vf(b.getMap());Ef(b,c);setTimeout(function(){v.Ib(a.mapContainerId)},500)});
function Gf(){var a=v.getQueryParam("welcomepage");O("welcome-page-link")&&"off"!==v.vb()&&"off"!==a&&O("welcome-page-link").click()};function Hf(a,b,c,d){var e=l(c)?"webgl":"canvas",f=l(d)?d:!1;W(b,p(function(c){200!=te(c.target)&&alert("Something went wrong, while trying to get the process information from the server. Please try again or contact the administrator.");c=ue(c.target);var d=Sc(c,function(a){return 1==a.nodeType&&"IMAGE_PROPERTIES"==a.tagName});c=parseInt(d.getAttribute("WIDTH"),0);d=parseInt(d.getAttribute("HEIGHT"),0);If(this,b.substring(0,b.lastIndexOf("/")+1),d,c,a,e,f)},this),"GET");T.call(this)}q(Hf,T);
function If(a,b,c,d,e,f,h){a.h=c;a.l=d;var m=new ol.proj.Projection({code:"ZOOMIFY",units:"pixels",extent:[0,0,d,c]});a.o=new ol.source.Zoomify({url:b,size:[d,c],crossOrigin:"*"});b=new ol.View({projection:m,center:[d/2,-c/2],zoom:1,maxZoom:9});a.b=new ol.layer.Tile({source:a.o});c=[new ol.control.FullScreen,new ol.control.Zoom];h&&c.push(new ol.control.OverviewMap({collapsed:!1,layers:[a.b]}));a.a=new ol.Map({layers:[a.b],interactions:ol.interaction.defaults().extend([new ol.interaction.DragZoom]),
controls:c,renderer:f,target:e,view:b});a.a.addControl(new ol.control.ZoomToExtent({extent:b.calculateExtent(a.a.getSize())}));a.dispatchEvent(new y("loadend",{}))}Hf.prototype.getMap=function(){return this.a};Hf.prototype.getHeight=function(){return parseInt(this.h,0)};Hf.prototype.getWidth=function(){return parseInt(this.l,0)};pa("vk2.app.MapProfileApp",function(a){var b=document.createElement("textarea");b.innerHTML=a.feature;Jf(b.value,a)});function Jf(a,b){var c=JSON.parse(a).zoomify.replace("http:","");console.log(c);console.log(b.zoomifyContainer);if(ol.has.WEBGL)d=new Hf(b.zoomifyContainer,c,!0),R(d,"loadend",function(){d.getMap().addControl(new Be)});else var d=new Hf(b.zoomifyContainer,c)};function Kf(a,b,c,d){var e=Q("div",{"class":"vk2GeorefToolsBtn btn btn-default btn-submit deactivate",innerHTML:'<span class="glyphicon glyphicon-refresh"></span> '+v.c("georef-confirm")});O(a).appendChild(e);R(e,"click",p(this.a,this,b,c,d));T.call(this)}q(Kf,T);
Kf.prototype.a=function(a,b,c){this.dispatchEvent(new y("start-confirm",{}));var d=Yc(),e=Lf(b,d);c=0<c.getFeatures().length?c.getFeatures()[0].getGeometry().clone().transform(t.projection,d):void 0;var f=b.getType();if(4>e.gcps.length)alert("You have to place at least 4 ground control points");else{var h={georeference:e,id:a,type:f};void 0!==c&&(h.clip={source:d,polygon:c.getCoordinates()[0]});"update"===f&&(a=l(b.eb)?b.eb:void 0,h.overwrites=a);var m=p(function(a){a=X(a.target);this.dispatchEvent(new y("end-confirm",
{data:a}))},this);p(function(){this.dispatchEvent(new y("error",{error:"Something went wrong, while sending confirmation data from the server."}))},this);h.hasOwnProperty("clip")?Fe(h,m):v.sa(v.c("georef-confirm-clip-title"),v.c("georef-confirm-clip-msg"),function(){Fe(h,m)},"georeference-confirm-without-clip")}};function Mf(a,b,c){var d=Q("div",{"class":"vk2GeorefToolsBtn btn btn-default btn-validate",innerHTML:'<span class="glyphicon glyphicon-refresh"></span> '+v.c("georef-validate")});O(a).appendChild(d);R(d,"click",p(this.a,this,b,c));T.call(this)}q(Mf,T);
Mf.prototype.a=function(a,b){var c={georeference:Nf(b,Xc(),Yc()),id:a};if(4>c.georeference.gcps.length)v.sa("Info",v.c("georef-confirm-warn-gcp"),function(){},"georef-validation-dialog",!1);else{this.dispatchEvent(new y("start-warping",{}));var d=p(function(a){a=X(a.target);this.dispatchEvent(new y("end-warping",{data:a,georefParams:c}))},this),e=p(function(){this.dispatchEvent(new y("error",{error:"Something went wrong, while fetching validation data from the server."}))},this);Ee(c,d,e)}};function Of(a){this.a=l(a.ja)&&ha(a.ja)?l(a.ja["new"])?cb(a.ja["new"]):cb(a.ja):{source:"pixel",target:"EPSG:4314"};this.eb=l(a.cb)?a.cb:void 0;this.h=l(a.$b)?a.hb:{source:"pixel",target:"EPSG:900913"};this.b=a.sources;this.o=l(a.type)?"update"===a.type?!0:!1:!1;this.l=new La;this.J();T.call(this)}q(Of,T);
Of.prototype.J=function(){Pf(this,this.b);if(this.a.hasOwnProperty("gcps"))for(var a=this.a,b=this.b,c=this.h,d=0;d<a.gcps.length;d++){var e=a.gcps[d],f=v.Pb(e.source),f=new ol.Feature(new ol.geom.Point(f)),e=ol.proj.transform(e.target,a.target,c.target),e=new ol.Feature(new ol.geom.Point(e));b[0].addFeature(f);b[1].addFeature(e)}};
function Pf(a,b){function c(a){var c=b[0].getFeatureById(a),h=b[1].getFeatureById(a);if(null!=c&&null!=h){c.setProperties({Jb:!0});h.setProperties({Jb:!0});var m=v.j.Ca();m.getText().setText(""+a);c.setStyle(m);h.setStyle(m);d.a=!1;d.b=!1}}var d=a.l;b[0].on("addfeature",function(a){if(!1===d.a){var b=Ma(d);a=a.feature;d.a=!0;a.setId(b);a.setStyle(v.j.La);d.a&&d.b&&c(b)}else alert("Please add source to other map!"),this.removeFeature(a.feature)});b[0].on("removefeature",function(a){a=a.feature.getId();
var c=void 0!==a?b[0].getFeatureById(a):void 0;null===(void 0!==a?b[1].getFeatureById(a):void 0)&null===c&&d.a&&(d.a=!1)});b[1].on("removefeature",function(a){a=a.feature.getId();var c=void 0!==a?b[0].getFeatureById(a):void 0;null===(void 0!==a?b[1].getFeatureById(a):void 0)&null===c&&d.b&&(d.b=!1)});b[1].on("addfeature",function(a){if(!1===d.b){var b=Ma(d);a=a.feature;d.b=!0;a.setId(b);a.setStyle(v.j.La);d.a&&d.b&&c(b)}else alert("Please add source to other map!"),this.removeFeature(a.feature)})}
function Nf(a,b,c){b=l(b)?b:"affine";a=Qf(a,l(c)?c:void 0);a.algorithm=b;return a}
function Qf(a,b){var c=p(function(a,b){for(var c=[],d=0;d<a.length;d++){var e=v.Ob(a[d][0].getGeometry().getCoordinates()),x=ol.proj.transform(a[d][1].getGeometry().getCoordinates(),this.h.target,b);c.push({source:e,target:x})}return c},a),d=cb(a.a),e=l(b)?b:d.target;d.gcps=c(function(a){for(var b=[],c=0;c<a[0].getFeatures().length;c++){var d=a[0].getFeatures()[c],e;da(d.getId())&&(e=a[1].getFeatureById(d.getId()));null!=d&&null!=e&&b.push([d,e])}return b}(a.b),e);d.target=e;return d}
function Lf(a,b){var c=Xc(),c=l(c)?c:"affine",d=cb(a.a),e=Nf(a,c,l(b)?b:d.target);Nf(a,c,d.target);return e}Of.prototype.getType=function(){return this.o?"update":"new"};function Rf(a,b){var c=b.getSource(),d;this.f=a;this.s=[new ol.interaction.Draw({features:c.getFeaturesCollection(),type:"Polygon",style:v.j.Ka,minPoints:5,condition:function(a){a=a.coordinate;return void 0!==d&&v.round(d[0],4)===v.round(a[0],4)&&v.round(d[1],4)===v.round(a[1],4)?!1:!0},geometryFunction:function(a,b){b||(b=new ol.geom.Polygon(null));void 0!==b.getCoordinates()[0]&&2<b.getCoordinates()[0].length&&3>=b.getCoordinates()[0].length?d=b.getCoordinates()[0][b.getCoordinates()[0].length-
1]:d=void 0;b.setCoordinates(a);return b}}),new ol.interaction.Modify({features:c.getFeaturesCollection(),deleteCondition:function(a){var b=1<=c.getFeatures().length?c.getFeatures()[0].getGeometry().getCoordinates()[0]:void 0;return void 0!==b&&5<b.length&&ol.events.condition.shiftKeyOnly(a)&&ol.events.condition.singleClick(a)}})];this.s[0].on("drawstart",function(){1<=c.getFeatures().length&&this.finishDrawing()},this.s[0]);this.s[0].on("drawend",function(a){a=1<=c.getFeatures().length?c.getFeatures()[0].getGeometry():
a.feature.getGeometry();if(5>a.getCoordinates()[0].length)v.sa("Info",v.c("georef-confirm-warn-clippolygon"),function(){},"georef-validation-dialog",!1),this.finishDrawing();else{var b=a.getCoordinates(),d=b[0].length;v.round(b[0][d-2][0],4)===v.round(b[0][d-3][0],4)&&v.round(b[0][d-2][1],4)===v.round(b[0][d-3][1],4)&&(b[0].splice(d-2,1),a.setCoordinates(b))}},this.s[0]);c.getFeaturesCollection().on("add",function(){1<c.getFeatures().length?c.getFeatures().splice(1,1):this.dispatchEvent(new y("drawend",
{feature:c.getFeatures()[0]}))},this);U.call(this)}q(Rf,U);Rf.prototype.C=function(){this.J();this.status_=!0};Rf.prototype.J=function(){for(var a=0;a<this.s.length;a++)this.f.addInteraction(this.s[a])};Rf.prototype.D=function(){this.O();this.status_=!1};Rf.prototype.O=function(){for(var a=0;a<this.s.length;a++)this.f.removeInteraction(this.s[a])};function Sf(a){this.b=n(a)?O(a):a;var b=Q("div",{"class":"georef-tools-clip-container",id:"georef-tools-clip-container"});this.b.appendChild(b);Tf(this,b);a=Q("div",{"class":"georef-tools-clip-inner-container",id:"georef-tools-clip-inner-container"});b.appendChild(a);var b=[],c=Uf("noneToggle","none",v.c("georef-movemap"));a.appendChild(c);b.push(c);var d=Uf("drawClip","drawclip",v.c("georef-drawclip"));a.appendChild(d);b.push(d);R(c,"click",p(this.a,this,"none",b));R(d,"click",p(this.a,this,"drawclip",
b));T.call(this)}q(Sf,Dd);Sf.prototype.C=function(){var a=O("georef-tools-clip-handler");null!=a&&D(a,"open")||$(a).trigger("click")};function Uf(a,b,c){var d=Q("div",{"class":"tool"});a=Q("div",{id:a,"class":"tool-move toggle-elements "+a,value:b,innerHTML:'<span class="tool-title">'+c+"</span>"});d.appendChild(a);return d}
Sf.prototype.D=function(){var a=O("georef-tools-clip-handler");if(null==a||D(a,"open")){$(a).trigger("click");for(var a=Jc("toggle-elements"),b=0;b<a.length;b++)D(a[b],"active")&&C(a[b],"active")}};
Sf.prototype.a=function(a,b){for(var c=p(function(a,b){D(a,"active")||A(a,"active");this.dispatchEvent(new y("activate-"+b,a))},this),d=p(function(a,b){D(a,"active")&&C(a,"active");this.dispatchEvent(new y("deactivate-"+b,a))},this),e=0;e<b.length;e++){var f=b[e].children[0];f.value===a?c(f,f.value):d(f,f.value)}};
function Tf(a,b){var c=Q("div",{"class":"georef-tools-clip-handler",id:"georef-tools-clip-handler"});b.appendChild(c);Pc(c,Q("span",{"class":"icon"}));$(c).click(p(function(){var a=D(c,"open")?new y("deactivate",c):new y("activate",c);this.dispatchEvent(a);$("#georef-tools-clip-inner-container").slideToggle(300,function(){$(c).toggleClass("open")})},a))};function Vf(a,b,c){this.a=new ol.source.Vector({features:new ol.Collection});l(c)&&(c=Wc(c),this.a.addFeature(c));this.K=new ol.layer.Vector({source:this.a,style:v.j.Ka});this.K.setMap(b);this.b=new Rf(b,this.K);Wf(a,{"activate-drawclip":this.b,"deactivate-drawclip":this.b});this.va=a}q(Vf,Na);Vf.prototype.i=function(a){a=Wc(a.target.clip);0===this.a.getFeatures().length&&(this.a.addFeature(a),this.K.addFeature(a))};
function Wf(a,b){function c(a){if(l(a)){var c=a.type;l(c)&&b.hasOwnProperty(c)&&b[c].D()}else for(c in b)b.hasOwnProperty(c)&&b[c].D()}R(a,"activate-drawclip",function(a){c();b[a.type].C()});R(a,"deactivate-drawclip",c);R(a,"activate",function(){});R(a,"deactivate",function(){c()})};function Xf(a){this.m=n(a)?O(a):a;var b=Q("div",{"class":"georef-tools-gcp-container",id:"georef-tools-gcp-container"});this.m.appendChild(b);Yf(this,b);a=Q("div",{"class":"georef-tools-gcp-inner-container",id:"georef-tools-gcp-inner-container"});b.appendChild(a);var b=[],c=Zf("noneToggle","none",v.c("georef-movemap"));a.appendChild(c);b.push(c);var d=Zf("pointToggle","addgcp",v.c("georef-setgcp"));a.appendChild(d);b.push(d);var e=Zf("dragToggle","draggcp",v.c("georef-movegcp"));a.appendChild(e);
b.push(e);var f=Zf("deleteToggle","delgcp",v.c("georef-delgcp"));a.appendChild(f);b.push(f);R(c,"click",p(this.a,this,"none",b));R(d,"click",p(this.a,this,"addgcp",b));R(e,"click",p(this.a,this,"draggcp",b));R(f,"click",p(this.a,this,"delgcp",b));T.call(this)}q(Xf,Dd);Xf.prototype.C=function(){var a=O("georef-tools-gcp-handler");null!=a&&D(a,"open")||$(a).trigger("click")};
function Zf(a,b,c){var d=Q("div",{"class":"tool"});a=Q("div",{id:a,"class":"tool-move toggle-elements "+a,value:b,innerHTML:'<span class="tool-title">'+c+"</span>"});d.appendChild(a);return d}Xf.prototype.D=function(){var a=O("georef-tools-gcp-handler");if(null==a||D(a,"open")){$(a).trigger("click");for(var a=Jc("toggle-elements"),b=0;b<a.length;b++)D(a[b],"active")&&C(a[b],"active")}};
Xf.prototype.a=function(a,b){for(var c=p(function(a,b){D(a,"active")||A(a,"active");this.dispatchEvent(new y("activate-"+b,a))},this),d=p(function(a,b){D(a,"active")&&C(a,"active");this.dispatchEvent(new y("deactivate-"+b,a))},this),e=0;e<b.length;e++){var f=b[e].children[0];f.value===a?c(f,f.value):d(f,f.value)}};
function Yf(a,b){var c=Q("div",{"class":"georef-tools-gcp-handler",id:"georef-tools-gcp-handler"});b.appendChild(c);Pc(c,Q("span",{"class":"icon"}));$(c).click(p(function(){var a=D(c,"open")?new y("deactivate",c):new y("activate",c);this.dispatchEvent(a);$("#georef-tools-gcp-inner-container").slideToggle(300,function(){$(c).toggleClass("open")})},a))};function $f(a){this.a=a.Z;var b=a.Nb,c=a.sources[0],d=a.sources[1];a={V:a.Za[0],R:a.Za[1]};var e={V:new ol.layer.Vector({source:c,style:function(){return[v.j.pb]}}),R:new ol.layer.Vector({source:d,style:function(){return[v.j.pb]}})},d=new zd(c,d,a.V,a.R),c=new Bd(e.V,e.R,a.V,a.R),f=new Ad(e.V,e.R,a.V,a.R),d={"activate-addgcp":d,"deactivate-addgcp":d,"activate-draggcp":c,"deactivate-draggcp":c,"activate-delgcp":f,"deactivate-delgcp":f};ag(c);bg(b,a,e,d);this.va=b}q($f,Na);
function ag(a){function b(a){a.target.feature.setStyle(a.target.targetStyle)}R(a,"selected",b);R(a,"deselected",b)}
function bg(a,b,c,d){function e(a){f();d[a.type].C()}function f(a){if(l(a)){var b=a.type;l(b)&&d.hasOwnProperty(b)&&d[b].D()}else for(b in d)d.hasOwnProperty(b)&&d[b].D()}R(a,"activate-addgcp",e);R(a,"deactivate-addgcp",f);R(a,"activate-draggcp",e);R(a,"deactivate-draggcp",f);R(a,"activate-delgcp",e);R(a,"deactivate-delgcp",f);R(a,"activate",function(){});R(a,"deactivate",function(){f()});b.V.addLayer(c.V);b.R.addLayer(c.R)};function cg(a){var b=n(a.Ha)?O(a.Ha):a.Ha,c=n(a.Ga)?O(a.Ga):a.Ga,d=a.Gb,e=a.Db,f=a.Lb,h=a.Qb,m=l(a.Oa)?a.Oa:void 0,r=l(a.type)?a.type:void 0,z=l(a.ha)?a.ha:void 0,x=l(a.Pa)?a.Pa:void 0,B=[new ol.source.Vector({features:new ol.Collection}),new ol.source.Vector({features:new ol.Collection})],L=l(a.hb)?L:void 0;a=a.Eb.toLowerCase();var na={mtb:"affine",gl:"affine",ae:"affine",tk:"affine",ak:"tps"};a=void 0!==m?m.algorithm:na.hasOwnProperty(a)?na[a.toLowerCase()]:na.mtb;for(var na=$("#transformation-chooser option"),
lb=0;lb<na.length;lb++)a.toLowerCase()===na[lb].innerHTML.toLowerCase()&&$("#transformation-chooser").val(na[lb].innerHTML);m=new Of({sources:B,ja:m,type:r,cb:x,hb:L});b=new Xf(b);f=new $f({Nb:b,Z:m,Za:[f.getMap(),h.getMap()],sources:B});c=new Sf(c);z=new Vf(c,h.getMap(),z);B=f.va;m=z.va;R(B,"activate",m.D);R(m,"activate",B.D);S(f.a,"add-gcp-clippolygon",z.i,void 0,z);B=new Mf(d,e,f.a);d=new Kf(d,e,f.a,z.a);dg(B,d,h,z,c);b.C()}
function dg(a,b,c,d,e){R(a,"start-warping",function(){eg(c)});R(a,"end-warping",function(a){a=a.target.data;var b=0<d.a.getFeatures().length?d.a.getFeatures()[0]:void 0,m=ol.proj.transformExtent(a.extent,Yc(),t.projection);fg(c,a.wmsUrl,a.layerId,b);c.setZoom(m);gg(c);e.C()});R(a,"error",function(){alert("Something went wrong, while trying to request a validation result.");gg(c)});R(b,"end-confirm",function(){window.location.href=v.g.Sa()});R(d.b,"drawend",function(a){a=a.target.feature;if(void 0!==
c.Y){var b=c.Y.getProperties();fg(c,b.wms_url,b.layerid,a)}})};function hg(a,b){Hf.call(this,a,b)}q(hg,Hf);function ig(a,b){this.b=t.projection;this.Y=void 0;this.m=O(a);var c=l(b)?b:[640161.933,5958026.134,3585834.8011505,7847377.4901306],d=new ol.layer.Tile({source:new ol.source.XYZ({urls:Da,crossOrigin:"*",attributions:[],maxZoom:18})});this.f=new ol.Map({layers:[d],interactions:ol.interaction.defaults().extend([new ol.interaction.DragZoom]),renderer:"canvas",target:this.m,view:new ol.View({projection:this.b,center:[0,0],zoom:2}),controls:[new ol.control.FullScreen,new ol.control.Zoom,new ol.control.Attribution,
new Ce({spyLayer:new ol.layer.Tile({attribution:void 0,source:new ol.source.OSM})})]});this.f.getView().fit(c,this.f.getSize());l(b)&&(this.a=new ol.control.ZoomToExtent({extent:c}),this.f.addControl(this.a));c=new ef(this.m,Ha);R(c,"jumpto",function(a){var b=this.f.getView(),c=a.target.lonlat;b.setCenter(ol.proj.transform([parseFloat(c[0]),parseFloat(c[1])],a.target.srs,this.b));b.setZoom(12)},void 0,this);P("ol-attribution").children[0].children[0].remove()}
function eg(a){if(!l(jg(a))){var b=Q("div",{"class":"result-viewer-loading-panel",id:"result-viewer-loading-panel",innerHTML:'<div class="progress"><div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="100"aria-valuemin="0" aria-valuemax="100" style="width: 100%"><span class="sr-only">100% Complete</span></div></div>'});a.m.appendChild(b)}}function gg(a){a=jg(a);l(a)&&Qc(a)}
function fg(a,b,c,d){l(a.Y)&&a.f.removeLayer(a.Y);d=void 0!==d?d.getGeometry():void 0;a.Y=Ie({kb:b,Xa:c,ha:d},a.f);a.f.getLayers().insertAt(1,a.Y);O("opacity-slider-container")&&(O("opacity-slider-container").innerHTML="",new pf(O("opacity-slider-container"),a.Y))}ig.prototype.getMap=function(){return this.f};function jg(a){for(var b=0;b<a.m.children.length;b++)if("result-viewer-loading-panel"===a.m.children[b].id)return a.m.children[b]}
ig.prototype.setZoom=function(a){void 0!==a&&(a=void 0===a?this.f.getView().calculateExtent(this.f.getSize()):a,this.f.removeControl(this.a),this.a=new ol.control.ZoomToExtent({extent:a}),this.f.addControl(this.a),this.f.getView().fit(a,this.f.getSize()))};pa("vk2.app.AdminEvaluationApp",function(a){if(!a.hasOwnProperty("process_list")||!a.hasOwnProperty("map_container"))throw"Missing parameter in the vk2.app.AdminEvaluationApp settings. Please check the documentation.";var b=a.map_container;Vc();this.na=new ig(b);a.hasOwnProperty("btn_getallprocess")&&kg(this,a.btn_getallprocess,a.process_list);a.hasOwnProperty("btn_getallinvalideprocess")&&kg(this,a.btn_getallinvalideprocess,a.process_list,"validation=invalide");a.hasOwnProperty("btn_getsingleprocess_mapid")&&
lg(this,a.btn_getsingleprocess_mapid,a.process_list);a.hasOwnProperty("btn_getsingleprocess_userid")&&mg(this,a.btn_getsingleprocess_userid,a.process_list)});function kg(a,b,c,d){R(O(b),"click",function(){var a=new V;S(a,"success",function(a){a=a.target;ng(this,c,X(a));w(a)},!1,this);S(a,"error",function(){alert("Something went wrong, while trying to fetch data from the server.")},!1,this);var b=v.g.Ba(l(d)?d:void 0);le(a,b,"GET")},void 0,a)}
function lg(a,b,c){R(O(b),"click",function(a){a=a.currentTarget.getAttribute("data-src");var b=O(a).value;a=new V;S(a,"success",function(a){a=a.target;ng(this,c,X(a));w(a)},!1,this);b=v.g.Ba("mapid="+b);le(a,b,"GET")},void 0,a)}
function mg(a,b,c){R(O(b),"click",function(a){a=a.currentTarget.getAttribute("data-src");var b=O(a).value;a=new V;S(a,"success",function(a){a=a.target;ng(this,c,X(a));w(a)},!1,this);S(a,"error",function(){alert("Something went wrong, while trying to fetch data from the server.")},!1,this);b=v.g.Ba("userid="+b);le(a,b,"GET")},void 0,a)}
function og(a,b){function c(a,b,c){return Q("p",{innerHTML:"<strong>"+a+'</strong> <span class="'+(void 0!==c?c:"")+'">'+b+"</span>"})}var d=Q("article",{id:b.georef_id,"class":"panel "+("invalide"===b.adminvalidation?"panel-danger":"isvalide"===b.adminvalidation?"panel-success":"panel-warning")+" record"}),e=Q("div",{"class":"panel-heading",innerHTML:"<h3>"+b.title+' <span class="label label-default">'+b.type+'</span> <span class="right">'+b.georef_id+"</span></h3>"});d.appendChild(e);var f=Q("button",
{"data-params-georef":JSON.stringify(b.georef_params),"data-params-id":parseInt(b.oai.split("-")[2]),"class":"btn btn-default btn-show-georef",innerHTML:"Vorschau anzeigen ..."});void 0!==b.clippolygon&&f.setAttribute("data-params-clip",JSON.stringify(b.clippolygon));pg(a,f);e.appendChild(f);Pc(e,Q("a",{href:v.g.Aa(void 0,"georeferenceid="+b.georef_id),"class":"btn btn-default action-btn",target:"_blank",innerHTML:"Georeferenzierung anzeigen ..."}));var e=Q("div",{"class":"panel-body"}),h=c("Georeferenzierungsparameter vom "+
b.georef_time+":","","glyphicon glyphicon-triangle-left right"),m=Q("p",{"class":"georef-params",innerHTML:"Passpunkte: <br>"+JSON.stringify(b.georef_params)+"<br><br>Clip-Polygon: <br>"+JSON.stringify(b.clippolygon)});R(h,"click",function(){var a=P("glyphicon",h);E(m,"show")?(Qb(m,"show"),Qb(a,"glyphicon-triangle-left"),Pb(a,"glyphicon-triangle-bottom")):(Pb(m,"show"),Qb(a,"glyphicon-triangle-bottom"),Pb(a,"glyphicon-triangle-left"))});Pc(e,c("Karten-OAI:",b.oai));Pc(e,c("Validierung:",b.adminvalidation,
"label label-danger"));Pc(e,c("Vearbeitet:",1==b.processed?"Ja":"Nein","label label-info"));Pc(e,c("Nutzer:",b.userid));e.appendChild(h);e.appendChild(m);Pc(e,c("Aktiv:",1==b.georef_isactive?"Ja":"Nein","label label-info"));d.appendChild(e);e=Q("div",{"class":"panel-footer"});d.appendChild(e);if("isvalide"!=b.adminvalidation){var f=Q("button",{"class":"btn btn-primary action-btn",innerHTML:'Setze als "isvalide" ...'}),r=v.g.Ab("georeferenceid="+b.georef_id);R(f,"click",function(){W(r,function(a){alert(X(a.target).message);
Qc(d)},"GET")});e.appendChild(f)}if("invalide"!=b.adminvalidation){var z=Q("button",{"data-href":v.g.zb("georeferenceid="+b.georef_id),"class":"btn btn-warning action-btn",innerHTML:'Setze als "invalide" ...'});R(z,"click",ma(v.sa,"Ist der Georeferenzierungsprozess valide?",'Soll der Georeferenzierungsprozess auf "invalide" gesetzt werden? Bitte geben Sie einen Grund an: <br><div id="admin-validation-comment" class="input-group"><input type="radio" value="imprecision"> Ungenauigkeit <br><input type="radio" value="wrong-parameter"> Falsche Parameter <br><input type="radio" value="wrong-map-sheet-number">  False Kartennummer <br><input type="radio" value="bad-original"> Schlechte Qualit\u00e4t des Orginals<br><br><input type="text" class="form-control" placeholder="Weitere Gr\u00fcnde ..." id="confirm-comment"></div>',
function(){for(var a=Kc("input",void 0,O("admin-validation-comment")),b=void 0,c=0;c<a.length;c++)"radio"==a[c].type&&a[c].checked&&(b=a[c].value);a=l(b)?b:O("confirm-comment").value;a=z.getAttribute("data-href")+"&comment="+a;W(a,function(a){alert(X(a.target).message);Qc(d)},"GET")}));e.appendChild(z)}return d}function ng(a,b,c){b=O(b);b.innerHTML="";for(var d=0,e=c.length;d<e;d++){var f=og(a,c[d]);b.appendChild(f)}}
function pg(a,b){R(b,"click",function(a){var b=JSON.parse(a.currentTarget.getAttribute("data-params-georef")),e=b.hasOwnProperty("new")?b["new"]:b,f=null==a.currentTarget.getAttribute("data-params-clip")||void 0==a.currentTarget.getAttribute("data-params-clip")?void 0:JSON.parse(a.currentTarget.getAttribute("data-params-clip"));a=parseInt(a.currentTarget.getAttribute("data-params-id"),0);a={georeference:e,id:a};void 0!==f&&(a.clip=f);eg(this.na);Ee(a,p(function(a){a=X(a.target);var b=ol.proj.transformExtent(a.extent,
e.target,t.projection),c=void 0!==f?Wc(f):void 0;fg(this.na,a.wmsUrl,a.layerId,c);this.na.setZoom(b);gg(this.na)},this),function(){gg(this.na);alert("Something went wrong while trying to fetch a georeference validation result from server ....")})},!1,a)};function qg(a,b){v.Na();v.Ya("vk2-modal-anchor");Vc();var c=new F(window.location.href),d=c.a.get("objectid"),c=c.a.get("georeferenceid");l(c)?rg("georeferenceid="+c,p(this.a,this,a,b)):l(d)&&rg("objectid="+d,p(this.a,this,a,b))}pa("vk2.app.GeoreferenceApp",qg);function rg(a,b){var c=v.g.xb(a);W(c,function(a){200!=te(a.target)&&alert("Something went wrong, while trying to get the process information from the server. Please try again or contact the administrator.");b(X(a.target))})}
qg.prototype.a=function(a,b,c){var d=c.hasOwnProperty("extent")?ol.proj.transformExtent(c.extent,wa,"EPSG:3857"):void 0,e=new hg(a,c.zoomify),f=new ig(b,d);R(e,"loadend",function(){var d=c.hasOwnProperty("recommendedsrid")?"EPSG:"+c.recommendedsrid:"EPSG:4326";$("#projection-chooser").val(d);new cg({Ha:a,Ga:b,Gb:"georef-validate-menu",Db:c.objectid,Lb:e,Qb:f,Oa:c.georeference,type:c.type,ha:c.clippolygon,Pa:c.georeferenceid,Eb:c.maptype})},void 0,this);c.hasOwnProperty("warn")&&(d=Q("div",{innerHTML:c.warn+
' <a href="'+v.g.Sa()+'">'+v.c("back-to-main")+"</a>","class":"alert alert-danger warn-msg"}),O(a).appendChild(d))};}).call(window);
